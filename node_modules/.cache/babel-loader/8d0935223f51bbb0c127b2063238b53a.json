{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"C:\\\\Users\\\\Aditya Raj Awasthi\\\\Desktop\\\\bomb-dashboard-final-task\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\nvar _createClass = require(\"C:\\\\Users\\\\Aditya Raj Awasthi\\\\Desktop\\\\bomb-dashboard-final-task\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\nvar _inherits = require(\"C:\\\\Users\\\\Aditya Raj Awasthi\\\\Desktop\\\\bomb-dashboard-final-task\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/inherits\");\nvar _createSuper = require(\"C:\\\\Users\\\\Aditya Raj Awasthi\\\\Desktop\\\\bomb-dashboard-final-task\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createSuper\");\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ObservableStore = void 0;\nvar safe_event_emitter_1 = __importDefault(require(\"@metamask/safe-event-emitter\"));\nvar ObservableStore = /*#__PURE__*/function (_safe_event_emitter_) {\n  _inherits(ObservableStore, _safe_event_emitter_);\n  var _super = _createSuper(ObservableStore);\n  function ObservableStore(initState) {\n    var _this;\n    _classCallCheck(this, ObservableStore);\n    _this = _super.call(this);\n    if (initState) {\n      _this._state = initState;\n    } else {\n      // Typecast/default state: Preserve existing behavior\n      _this._state = {};\n    }\n    return _this;\n  }\n  // wrapper around internal getState\n  _createClass(ObservableStore, [{\n    key: \"getState\",\n    value: function getState() {\n      return this._getState();\n    }\n    // wrapper around internal putState\n  }, {\n    key: \"putState\",\n    value: function putState(newState) {\n      this._putState(newState);\n      this.emit('update', newState);\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(partialState) {\n      // if non-null object, merge\n      if (partialState && typeof partialState === 'object') {\n        var state = this.getState();\n        this.putState(Object.assign(Object.assign({}, state), partialState));\n        // if not object, use new value\n      } else {\n        this.putState(partialState);\n      }\n    }\n    // subscribe to changes\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(handler) {\n      this.on('update', handler);\n    }\n    // unsubscribe to changes\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(handler) {\n      this.removeListener('update', handler);\n    }\n    //\n    // private\n    //\n    // read from persistence\n  }, {\n    key: \"_getState\",\n    value: function _getState() {\n      return this._state;\n    }\n    // write to persistence\n  }, {\n    key: \"_putState\",\n    value: function _putState(newState) {\n      this._state = newState;\n    }\n  }]);\n  return ObservableStore;\n}(safe_event_emitter_1.default);\nexports.ObservableStore = ObservableStore;","map":{"version":3,"sources":["../src/ObservableStore.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,IAAA,oBAAA,GAAA,eAAA,CAAA,OAAA,CAAA,8BAAA,CAAA,CAAA;AAA4D,IAE/C,eAAmB,0BAAA,oBAAA;EAAA,SAAA,CAAA,eAAA,EAAA,oBAAA;EAAA,IAAA,MAAA,GAAA,YAAA,CAAA,eAAA;EAG9B,SAAA,gBAAY,SAAY,EAAA;IAAA,IAAA,KAAA;IAAA,eAAA,OAAA,eAAA;IACtB,KAAA,GAAA,MAAA,CAAA,IAAA;IACA,IAAI,SAAS,EAAE;MACb,KAAA,CAAK,MAAM,GAAG,SAAS;KACxB,MAAM;MACL;MACA,KAAA,CAAK,MAAM,GAAG,CAAA,CAAkB;;IACjC,OAAA,KAAA;EACH;EAEA;EAAA,YAAA,CAAA,eAAA;IAAA,GAAA;IAAA,KAAA,EACA,SAAA,SAAA,EAAQ;MACN,OAAO,IAAI,CAAC,SAAS,EAAE;IACzB;IAEA;EAAA;IAAA,GAAA;IAAA,KAAA,EACA,SAAA,SAAS,QAAW,EAAA;MAClB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC;MACxB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC;IAC/B;EAAC;IAAA,GAAA;IAAA,KAAA,EAED,SAAA,YAAY,YAAwB,EAAA;MAClC;MACA,IAAI,YAAY,IAAI,OAAO,YAAY,KAAK,QAAQ,EAAE;QACpD,IAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE;QAC7B,IAAI,CAAC,QAAQ,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,CAAA,CAAA,EAAM,KAAK,CAAA,EAAK,YAAY,CAAA,CAAG;QAC5C;OACD,MAAM;QACL,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC;MAC5B;IACH;IAEA;EAAA;IAAA,GAAA;IAAA,KAAA,EACA,SAAA,UAAU,OAA2B,EAAA;MACnC,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,OAAO,CAAC;IAC5B;IAEA;EAAA;IAAA,GAAA;IAAA,KAAA,EACA,SAAA,YAAY,OAA2B,EAAA;MACrC,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,OAAO,CAAC;IACxC;IAEA;IACA;IACA;IAEA;EAAA;IAAA,GAAA;IAAA,KAAA,EACU,SAAA,UAAA,EAAS;MACjB,OAAO,IAAI,CAAC,MAAM;IACpB;IAEA;EAAA;IAAA,GAAA;IAAA,KAAA,EACU,SAAA,UAAU,QAAW,EAAA;MAC7B,IAAI,CAAC,MAAM,GAAG,QAAQ;IACxB;EAAC;EAAA,OAAA,eAAA;AAAA,EAzDqC,oBAAA,CAAA,OAAgB;AAAxD,OAAA,CAAA,eAAA,GAAA,eAAA","sourcesContent":["import SafeEventEmitter from '@metamask/safe-event-emitter';\n\nexport class ObservableStore<T> extends SafeEventEmitter {\n  private _state: T;\n\n  constructor(initState: T) {\n    super();\n    if (initState) {\n      this._state = initState;\n    } else {\n      // Typecast/default state: Preserve existing behavior\n      this._state = {} as unknown as T;\n    }\n  }\n\n  // wrapper around internal getState\n  getState(): T {\n    return this._getState();\n  }\n\n  // wrapper around internal putState\n  putState(newState: T): void {\n    this._putState(newState);\n    this.emit('update', newState);\n  }\n\n  updateState(partialState: Partial<T>): void {\n    // if non-null object, merge\n    if (partialState && typeof partialState === 'object') {\n      const state = this.getState();\n      this.putState({ ...state, ...partialState });\n      // if not object, use new value\n    } else {\n      this.putState(partialState);\n    }\n  }\n\n  // subscribe to changes\n  subscribe(handler: (state: T) => void): void {\n    this.on('update', handler);\n  }\n\n  // unsubscribe to changes\n  unsubscribe(handler: (state: T) => void): void {\n    this.removeListener('update', handler);\n  }\n\n  //\n  // private\n  //\n\n  // read from persistence\n  protected _getState(): T {\n    return this._state;\n  }\n\n  // write to persistence\n  protected _putState(newState: T): void {\n    this._state = newState;\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}