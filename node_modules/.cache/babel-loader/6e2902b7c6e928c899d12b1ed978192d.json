{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar ethUtil = require(\"ethereumjs-util\");\nvar constants_1 = require(\"../../utils/constants\");\nvar calldata_block_1 = require(\"../calldata_block\");\nvar PointerCalldataBlock = /** @class */function (_super) {\n  __extends(PointerCalldataBlock, _super);\n  function PointerCalldataBlock(name, signature, parentName, dependency, parent) {\n    var _this = this;\n    var headerSizeInBytes = PointerCalldataBlock._EMPTY_HEADER_SIZE;\n    var bodySizeInBytes = PointerCalldataBlock._DEPENDENT_PAYLOAD_SIZE_IN_BYTES;\n    _this = _super.call(this, name, signature, parentName, headerSizeInBytes, bodySizeInBytes) || this;\n    _this._parent = parent;\n    _this._dependency = dependency;\n    _this._aliasFor = undefined;\n    return _this;\n  }\n  PointerCalldataBlock.prototype.toBuffer = function () {\n    var destinationOffset = this._aliasFor !== undefined ? this._aliasFor.getOffsetInBytes() : this._dependency.getOffsetInBytes();\n    var parentOffset = this._parent.getOffsetInBytes();\n    var parentHeaderSize = this._parent.getHeaderSizeInBytes();\n    var pointer = destinationOffset - (parentOffset + parentHeaderSize);\n    var pointerHex = \"0x\" + pointer.toString(constants_1.constants.HEX_BASE);\n    var pointerBuf = ethUtil.toBuffer(pointerHex);\n    var pointerBufPadded = ethUtil.setLengthLeft(pointerBuf, constants_1.constants.EVM_WORD_WIDTH_IN_BYTES);\n    return pointerBufPadded;\n  };\n  PointerCalldataBlock.prototype.getDependency = function () {\n    return this._dependency;\n  };\n  PointerCalldataBlock.prototype.setAlias = function (block) {\n    this._aliasFor = block;\n    this._setName(this.getName() + \" (alias for \" + block.getName() + \")\");\n  };\n  PointerCalldataBlock.prototype.getAlias = function () {\n    return this._aliasFor;\n  };\n  PointerCalldataBlock.prototype.getRawData = function () {\n    var dependencyRawData = this._dependency.getRawData();\n    var rawDataComponents = [];\n    rawDataComponents.push(PointerCalldataBlock.RAW_DATA_START);\n    rawDataComponents.push(dependencyRawData);\n    rawDataComponents.push(PointerCalldataBlock.RAW_DATA_END);\n    var rawData = Buffer.concat(rawDataComponents);\n    return rawData;\n  };\n  PointerCalldataBlock.RAW_DATA_START = new Buffer('<');\n  PointerCalldataBlock.RAW_DATA_END = new Buffer('>');\n  PointerCalldataBlock._DEPENDENT_PAYLOAD_SIZE_IN_BYTES = 32;\n  PointerCalldataBlock._EMPTY_HEADER_SIZE = 0;\n  return PointerCalldataBlock;\n}(calldata_block_1.CalldataBlock);\nexports.PointerCalldataBlock = PointerCalldataBlock;","map":{"version":3,"sources":["../../../../../src/abi_encoder/calldata/blocks/pointer.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ethUtil = require(\"ethereumjs-util\");\nvar constants_1 = require(\"../../utils/constants\");\nvar calldata_block_1 = require(\"../calldata_block\");\nvar PointerCalldataBlock = /** @class */ (function (_super) {\n    __extends(PointerCalldataBlock, _super);\n    function PointerCalldataBlock(name, signature, parentName, dependency, parent) {\n        var _this = this;\n        var headerSizeInBytes = PointerCalldataBlock._EMPTY_HEADER_SIZE;\n        var bodySizeInBytes = PointerCalldataBlock._DEPENDENT_PAYLOAD_SIZE_IN_BYTES;\n        _this = _super.call(this, name, signature, parentName, headerSizeInBytes, bodySizeInBytes) || this;\n        _this._parent = parent;\n        _this._dependency = dependency;\n        _this._aliasFor = undefined;\n        return _this;\n    }\n    PointerCalldataBlock.prototype.toBuffer = function () {\n        var destinationOffset = this._aliasFor !== undefined ? this._aliasFor.getOffsetInBytes() : this._dependency.getOffsetInBytes();\n        var parentOffset = this._parent.getOffsetInBytes();\n        var parentHeaderSize = this._parent.getHeaderSizeInBytes();\n        var pointer = destinationOffset - (parentOffset + parentHeaderSize);\n        var pointerHex = \"0x\" + pointer.toString(constants_1.constants.HEX_BASE);\n        var pointerBuf = ethUtil.toBuffer(pointerHex);\n        var pointerBufPadded = ethUtil.setLengthLeft(pointerBuf, constants_1.constants.EVM_WORD_WIDTH_IN_BYTES);\n        return pointerBufPadded;\n    };\n    PointerCalldataBlock.prototype.getDependency = function () {\n        return this._dependency;\n    };\n    PointerCalldataBlock.prototype.setAlias = function (block) {\n        this._aliasFor = block;\n        this._setName(this.getName() + \" (alias for \" + block.getName() + \")\");\n    };\n    PointerCalldataBlock.prototype.getAlias = function () {\n        return this._aliasFor;\n    };\n    PointerCalldataBlock.prototype.getRawData = function () {\n        var dependencyRawData = this._dependency.getRawData();\n        var rawDataComponents = [];\n        rawDataComponents.push(PointerCalldataBlock.RAW_DATA_START);\n        rawDataComponents.push(dependencyRawData);\n        rawDataComponents.push(PointerCalldataBlock.RAW_DATA_END);\n        var rawData = Buffer.concat(rawDataComponents);\n        return rawData;\n    };\n    PointerCalldataBlock.RAW_DATA_START = new Buffer('<');\n    PointerCalldataBlock.RAW_DATA_END = new Buffer('>');\n    PointerCalldataBlock._DEPENDENT_PAYLOAD_SIZE_IN_BYTES = 32;\n    PointerCalldataBlock._EMPTY_HEADER_SIZE = 0;\n    return PointerCalldataBlock;\n}(calldata_block_1.CalldataBlock));\nexports.PointerCalldataBlock = PointerCalldataBlock;\n//# sourceMappingURL=pointer.js.map"]},"metadata":{},"sourceType":"script"}