{"ast":null,"code":"import _createForOfIteratorHelper from \"C:\\\\Users\\\\Aditya Raj Awasthi\\\\Desktop\\\\bomb-dashboard-final-task\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";\nimport _classCallCheck from \"C:\\\\Users\\\\Aditya Raj Awasthi\\\\Desktop\\\\bomb-dashboard-final-task\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Aditya Raj Awasthi\\\\Desktop\\\\bomb-dashboard-final-task\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Aditya Raj Awasthi\\\\Desktop\\\\bomb-dashboard-final-task\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"C:\\\\Users\\\\Aditya Raj Awasthi\\\\Desktop\\\\bomb-dashboard-final-task\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Aditya Raj Awasthi\\\\Desktop\\\\bomb-dashboard-final-task\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Aditya Raj Awasthi\\\\Desktop\\\\bomb-dashboard-final-task\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\Aditya Raj Awasthi\\\\Desktop\\\\bomb-dashboard-final-task\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Aditya Raj Awasthi\\\\Desktop\\\\bomb-dashboard-final-task\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty2 from \"C:\\\\Users\\\\Aditya Raj Awasthi\\\\Desktop\\\\bomb-dashboard-final-task\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _WALLET_OPENLOGIN_VER, _PROVIDER_SUPPORTED_F, _validCryptoCurrencie, _validCryptoCurrencie2, _validCryptoCurrencie3, _validCryptoCurrencie5, _validCryptoCurrencie6, _validCryptoCurrencie7, _paymentProviders$, _defaultVerifiers;\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, catch: function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nimport _objectWithoutProperties from '@babel/runtime/helpers/objectWithoutProperties';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { get, setAPIKey } from '@toruslabs/http-helpers';\nimport { SafeEventEmitter, ObjectMultiplex, createStreamMiddleware, JRPCEngine, createIdRemapMiddleware, BasePostMessageStream, setupMultiplex } from '@toruslabs/openlogin-jrpc';\nimport deepmerge from 'lodash.merge';\nimport { ObservableStore, storeAsStream } from '@metamask/obs-store';\nimport { ethErrors, EthereumRpcError } from 'eth-rpc-errors';\nimport dequal from 'fast-deep-equal';\nimport { duplex } from 'is-stream';\nimport pump from 'pump';\nimport loglevel from 'loglevel';\nimport createHash from 'create-hash';\nimport { EventEmitter } from 'events';\nvar LOGIN_PROVIDER = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  TWITCH: \"twitch\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\"\n};\nvar WALLET_VERIFIERS = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  TWITCH: \"twitch\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\",\n  EMAIL_PASSWORDLESS: \"torus-auth0-email-passwordless\"\n};\nvar WALLET_OPENLOGIN_VERIFIER_MAP = (_WALLET_OPENLOGIN_VER = {}, _defineProperty2(_WALLET_OPENLOGIN_VER, WALLET_VERIFIERS.GOOGLE, \"tkey-google\"), _defineProperty2(_WALLET_OPENLOGIN_VER, WALLET_VERIFIERS.FACEBOOK, \"tkey-facebook\"), _defineProperty2(_WALLET_OPENLOGIN_VER, WALLET_VERIFIERS.TWITCH, \"tkey-twitch\"), _defineProperty2(_WALLET_OPENLOGIN_VER, WALLET_VERIFIERS.REDDIT, \"tkey-reddit\"), _defineProperty2(_WALLET_OPENLOGIN_VER, WALLET_VERIFIERS.DISCORD, \"tkey-discord\"), _defineProperty2(_WALLET_OPENLOGIN_VER, WALLET_VERIFIERS.EMAIL_PASSWORDLESS, \"tkey-auth0-email-passwordless\"), _WALLET_OPENLOGIN_VER);\nvar PAYMENT_PROVIDER = {\n  MOONPAY: \"moonpay\",\n  WYRE: \"wyre\",\n  RAMPNETWORK: \"rampnetwork\",\n  XANPOOL: \"xanpool\",\n  MERCURYO: \"mercuryo\",\n  TRANSAK: \"transak\",\n  BANXA: \"banxa\"\n};\nvar SUPPORTED_PAYMENT_NETWORK = {\n  MAINNET: \"mainnet\",\n  MATIC: \"matic\",\n  BSC_MAINNET: \"bsc_mainnet\",\n  AVALANCHE_MAINNET: \"avalanche_mainnet\",\n  XDAI: \"xdai\"\n};\nvar TORUS_BUILD_ENV = {\n  PRODUCTION: \"production\",\n  DEVELOPMENT: \"development\",\n  BINANCE: \"binance\",\n  TESTING: \"testing\",\n  LRC: \"lrc\",\n  BETA: \"beta\",\n  BNB: \"bnb\",\n  POLYGON: \"polygon\"\n};\nvar BUTTON_POSITION = {\n  BOTTOM_LEFT: \"bottom-left\",\n  TOP_LEFT: \"top-left\",\n  BOTTOM_RIGHT: \"bottom-right\",\n  TOP_RIGHT: \"top-right\"\n};\n\n/**\n * From https://min-api.cryptocompare.com/data/v2/pair/mapping/fsym?fsym=BTC&extraParams=YourSite\n * GET https://min-api.cryptocompare.com/data/v2/pair/mapping/fsym?fsym=BTC\n * Then map over returned entries, picking tsym\n *\n * Last updated: Date of commit\n */\nvar CRYPTO_COMPARE_CURRENCIES = [\"ETH\", \"USDT\", \"USDC\", \"TUSD\", \"EOSDT\", \"USD\", \"DAI\", \"GUSD\", \"DKKT\", \"PAX\", \"ILS\", \"RUB\", \"BYN\", \"EUR\", \"GBP\", \"JPY\", \"KRW\", \"PLN\", \"MXN\", \"AUD\", \"BRL\", \"CAD\", \"CHF\", \"KPW\", \"LAK\", \"LBP\", \"LKR\", \"XOF\", \"CNHT\", \"DOGE\", \"UAH\", \"TRY\", \"HKD\", \"XJP\", \"SGD\", \"USC\", \"NZD\", \"NGN\", \"RUR\", \"COP\", \"GHS\", \"EGP\", \"IDR\", \"BHD\", \"CRC\", \"PEN\", \"AED\", \"DOP\", \"PKR\", \"HUF\", \"VND\", \"XAR\", \"LTC\", \"RON\", \"OMR\", \"MYR\", \"DKK\", \"UGX\", \"ZMW\", \"SAR\", \"SEK\", \"GEL\", \"RWF\", \"IRR\", \"TZS\", \"CNY\", \"VEF\", \"BDT\", \"HRK\", \"CLP\", \"THB\", \"XAF\", \"ARS\", \"UYU\", \"SZL\", \"KZT\", \"NOK\", \"KES\", \"PAB\", \"INR\", \"CZK\", \"MAD\", \"TWD\", \"PHP\", \"ZAR\", \"BOB\", \"CDF\", \"DASH\", \"VES\", \"ISK\", \"MWK\", \"BAM\", \"TTD\", \"XRP\", \"JOD\", \"RSD\", \"HNL\", \"BGN\", \"GTQ\", \"BWP\", \"XMR\", \"MMK\", \"QAR\", \"AOA\", \"KWD\", \"MUR\", \"WUSD\", \"WEUR\", \"WAVES\", \"WTRY\", \"LRD\", \"LSL\", \"LYD\", \"AWG\", \"MDL\", \"BTO\", \"EURS\", \"CHFT\", \"MKD\", \"MNT\", \"MOP\", \"MRO\", \"MVR\", \"VOLLAR\", \"CKUSD\", \"KHR\", \"VUV\", \"BITCNY\", \"QC\", \"BBD\", \"NAD\", \"NPR\", \"PGK\", \"PYG\", \"BIF\", \"BMD\", \"BND\", \"XLM\", \"BNB\", \"SCR\", \"BAT\", \"CRO\", \"HT\", \"KCS\", \"LEO\", \"LINK\", \"MKR\", \"NPXS\", \"OMG\", \"REP\", \"ZB\", \"ZIL\", \"ZRX\", \"BCH\", \"BZD\", \"CUP\", \"CVE\", \"DJF\", \"DZD\", \"ERN\", \"ETB\", \"FJD\", \"FKP\", \"BUSD\", \"ANCT\", \"ALL\", \"AMD\", \"ANG\", \"CNYX\", \"IQD\", \"UZS\", \"TND\", \"GGP\", \"XAU\", \"KGS\", \"GIP\", \"JMD\", \"ZEC\", \"USDP\", \"BSV\", \"EMC2\", \"SNT\", \"GTO\", \"POWR\", \"EUSD\", \"EURT\", \"BCY\", \"BTS\", \"ATM\", \"BLOCKPAY\", \"ARDR\", \"AMP\", \"B2X\", \"BITGOLD\", \"BITEUR\", \"ATB\", \"BITUSD\", \"AGRS\", \"DFXT\", \"HIKEN\", \"BIX\", \"KNC\", \"EOS\", \"COB\", \"COSS\", \"BMH\", \"NANO\", \"BDG\", \"BNT\", \"XVG\", \"LKK1Y\", \"LKK\", \"USDK\", \"EURN\", \"NZDT\", \"JSE\", \"GMD\", \"GNF\", \"GYD\", \"YER\", \"XPF\", \"HTG\", \"SLL\", \"SOS\", \"WST\", \"SVC\", \"SYP\", \"NEO\", \"KMF\", \"JUMP\", \"AYA\", \"BLAST\", \"WGR\", \"BCN\", \"BTG\", \"URALS\", \"INN\", \"USDQ\", \"CNH\", \"HUSD\", \"BKRW\", \"NZDX\", \"EURX\", \"CADX\", \"USDEX\", \"JPYX\", \"AUDX\", \"VNDC\", \"EON\", \"GBPX\", \"CHFX\", \"USDJ\", \"IDRT\", \"USDS\", \"USDN\", \"BIDR\", \"IDK\", \"BSD\", \"BTN\", \"KYD\", \"NIO\", \"SBD\", \"SDG\", \"SHP\", \"TOP\", \"XCD\", \"XCHF\", \"CNYT\", \"GYEN\", \"ZUSD\", \"GOLD\", \"TRX\", \"TRYB\", \"PLATC\", \"STRAX\", \"UST\", \"GLM\", \"VAI\", \"BRZ\", \"DDRST\", \"XAUT\", \"MIM\"];\n/**\n * currencies supported by the payment provider\n * Last updated: Date of commit\n */\nvar PROVIDER_SUPPORTED_FIAT_CURRENCIES = (_PROVIDER_SUPPORTED_F = {}, _defineProperty2(_PROVIDER_SUPPORTED_F, PAYMENT_PROVIDER.MOONPAY, [\"AUD\", \"BGN\", \"BRL\", \"CAD\", \"CHF\", \"CNY\", \"COP\", \"CZK\", \"DKK\", \"DOP\", \"EGP\", \"EUR\", \"GBP\", \"HKD\", \"HRK\", \"IDR\", \"ILS\", \"JPY\", \"JOD\", \"KES\", \"KRW\", \"KWD\", \"LKR\", \"MAD\", \"MXN\", \"MYR\", \"NGN\", \"NOK\", \"NZD\", \"OMR\", \"PEN\", \"PKR\", \"PLN\", \"RON\", \"RUB\", \"SEK\", \"SGD\", \"THB\", \"TRY\", \"TWD\", \"USD\", \"VND\", \"ZAR\"]), _defineProperty2(_PROVIDER_SUPPORTED_F, PAYMENT_PROVIDER.WYRE, [\"USD\", \"EUR\", \"GBP\", \"AUD\", \"CAD\", \"NZD\", \"ARS\", \"BRL\", \"CHF\", \"CLP\", \"COP\", \"CZK\", \"DKK\", \"HKD\", \"ILS\", \"INR\", \"ISK\", \"JPY\", \"KRW\", \"MXN\", \"MYR\", \"NOK\", \"PHP\", \"PLN\", \"SEK\", \"THB\", \"VND\", \"ZAR\"]), _defineProperty2(_PROVIDER_SUPPORTED_F, PAYMENT_PROVIDER.RAMPNETWORK, [\"USD\", \"EUR\", \"GBP\"]), _defineProperty2(_PROVIDER_SUPPORTED_F, PAYMENT_PROVIDER.XANPOOL, [\"SGD\", \"HKD\", \"THB\", \"PHP\", \"INR\", \"IDR\", \"MYR\", \"AUD\", \"NZD\", \"KRW\"]), _defineProperty2(_PROVIDER_SUPPORTED_F, PAYMENT_PROVIDER.MERCURYO, [\"EUR\", \"USD\", \"GBP\", \"TRY\", \"JPY\", \"BRL\", \"NGN\", \"VND\", \"MXN\", \"KRW\"]), _defineProperty2(_PROVIDER_SUPPORTED_F, PAYMENT_PROVIDER.TRANSAK, [\"ARS\", \"AUD\", \"BBD\", \"BGN\", \"BMD\", \"BRL\", \"CAD\", \"CHF\", \"CLP\", \"CRC\", \"CZK\", \"DKK\", \"DOP\", \"EUR\", \"FJD\", \"FKP\", \"GBP\", \"GIP\", \"HRK\", \"HUF\", \"IDR\", \"ILS\", \"ISK\", \"JMD\", \"JPY\", \"KES\", \"KRW\", \"MDL\", \"MXN\", \"MYR\", \"NOK\", \"NZD\", \"PEN\", \"PHP\", \"PLN\", \"PYG\", \"RON\", \"SEK\", \"SGD\", \"THB\", \"TRY\", \"TZS\", \"USD\", \"ZAR\"]), _defineProperty2(_PROVIDER_SUPPORTED_F, PAYMENT_PROVIDER.BANXA, [\"EUR\", \"GBP\", \"USD\"]), _PROVIDER_SUPPORTED_F);\nvar cryptoCompareCurrenciesSet = new Set(CRYPTO_COMPARE_CURRENCIES);\n/**\n * Fiat currencies that we support\n */\nfunction supportedFiatCurrencies(provider) {\n  var providerSupportedFiatCurrencies = PROVIDER_SUPPORTED_FIAT_CURRENCIES[provider];\n  return providerSupportedFiatCurrencies.filter(function (currency) {\n    return cryptoCompareCurrenciesSet.has(currency);\n  });\n}\nvar paymentProviders$1 = (_paymentProviders$ = {}, _defineProperty2(_paymentProviders$, PAYMENT_PROVIDER.MOONPAY, {\n  line1: \"Credit/ Debit Card/ Apple Pay\",\n  line2: \"4.5% or 5 USD\",\n  line3: \"2,000€/day, 10,000€/mo\",\n  supportPage: \"https://help.moonpay.io/en/\",\n  minOrderValue: 24.99,\n  maxOrderValue: 50000,\n  validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.MOONPAY),\n  validCryptoCurrenciesByChain: (_validCryptoCurrencie = {}, _defineProperty2(_validCryptoCurrencie, SUPPORTED_PAYMENT_NETWORK.MAINNET, [{\n    value: \"aave\",\n    display: \"AAVE\"\n  }, {\n    value: \"bat\",\n    display: \"BAT\"\n  }, {\n    value: \"dai\",\n    display: \"DAI\"\n  }, {\n    value: \"eth\",\n    display: \"ETH\"\n  }, {\n    value: \"mkr\",\n    display: \"MKR\"\n  }, {\n    value: \"matic\",\n    display: \"MATIC\"\n  }, {\n    value: \"usdt\",\n    display: \"USDT\"\n  }, {\n    value: \"usdc\",\n    display: \"USDC\"\n  }]), _defineProperty2(_validCryptoCurrencie, SUPPORTED_PAYMENT_NETWORK.MATIC, [{\n    value: \"eth_polygon\",\n    display: \"ETH\"\n  }, {\n    value: \"matic_polygon\",\n    display: \"MATIC\"\n  }, {\n    value: \"usdc_polygon\",\n    display: \"USDC\"\n  }]), _defineProperty2(_validCryptoCurrencie, SUPPORTED_PAYMENT_NETWORK.BSC_MAINNET, [{\n    value: \"bnb_bsc\",\n    display: \"BNB\"\n  }, {\n    value: \"busd_bsc\",\n    display: \"BUSD\"\n  }]), _defineProperty2(_validCryptoCurrencie, SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET, [{\n    value: \"avax_cchain\",\n    display: \"AVAX\"\n  }]), _validCryptoCurrencie),\n  includeFees: true,\n  api: true,\n  enforceMax: false\n}), _defineProperty2(_paymentProviders$, PAYMENT_PROVIDER.WYRE, {\n  line1: \"Apple Pay/ Debit/ Credit Card\",\n  line2: \"4.9% + 30¢ or 5 USD\",\n  line3: \"$250/day\",\n  supportPage: \"https://support.sendwyre.com/en/\",\n  minOrderValue: 5,\n  maxOrderValue: 500,\n  validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.WYRE),\n  validCryptoCurrenciesByChain: (_validCryptoCurrencie2 = {}, _defineProperty2(_validCryptoCurrencie2, SUPPORTED_PAYMENT_NETWORK.MAINNET, [{\n    value: \"AAVE\",\n    display: \"AAVE\"\n  }, {\n    value: \"BAT\",\n    display: \"BAT\"\n  }, {\n    value: \"BUSD\",\n    display: \"BUSD\"\n  }, {\n    value: \"DAI\",\n    display: \"DAI\"\n  }, {\n    value: \"ETH\",\n    display: \"ETH\"\n  }, {\n    value: \"MKR\",\n    display: \"MKR\"\n  }, {\n    value: \"UNI\",\n    display: \"UNI\"\n  }, {\n    value: \"USDC\",\n    display: \"USDC\"\n  }, {\n    value: \"USDT\",\n    display: \"USDT\"\n  }]), _defineProperty2(_validCryptoCurrencie2, SUPPORTED_PAYMENT_NETWORK.MATIC, [{\n    value: \"MUSDC\",\n    display: \"USDC\"\n  }]), _defineProperty2(_validCryptoCurrencie2, SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET, [{\n    value: \"AVAXC\",\n    display: \"AVAXC\"\n  }]), _validCryptoCurrencie2),\n  includeFees: false,\n  api: true,\n  enforceMax: false\n}), _defineProperty2(_paymentProviders$, PAYMENT_PROVIDER.RAMPNETWORK, {\n  line1: \"Debit Card/ <br>Apple Pay/ Bank transfer\",\n  line2: \"0.49% - 2.9%\",\n  line3: \"5,000€/purchase, 20,000€/mo\",\n  supportPage: \"https://instant.ramp.network/\",\n  minOrderValue: 50,\n  maxOrderValue: 20000,\n  validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.RAMPNETWORK),\n  validCryptoCurrenciesByChain: (_validCryptoCurrencie3 = {}, _defineProperty2(_validCryptoCurrencie3, SUPPORTED_PAYMENT_NETWORK.MAINNET, [{\n    value: \"ETH\",\n    display: \"ETH\"\n  }, {\n    value: \"DAI\",\n    display: \"DAI\"\n  }, {\n    value: \"USDC\",\n    display: \"USDC\"\n  }, {\n    value: \"USDT\",\n    display: \"USDT\"\n  }]), _defineProperty2(_validCryptoCurrencie3, SUPPORTED_PAYMENT_NETWORK.MATIC, [{\n    value: \"MATIC_DAI\",\n    display: \"DAI\"\n  }, {\n    value: \"MATIC_MATIC\",\n    display: \"MATIC\"\n  }, {\n    value: \"MATIC_USDC\",\n    display: \"USDC\"\n  }]), _defineProperty2(_validCryptoCurrencie3, SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET, [{\n    value: \"AVAX\",\n    display: \"AVAX\"\n  }]), _validCryptoCurrencie3),\n  includeFees: true,\n  api: true,\n  receiveHint: \"walletTopUp.receiveHintRamp\",\n  enforceMax: false\n}), _defineProperty2(_paymentProviders$, PAYMENT_PROVIDER.XANPOOL, {\n  line1: \"PayNow/ InstaPay/ FPS/ GoJekPay/ UPI/ PromptPay/ <br>ViettelPay/ DuitNow\",\n  line2: \"2.5% buying, 3% selling\",\n  line3: \"$2,500 / day\",\n  supportPage: \"mailto:support@xanpool.com\",\n  minOrderValue: 100,\n  maxOrderValue: 2500,\n  validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.XANPOOL),\n  validCryptoCurrenciesByChain: _defineProperty2({}, SUPPORTED_PAYMENT_NETWORK.MAINNET, [{\n    value: \"ETH\",\n    display: \"ETH\"\n  }, {\n    value: \"USDT\",\n    display: \"USDT\"\n  }]),\n  includeFees: true,\n  api: true,\n  sell: true,\n  enforceMax: false\n}), _defineProperty2(_paymentProviders$, PAYMENT_PROVIDER.MERCURYO, {\n  line1: \"Credit/ Debit Card/ Apple Pay\",\n  line2: \"3.95% or 4 USD\",\n  line3: \"10,000€/day, 25,000€/mo\",\n  supportPage: \"mailto:support@mercuryo.io\",\n  minOrderValue: 30,\n  maxOrderValue: 5000,\n  validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.MERCURYO),\n  validCryptoCurrenciesByChain: (_validCryptoCurrencie5 = {}, _defineProperty2(_validCryptoCurrencie5, SUPPORTED_PAYMENT_NETWORK.MAINNET, [{\n    value: \"ETH\",\n    display: \"ETH\"\n  }, {\n    value: \"BAT\",\n    display: \"BAT\"\n  }, {\n    value: \"USDT\",\n    display: \"USDT\"\n  }, {\n    value: \"DAI\",\n    display: \"DAI\"\n  }]), _defineProperty2(_validCryptoCurrencie5, SUPPORTED_PAYMENT_NETWORK.BSC_MAINNET, [{\n    value: \"BNB\",\n    display: \"BNB\"\n  }, {\n    value: \"BUSD\",\n    display: \"BUSD\"\n  }, {\n    value: \"1INCH\",\n    display: \"1INCH\"\n  }]), _validCryptoCurrencie5),\n  includeFees: true,\n  api: true,\n  enforceMax: false\n}), _defineProperty2(_paymentProviders$, PAYMENT_PROVIDER.TRANSAK, {\n  line1: \"Apple & Google Pay / Credit/Debit Card<br/>Bangkok Bank Mobile & iPay<br/>Bank Transfer (sepa/gbp) / SCB Mobile & Easy\",\n  line2: \"0.99% - 5.5% or 5 USD\",\n  line3: \"$5,000/day, $28,000/mo\",\n  supportPage: \"https://support.transak.com/hc/en-US\",\n  minOrderValue: 30,\n  maxOrderValue: 500,\n  validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.TRANSAK),\n  validCryptoCurrenciesByChain: (_validCryptoCurrencie6 = {}, _defineProperty2(_validCryptoCurrencie6, SUPPORTED_PAYMENT_NETWORK.MAINNET, [{\n    value: \"AAVE\",\n    display: \"AAVE\"\n  }, {\n    value: \"DAI\",\n    display: \"DAI\"\n  }, {\n    value: \"ETH\",\n    display: \"ETH\"\n  }, {\n    value: \"USDC\",\n    display: \"USDC\"\n  }, {\n    value: \"USDT\",\n    display: \"USDT\"\n  }]), _defineProperty2(_validCryptoCurrencie6, SUPPORTED_PAYMENT_NETWORK.MATIC, [{\n    value: \"AAVE\",\n    display: \"AAVE\"\n  }, {\n    value: \"DAI\",\n    display: \"DAI\"\n  }, {\n    value: \"MATIC\",\n    display: \"MATIC\"\n  }, {\n    value: \"USDC\",\n    display: \"USDC\"\n  }, {\n    value: \"USDT\",\n    display: \"USDT\"\n  }, {\n    value: \"WETH\",\n    display: \"WETH\"\n  }]), _defineProperty2(_validCryptoCurrencie6, SUPPORTED_PAYMENT_NETWORK.BSC_MAINNET, [{\n    value: \"BNB\",\n    display: \"BNB\"\n  }, {\n    value: \"BUSD\",\n    display: \"BUSD\"\n  }]), _defineProperty2(_validCryptoCurrencie6, SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET, [{\n    value: \"AVAX\",\n    display: \"AVAX\"\n  }]), _validCryptoCurrencie6),\n  includeFees: true,\n  enforceMax: true\n}), _defineProperty2(_paymentProviders$, PAYMENT_PROVIDER.BANXA, {\n  line1: \"Debit Card/ <br>Apple Pay/ Bank transfer\",\n  line2: \"0.49% - 2.9%\",\n  line3: \"5,000€/purchase, 20,000€/mo\",\n  supportPage: \"https://support.banxa.com\",\n  minOrderValue: 20,\n  maxOrderValue: 15000,\n  validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.BANXA),\n  validCryptoCurrenciesByChain: (_validCryptoCurrencie7 = {}, _defineProperty2(_validCryptoCurrencie7, SUPPORTED_PAYMENT_NETWORK.MAINNET, [{\n    value: \"ETH\",\n    display: \"ETH\"\n  }, {\n    value: \"USDT\",\n    display: \"USDT\"\n  }, {\n    value: \"BUSD\",\n    display: \"BUSD\"\n  }, {\n    value: \"LINK\",\n    display: \"LINK\"\n  }, {\n    value: \"USDC\",\n    display: \"USDC\"\n  }, {\n    value: \"CHZ\",\n    display: \"CHZ\"\n  }, {\n    value: \"BAT\",\n    display: \"BAT\"\n  }, {\n    value: \"MANA\",\n    display: \"MANA\"\n  }, {\n    value: \"AAVE\",\n    display: \"AAVE\"\n  }, {\n    value: \"COMP\",\n    display: \"COMP\"\n  }, {\n    value: \"ENJ\",\n    display: \"ENJ\"\n  }]), _defineProperty2(_validCryptoCurrencie7, SUPPORTED_PAYMENT_NETWORK.MATIC, [{\n    value: \"MATIC\",\n    display: \"MATIC\"\n  }]), _validCryptoCurrencie7),\n  includeFees: true,\n  enforceMax: true\n}), _paymentProviders$);\nvar translations = {\n  en: {\n    embed: {\n      continue: \"Continue\",\n      actionRequired: \"Authorization required\",\n      pendingAction: \"Click continue to proceed with your request in a popup\",\n      cookiesRequired: \"Cookies Required\",\n      enableCookies: \"Please enable cookies in your browser preferences to access Torus\",\n      clickHere: \"More Info\"\n    }\n  },\n  de: {\n    embed: {\n      continue: \"Fortsetzen\",\n      actionRequired: \"Autorisierung erforderlich\",\n      pendingAction: \"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren\",\n      cookiesRequired: \"Cookies benötigt\",\n      enableCookies: \"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen\",\n      clickHere: \"Mehr Info\"\n    }\n  },\n  ja: {\n    embed: {\n      continue: \"継続する\",\n      actionRequired: \"認証が必要です\",\n      pendingAction: \"続行をクリックして、ポップアップでリクエストを続行します\",\n      cookiesRequired: \"必要なクッキー\",\n      enableCookies: \"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。\",\n      clickHere: \"詳しくは\"\n    }\n  },\n  ko: {\n    embed: {\n      continue: \"계속하다\",\n      actionRequired: \"승인 필요\",\n      pendingAction: \"팝업에서 요청을 진행하려면 계속을 클릭하십시오.\",\n      cookiesRequired: \"쿠키 필요\",\n      enableCookies: \"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.\",\n      clickHere: \"더 많은 정보\"\n    }\n  },\n  zh: {\n    embed: {\n      continue: \"继续\",\n      actionRequired: \"需要授权\",\n      pendingAction: \"单击继续以在弹出窗口中继续您的请求\",\n      cookiesRequired: \"必填Cookie\",\n      enableCookies: \"请在您的浏览器首选项中启用cookie以访问Torus。\",\n      clickHere: \"更多信息\"\n    }\n  }\n};\nvar configuration = {\n  supportedVerifierList: Object.values(WALLET_VERIFIERS),\n  paymentProviders: paymentProviders$1,\n  api: \"https://api.tor.us\",\n  translations: translations,\n  prodTorusUrl: \"\",\n  localStorageKeyPrefix: \"torus-\"\n};\nvar runOnLoad = function runOnLoad(fn) {\n  return new Promise(function (resolve, reject) {\n    if (window.document.body != null) {\n      Promise.resolve(fn()).then(resolve).catch(reject);\n    } else {\n      window.document.addEventListener(\"DOMContentLoaded\", function () {\n        Promise.resolve(fn()).then(resolve).catch(reject);\n      });\n    }\n  });\n};\nvar htmlToElement = function htmlToElement(html) {\n  var template = window.document.createElement(\"template\");\n  var trimmedHtml = html.trim(); // Never return a text node of whitespace as the result\n  template.innerHTML = trimmedHtml;\n  return template.content.firstChild;\n};\nvar handleEvent = function handleEvent(handle, eventName, handler) {\n  for (var _len = arguments.length, handlerArgs = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    handlerArgs[_key - 3] = arguments[_key];\n  }\n  var handlerWrapper = function handlerWrapper() {\n    handler.apply(void 0, handlerArgs);\n    handle.removeEventListener(eventName, handlerWrapper);\n  };\n  handle.addEventListener(eventName, handlerWrapper);\n};\nvar handleStream = function handleStream(handle, eventName, handler) {\n  var handlerWrapper = function handlerWrapper(chunk) {\n    handler(chunk);\n    handle.removeListener(eventName, handlerWrapper);\n  };\n  handle.on(eventName, handlerWrapper);\n};\nfunction documentReady() {\n  return _documentReady.apply(this, arguments);\n}\nfunction _documentReady() {\n  _documentReady = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13() {\n    return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n      while (1) switch (_context13.prev = _context13.next) {\n        case 0:\n          return _context13.abrupt(\"return\", new Promise(function (resolve) {\n            if (document.readyState !== \"loading\") {\n              resolve();\n            } else {\n              handleEvent(document, \"DOMContentLoaded\", resolve);\n            }\n          }));\n        case 1:\n        case \"end\":\n          return _context13.stop();\n      }\n    }, _callee13);\n  }));\n  return _documentReady.apply(this, arguments);\n}\nvar log = loglevel.getLogger(\"torus-embed\");\nvar messages = {\n  errors: {\n    disconnected: function disconnected() {\n      return \"Torus: Lost connection to Torus.\";\n    },\n    permanentlyDisconnected: function permanentlyDisconnected() {\n      return \"Torus: Disconnected from iframe. Page reload required.\";\n    },\n    sendSiteMetadata: function sendSiteMetadata() {\n      return \"Torus: Failed to send site metadata. This is an internal error, please report this bug.\";\n    },\n    unsupportedSync: function unsupportedSync(method) {\n      return \"Torus: The Torus Ethereum provider does not support synchronous methods like \".concat(method, \" without a callback parameter.\");\n    },\n    invalidDuplexStream: function invalidDuplexStream() {\n      return \"Must provide a Node.js-style duplex stream.\";\n    },\n    invalidOptions: function invalidOptions(maxEventListeners, shouldSendMetadata) {\n      return \"Invalid options. Received: { maxEventListeners: \".concat(maxEventListeners, \", shouldSendMetadata: \").concat(shouldSendMetadata, \" }\");\n    },\n    invalidRequestArgs: function invalidRequestArgs() {\n      return \"Expected a single, non-array, object argument.\";\n    },\n    invalidRequestMethod: function invalidRequestMethod() {\n      return \"'args.method' must be a non-empty string.\";\n    },\n    invalidRequestParams: function invalidRequestParams() {\n      return \"'args.params' must be an object or array if provided.\";\n    },\n    invalidLoggerObject: function invalidLoggerObject() {\n      return \"'args.logger' must be an object if provided.\";\n    },\n    invalidLoggerMethod: function invalidLoggerMethod(method) {\n      return \"'args.logger' must include required method '\".concat(method, \"'.\");\n    }\n  },\n  info: {\n    connected: function connected(chainId) {\n      return \"Torus: Connected to chain with ID \\\"\".concat(chainId, \"\\\".\");\n    }\n  },\n  warnings: {\n    // deprecated methods\n    enableDeprecation: 'Torus: \"\"ethereum.enable()\" is deprecated and may be removed in the future. ' + 'Please use \"ethereum.send(\"eth_requestAccounts\")\" instead. For more information, see: https://eips.ethereum.org/EIPS/eip-1102',\n    sendDeprecation: 'Torus: \"ethereum.send(...)\" is deprecated and may be removed in the future.' + ' Please use \"ethereum.sendAsync(...)\" or \"ethereum.request(...)\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',\n    events: {\n      close: 'Torus: The event \"close\" is deprecated and may be removed in the future. Please use \"disconnect\" instead.' + \"\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193\",\n      data: 'Torus: The event \"data\" is deprecated and will be removed in the future.' + 'Use \"message\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message',\n      networkChanged: 'Torus: The event \"networkChanged\" is deprecated and may be removed in the future.' + ' Please use \"chainChanged\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',\n      notification: 'Torus: The event \"notification\" is deprecated and may be removed in the future. ' + 'Please use \"message\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193'\n    },\n    publicConfigStore: 'Torus: The property \"publicConfigStore\" is deprecated and WILL be removed in the future.'\n  }\n};\nvar paymentProviders = configuration.paymentProviders;\nvar validatePaymentProvider = function validatePaymentProvider(provider, params) {\n  var errors = {};\n  if (!provider) {\n    return {\n      errors: errors,\n      isValid: true\n    };\n  }\n  if (provider && !paymentProviders[provider]) {\n    errors.provider = \"Invalid Provider\";\n    return {\n      errors: errors,\n      isValid: Object.keys(errors).length === 0\n    };\n  }\n  var selectedProvider = paymentProviders[provider];\n  var selectedParams = params || {};\n  // set default values\n  // if (!selectedParams.selectedCurrency) [selectedParams.selectedCurrency] = selectedProvider.validCurrencies\n  // if (!selectedParams.fiatValue) selectedParams.fiatValue = selectedProvider.minOrderValue\n  // if (!selectedParams.selectedCryptoCurrency) [selectedParams.selectedCryptoCurrency] = selectedProvider.validCryptoCurrencies\n  // validations\n  if (selectedParams.fiatValue) {\n    var requestedOrderAmount = +parseFloat(selectedParams.fiatValue.toString()) || 0;\n    if (requestedOrderAmount < selectedProvider.minOrderValue) errors.fiatValue = \"Requested amount is lower than supported\";\n    if (requestedOrderAmount > selectedProvider.maxOrderValue && selectedProvider.enforceMax) errors.fiatValue = \"Requested amount is higher than supported\";\n  }\n  if (selectedParams.selectedCurrency && !selectedProvider.validCurrencies.includes(selectedParams.selectedCurrency)) {\n    errors.selectedCurrency = \"Unsupported currency\";\n  }\n  if (selectedParams.selectedCryptoCurrency) {\n    var validCryptoCurrenciesByChain = Object.values(selectedProvider.validCryptoCurrenciesByChain).flat().map(function (currency) {\n      return currency.value;\n    });\n    var finalCryptoCurrency = provider === PAYMENT_PROVIDER.MOONPAY ? selectedParams.selectedCryptoCurrency.toLowerCase() : selectedParams.selectedCryptoCurrency;\n    if (validCryptoCurrenciesByChain && !validCryptoCurrenciesByChain.includes(finalCryptoCurrency)) errors.selectedCryptoCurrency = \"Unsupported cryptoCurrency\";\n  }\n  return {\n    errors: errors,\n    isValid: Object.keys(errors).length === 0\n  };\n};\n// utility functions\n/**\n * json-rpc-engine middleware that logs RPC errors and and validates req.method.\n *\n * @param log - The logging API to use.\n * @returns  json-rpc-engine middleware function\n */\nfunction createErrorMiddleware() {\n  return function (req, res, next) {\n    // json-rpc-engine will terminate the request when it notices this error\n    if (typeof req.method !== \"string\" || !req.method) {\n      res.error = ethErrors.rpc.invalidRequest({\n        message: \"The request 'method' must be a non-empty string.\",\n        data: req\n      });\n    }\n    next(function (done) {\n      var error = res.error;\n      if (!error) {\n        return done();\n      }\n      log.error(\"MetaMask - RPC Error: \".concat(error.message), error);\n      return done();\n    });\n  };\n}\n/**\n * Logs a stream disconnection error. Emits an 'error' if given an\n * EventEmitter that has listeners for the 'error' event.\n *\n * @param log - The logging API to use.\n * @param remoteLabel - The label of the disconnected stream.\n * @param error - The associated error to log.\n * @param emitter - The logging API to use.\n */\nfunction logStreamDisconnectWarning(remoteLabel, error, emitter) {\n  var warningMsg = \"MetaMask: Lost connection to \\\"\".concat(remoteLabel, \"\\\".\");\n  if (error !== null && error !== void 0 && error.stack) {\n    warningMsg += \"\\n\".concat(error.stack);\n  }\n  log.warn(warningMsg);\n  if (emitter && emitter.listenerCount(\"error\") > 0) {\n    emitter.emit(\"error\", warningMsg);\n  }\n}\nvar getPreopenInstanceId = function getPreopenInstanceId() {\n  return Math.random().toString(36).slice(2);\n};\nvar getTorusUrl = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(buildEnv, integrity) {\n    var torusUrl, logLevel, version, versionUsed, response;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          // Do not change this line\n          version = \"1.41.1\";\n          versionUsed = integrity.version || version;\n          _context.prev = 2;\n          if (!((buildEnv === \"binance\" || buildEnv === \"production\") && !integrity.version)) {\n            _context.next = 13;\n            break;\n          }\n          if (configuration.prodTorusUrl) {\n            _context.next = 10;\n            break;\n          }\n          _context.next = 7;\n          return get(\"\".concat(configuration.api, \"/latestversion?name=@toruslabs/torus-embed&version=\").concat(version), {}, {\n            useAPIKey: true\n          });\n        case 7:\n          response = _context.sent;\n          _context.next = 11;\n          break;\n        case 10:\n          response = {\n            data: configuration.prodTorusUrl\n          };\n        case 11:\n          versionUsed = response.data;\n          // eslint-disable-next-line require-atomic-updates\n          configuration.prodTorusUrl = response.data;\n        case 13:\n          _context.next = 18;\n          break;\n        case 15:\n          _context.prev = 15;\n          _context.t0 = _context[\"catch\"](2);\n          log.error(_context.t0, \"unable to fetch latest version\");\n        case 18:\n          log.info(\"version used: \", versionUsed);\n          _context.t1 = buildEnv;\n          _context.next = _context.t1 === \"binance\" ? 22 : _context.t1 === \"testing\" ? 25 : _context.t1 === \"bnb\" ? 28 : _context.t1 === \"polygon\" ? 31 : _context.t1 === \"lrc\" ? 34 : _context.t1 === \"beta\" ? 37 : _context.t1 === \"development\" ? 40 : 43;\n          break;\n        case 22:\n          torusUrl = \"https://binance.tor.us/v\".concat(versionUsed);\n          logLevel = \"info\";\n          return _context.abrupt(\"break\", 46);\n        case 25:\n          torusUrl = \"https://testing.tor.us\";\n          logLevel = \"debug\";\n          return _context.abrupt(\"break\", 46);\n        case 28:\n          torusUrl = \"https://bnb.tor.us\";\n          logLevel = \"error\";\n          return _context.abrupt(\"break\", 46);\n        case 31:\n          torusUrl = \"https://polygon.tor.us\";\n          logLevel = \"error\";\n          return _context.abrupt(\"break\", 46);\n        case 34:\n          torusUrl = \"https://lrc.tor.us\";\n          logLevel = \"debug\";\n          return _context.abrupt(\"break\", 46);\n        case 37:\n          torusUrl = \"https://beta.tor.us\";\n          logLevel = \"debug\";\n          return _context.abrupt(\"break\", 46);\n        case 40:\n          torusUrl = \"http://localhost:4050\";\n          logLevel = \"debug\";\n          return _context.abrupt(\"break\", 46);\n        case 43:\n          torusUrl = \"https://app.tor.us/v\".concat(versionUsed);\n          logLevel = \"error\";\n          return _context.abrupt(\"break\", 46);\n        case 46:\n          return _context.abrupt(\"return\", {\n            torusUrl: torusUrl,\n            logLevel: logLevel\n          });\n        case 47:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[2, 15]]);\n  }));\n  return function getTorusUrl(_x, _x2) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar getUserLanguage = function getUserLanguage() {\n  var userLanguage = window.navigator.language || \"en-US\";\n  var userLanguages = userLanguage.split(\"-\");\n  userLanguage = Object.prototype.hasOwnProperty.call(configuration.translations, userLanguages[0]) ? userLanguages[0] : \"en\";\n  return userLanguage;\n};\nvar EMITTED_NOTIFICATIONS = [\"eth_subscription\" // per eth-json-rpc-filters/subscriptionManager\n];\n\nvar NOOP = function NOOP() {\n  // empty function\n};\nvar FEATURES_PROVIDER_CHANGE_WINDOW = \"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=660,width=375\";\nvar FEATURES_DEFAULT_WALLET_WINDOW = \"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=740,width=1315\";\nvar FEATURES_CONFIRM_WINDOW = \"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=450\";\nfunction getPopupFeatures() {\n  // Fixes dual-screen position                             Most browsers      Firefox\n  var dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n  var dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n  var w = 1200;\n  var h = 700;\n  var width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : window.screen.width;\n  var height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : window.screen.height;\n  var systemZoom = 1; // No reliable estimate\n  var left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n  var top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n  var features = \"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=\".concat(h / systemZoom, \",width=\").concat(w / systemZoom, \",top=\").concat(top, \",left=\").concat(left);\n  return features;\n}\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nSafeEventEmitter.defaultMaxListeners = 100;\n// resolve response.result, reject errors\nvar getRpcPromiseCallback = function getRpcPromiseCallback(resolve, reject) {\n  var unwrapResult = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  return function (error, response) {\n    if (error || response.error) {\n      return reject(error || response.error);\n    }\n    return !unwrapResult || Array.isArray(response) ? resolve(response) : resolve(response.result);\n  };\n};\nvar TorusInpageProvider = /*#__PURE__*/function (_SafeEventEmitter) {\n  _inherits(TorusInpageProvider, _SafeEventEmitter);\n  var _super = _createSuper(TorusInpageProvider);\n  /**\n   * The chain ID of the currently connected Ethereum chain.\n   * See [chainId.network]{@link https://chainid.network} for more information.\n   */\n\n  /**\n   * The user's currently selected Ethereum address.\n   * If null, MetaMask is either locked or the user has not permitted any\n   * addresses to be viewed.\n   */\n\n  /**\n   * Indicating that this provider is a MetaMask provider.\n   */\n\n  function TorusInpageProvider(connectionStream) {\n    var _this;\n    _classCallCheck(this, TorusInpageProvider);\n    var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref5$maxEventListene = _ref5.maxEventListeners,\n      maxEventListeners = _ref5$maxEventListene === void 0 ? 100 : _ref5$maxEventListene,\n      _ref5$shouldSendMetad = _ref5.shouldSendMetadata,\n      shouldSendMetadata = _ref5$shouldSendMetad === void 0 ? true : _ref5$shouldSendMetad,\n      _ref5$jsonRpcStreamNa = _ref5.jsonRpcStreamName,\n      jsonRpcStreamName = _ref5$jsonRpcStreamNa === void 0 ? \"provider\" : _ref5$jsonRpcStreamNa;\n    _this = _super.call(this);\n    _defineProperty(_assertThisInitialized(_this), \"chainId\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"selectedAddress\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_rpcEngine\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"networkVersion\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"shouldSendMetadata\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"isTorus\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_publicConfigStore\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"tryPreopenHandle\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"enable\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_state\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_jsonRpcConnection\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_sentWarnings\", {\n      // methods\n      enable: false,\n      experimentalMethods: false,\n      send: false,\n      publicConfigStore: false,\n      // events\n      events: {\n        close: false,\n        data: false,\n        networkChanged: false,\n        notification: false\n      }\n    });\n    if (!duplex(connectionStream)) {\n      throw new Error(messages.errors.invalidDuplexStream());\n    }\n    _this.isTorus = true;\n    _this.setMaxListeners(maxEventListeners);\n    // private state\n    _this._state = _objectSpread$1({}, TorusInpageProvider._defaultState);\n    // public state\n    _this.selectedAddress = null;\n    _this.networkVersion = null;\n    _this.chainId = null;\n    _this.shouldSendMetadata = shouldSendMetadata;\n    // bind functions (to prevent e.g. web3@1.x from making unbound calls)\n    _this._handleAccountsChanged = _this._handleAccountsChanged.bind(_assertThisInitialized(_this));\n    _this._handleChainChanged = _this._handleChainChanged.bind(_assertThisInitialized(_this));\n    _this._handleUnlockStateChanged = _this._handleUnlockStateChanged.bind(_assertThisInitialized(_this));\n    _this._handleConnect = _this._handleConnect.bind(_assertThisInitialized(_this));\n    _this._handleDisconnect = _this._handleDisconnect.bind(_assertThisInitialized(_this));\n    _this._handleStreamDisconnect = _this._handleStreamDisconnect.bind(_assertThisInitialized(_this));\n    _this._sendSync = _this._sendSync.bind(_assertThisInitialized(_this));\n    _this._rpcRequest = _this._rpcRequest.bind(_assertThisInitialized(_this));\n    _this._warnOfDeprecation = _this._warnOfDeprecation.bind(_assertThisInitialized(_this));\n    _this._initializeState = _this._initializeState.bind(_assertThisInitialized(_this));\n    _this.request = _this.request.bind(_assertThisInitialized(_this));\n    _this.send = _this.send.bind(_assertThisInitialized(_this));\n    _this.sendAsync = _this.sendAsync.bind(_assertThisInitialized(_this));\n    // this.enable = this.enable.bind(this);\n    // setup connectionStream multiplexing\n    var mux = new ObjectMultiplex();\n    pump(connectionStream, mux, connectionStream, _this._handleStreamDisconnect.bind(_assertThisInitialized(_this), \"MetaMask\"));\n    // subscribe to metamask public config (one-way)\n    _this._publicConfigStore = new ObservableStore({\n      storageKey: \"Metamask-Config\"\n    });\n    // handle isUnlocked changes, and chainChanged and networkChanged events\n    // this._publicConfigStore.subscribe((stringifiedState) => {\n    //   // This is because we are using store as string\n    //   const state = JSON.parse(stringifiedState as unknown as string);\n    //   if (\"isUnlocked\" in state && state.isUnlocked !== this._state.isUnlocked) {\n    //     this._state.isUnlocked = state.isUnlocked;\n    //     if (!this._state.isUnlocked) {\n    //       // accounts are never exposed when the extension is locked\n    //       this._handleAccountsChanged([]);\n    //     } else {\n    //       // this will get the exposed accounts, if any\n    //       try {\n    //         this._rpcRequest(\n    //           { method: \"eth_accounts\", params: [] },\n    //           NOOP,\n    //           true // indicating that eth_accounts _should_ update accounts\n    //         );\n    //       } catch (_) {\n    //         // Swallow error\n    //       }\n    //     }\n    //   }\n    //   if (\"selectedAddress\" in state && this.selectedAddress !== state.selectedAddress) {\n    //     try {\n    //       this._rpcRequest(\n    //         { method: \"eth_accounts\", params: [] },\n    //         NOOP,\n    //         true // indicating that eth_accounts _should_ update accounts\n    //       );\n    //     } catch (_) {\n    //       // Swallow error\n    //     }\n    //   }\n    //   // Emit chainChanged event on chain change\n    //   if (\"chainId\" in state && state.chainId !== this.chainId) {\n    //     this.chainId = state.chainId || null;\n    //     this.emit(\"chainChanged\", this.chainId);\n    //     // indicate that we've connected, for EIP-1193 compliance\n    //     // we do this here so that iframe can initialize\n    //     if (!this._state.hasEmittedConnection) {\n    //       this._handleConnect(this.chainId);\n    //       this._state.hasEmittedConnection = true;\n    //     }\n    //   }\n    //   // Emit networkChanged event on network change\n    //   if (\"networkVersion\" in state && state.networkVersion !== this.networkVersion) {\n    //     this.networkVersion = state.networkVersion || null;\n    //     this.emit(\"networkChanged\", this.networkVersion);\n    //   }\n    // });\n    pump(mux.createStream(\"publicConfig\"), storeAsStream(_this._publicConfigStore),\n    // RPC requests should still work if only this stream fails\n    logStreamDisconnectWarning.bind(_assertThisInitialized(_this), \"MetaMask PublicConfigStore\"));\n    // ignore phishing warning message (handled elsewhere)\n    mux.ignoreStream(\"phishing\");\n    // setup own event listeners\n    // EIP-1193 connect\n    _this.on(\"connect\", function () {\n      _this._state.isConnected = true;\n    });\n    // connect to async provider\n    var jsonRpcConnection = createStreamMiddleware();\n    pump(jsonRpcConnection.stream, mux.createStream(jsonRpcStreamName), jsonRpcConnection.stream, _this._handleStreamDisconnect.bind(_assertThisInitialized(_this), \"MetaMask RpcProvider\"));\n    // handle RPC requests via dapp-side rpc engine\n    var rpcEngine = new JRPCEngine();\n    rpcEngine.push(createIdRemapMiddleware());\n    rpcEngine.push(createErrorMiddleware());\n    rpcEngine.push(jsonRpcConnection.middleware);\n    _this._rpcEngine = rpcEngine;\n    // json rpc notification listener\n    jsonRpcConnection.events.on(\"notification\", function (payload) {\n      var method = payload.method,\n        params = payload.params;\n      if (method === \"wallet_accountsChanged\") {\n        _this._handleAccountsChanged(params);\n      } else if (method === \"wallet_unlockStateChanged\") {\n        _this._handleUnlockStateChanged(params);\n      } else if (method === \"wallet_chainChanged\") {\n        _this._handleChainChanged(params);\n      } else if (EMITTED_NOTIFICATIONS.includes(payload.method)) {\n        // EIP 1193 subscriptions, per eth-json-rpc-filters/subscriptionManager\n        _this.emit(\"data\", payload); // deprecated\n        _this.emit(\"notification\", params.result);\n        _this.emit(\"message\", {\n          type: method,\n          data: params\n        });\n      }\n      // Backward compatibility for older non EIP 1193 subscriptions\n      // this.emit('data', null, payload)\n    });\n    return _this;\n  }\n  _createClass(TorusInpageProvider, [{\n    key: \"publicConfigStore\",\n    get: function get() {\n      if (!this._sentWarnings.publicConfigStore) {\n        log.warn(messages.warnings.publicConfigStore);\n        this._sentWarnings.publicConfigStore = true;\n      }\n      return this._publicConfigStore;\n    }\n    /**\n     * Returns whether the inpage provider is connected to Torus.\n     */\n  }, {\n    key: \"isConnected\",\n    value: function isConnected() {\n      return this._state.isConnected;\n    }\n    /**\n     * Submits an RPC request for the given method, with the given params.\n     * Resolves with the result of the method call, or rejects on error.\n     *\n     * @param args - The RPC request arguments.\n     * @returns A Promise that resolves with the result of the RPC method,\n     * or rejects if an error is encountered.\n     */\n  }, {\n    key: \"request\",\n    value: function () {\n      var _request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(args) {\n        var _this2 = this;\n        var method, params;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(!args || typeof args !== \"object\" || Array.isArray(args))) {\n                _context2.next = 2;\n                break;\n              }\n              throw ethErrors.rpc.invalidRequest({\n                message: messages.errors.invalidRequestArgs(),\n                data: args\n              });\n            case 2:\n              method = args.method, params = args.params;\n              if (!(typeof method !== \"string\" || method.length === 0)) {\n                _context2.next = 5;\n                break;\n              }\n              throw ethErrors.rpc.invalidRequest({\n                message: messages.errors.invalidRequestMethod(),\n                data: args\n              });\n            case 5:\n              if (!(params !== undefined && !Array.isArray(params) && (typeof params !== \"object\" || params === null))) {\n                _context2.next = 7;\n                break;\n              }\n              throw ethErrors.rpc.invalidRequest({\n                message: messages.errors.invalidRequestParams(),\n                data: args\n              });\n            case 7:\n              return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n                _this2._rpcRequest({\n                  method: method,\n                  params: params\n                }, getRpcPromiseCallback(resolve, reject));\n              }));\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      function request(_x3) {\n        return _request.apply(this, arguments);\n      }\n      return request;\n    }()\n    /**\n     * Submits an RPC request per the given JSON-RPC request object.\n     *\n     * @param payload - The RPC request object.\n     * @param cb - The callback function.\n     */\n  }, {\n    key: \"sendAsync\",\n    value: function sendAsync(payload, callback) {\n      this._rpcRequest(payload, callback);\n    }\n    /**\n     * We override the following event methods so that we can warn consumers\n     * about deprecated events:\n     *   addListener, on, once, prependListener, prependOnceListener\n     */\n  }, {\n    key: \"addListener\",\n    value: function addListener(eventName, listener) {\n      this._warnOfDeprecation(eventName);\n      return _get(_getPrototypeOf(TorusInpageProvider.prototype), \"addListener\", this).call(this, eventName, listener);\n    }\n  }, {\n    key: \"on\",\n    value: function on(eventName, listener) {\n      this._warnOfDeprecation(eventName);\n      return _get(_getPrototypeOf(TorusInpageProvider.prototype), \"on\", this).call(this, eventName, listener);\n    }\n  }, {\n    key: \"once\",\n    value: function once(eventName, listener) {\n      this._warnOfDeprecation(eventName);\n      return _get(_getPrototypeOf(TorusInpageProvider.prototype), \"once\", this).call(this, eventName, listener);\n    }\n  }, {\n    key: \"prependListener\",\n    value: function prependListener(eventName, listener) {\n      this._warnOfDeprecation(eventName);\n      return _get(_getPrototypeOf(TorusInpageProvider.prototype), \"prependListener\", this).call(this, eventName, listener);\n    }\n  }, {\n    key: \"prependOnceListener\",\n    value: function prependOnceListener(eventName, listener) {\n      this._warnOfDeprecation(eventName);\n      return _get(_getPrototypeOf(TorusInpageProvider.prototype), \"prependOnceListener\", this).call(this, eventName, listener);\n    }\n    // Private Methods\n    //= ===================\n    /**\n     * Constructor helper.\n     * Populates initial state by calling 'wallet_getProviderState' and emits\n     * necessary events.\n     */\n  }, {\n    key: \"_initializeState\",\n    value: function () {\n      var _initializeState2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var _yield$this$request, accounts, chainId, isUnlocked, networkVersion;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return this.request({\n                method: \"wallet_getProviderState\"\n              });\n            case 3:\n              _yield$this$request = _context3.sent;\n              accounts = _yield$this$request.accounts;\n              chainId = _yield$this$request.chainId;\n              isUnlocked = _yield$this$request.isUnlocked;\n              networkVersion = _yield$this$request.networkVersion;\n              // indicate that we've connected, for EIP-1193 compliance\n              this.emit(\"connect\", {\n                chainId: chainId\n              });\n              this._handleChainChanged({\n                chainId: chainId,\n                networkVersion: networkVersion\n              });\n              this._handleUnlockStateChanged({\n                accounts: accounts,\n                isUnlocked: isUnlocked\n              });\n              this._handleAccountsChanged(accounts);\n              _context3.next = 17;\n              break;\n            case 14:\n              _context3.prev = 14;\n              _context3.t0 = _context3[\"catch\"](0);\n              log.error(\"MetaMask: Failed to get initial state. Please report this bug.\", _context3.t0);\n            case 17:\n              _context3.prev = 17;\n              log.info(\"initialized state\");\n              this._state.initialized = true;\n              this.emit(\"_initialized\");\n              return _context3.finish(17);\n            case 22:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this, [[0, 14, 17, 22]]);\n      }));\n      function _initializeState() {\n        return _initializeState2.apply(this, arguments);\n      }\n      return _initializeState;\n    }()\n    /**\n     * Internal RPC method. Forwards requests to background via the RPC engine.\n     * Also remap ids inbound and outbound.\n     *\n     * @param payload - The RPC request object.\n     * @param callback - The consumer's callback.\n     * @param isInternal - false - Whether the request is internal.\n     */\n  }, {\n    key: \"_rpcRequest\",\n    value: function _rpcRequest(payload, callback) {\n      var _this3 = this;\n      var isInternal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var cb = callback;\n      var _payload = payload;\n      if (!Array.isArray(_payload)) {\n        if (!_payload.jsonrpc) {\n          _payload.jsonrpc = \"2.0\";\n        }\n        if (_payload.method === \"eth_accounts\" || _payload.method === \"eth_requestAccounts\") {\n          // handle accounts changing\n          cb = function cb(err, res) {\n            _this3._handleAccountsChanged(res.result || [], _payload.method === \"eth_accounts\", isInternal);\n            callback(err, res);\n          };\n        } else if (_payload.method === \"wallet_getProviderState\") {\n          this._rpcEngine.handle(payload, cb);\n          return;\n        }\n      }\n      this.tryPreopenHandle(_payload, cb);\n    }\n  }, {\n    key: \"send\",\n    value: function send(methodOrPayload, callbackOrArgs) {\n      var _this4 = this;\n      if (!this._sentWarnings.send) {\n        log.warn(messages.warnings.sendDeprecation);\n        this._sentWarnings.send = true;\n      }\n      if (typeof methodOrPayload === \"string\" && (!callbackOrArgs || Array.isArray(callbackOrArgs))) {\n        return new Promise(function (resolve, reject) {\n          try {\n            _this4._rpcRequest({\n              method: methodOrPayload,\n              params: callbackOrArgs\n            }, getRpcPromiseCallback(resolve, reject, false));\n          } catch (error) {\n            reject(error);\n          }\n        });\n      }\n      if (methodOrPayload && typeof methodOrPayload === \"object\" && typeof callbackOrArgs === \"function\") {\n        return this._rpcRequest(methodOrPayload, callbackOrArgs);\n      }\n      return this._sendSync(methodOrPayload);\n    }\n    /**\n     * DEPRECATED.\n     * Internal backwards compatibility method, used in send.\n     */\n  }, {\n    key: \"_sendSync\",\n    value: function _sendSync(payload) {\n      var result;\n      switch (payload.method) {\n        case \"eth_accounts\":\n          result = this.selectedAddress ? [this.selectedAddress] : [];\n          break;\n        case \"eth_coinbase\":\n          result = this.selectedAddress || null;\n          break;\n        case \"eth_uninstallFilter\":\n          this._rpcRequest(payload, NOOP);\n          result = true;\n          break;\n        case \"net_version\":\n          result = this.networkVersion || null;\n          break;\n        default:\n          throw new Error(messages.errors.unsupportedSync(payload.method));\n      }\n      return {\n        id: payload.id,\n        jsonrpc: payload.jsonrpc,\n        result: result\n      };\n    }\n    /**\n     * When the provider becomes connected, updates internal state and emits\n     * required events. Idempotent.\n     *\n     * @param chainId - The ID of the newly connected chain.\n     * emits MetaMaskInpageProvider#connect\n     */\n  }, {\n    key: \"_handleConnect\",\n    value: function _handleConnect(chainId) {\n      if (!this._state.isConnected) {\n        this._state.isConnected = true;\n        this.emit(\"connect\", {\n          chainId: chainId\n        });\n        log.debug(messages.info.connected(chainId));\n      }\n    }\n    /**\n     * When the provider becomes disconnected, updates internal state and emits\n     * required events. Idempotent with respect to the isRecoverable parameter.\n     *\n     * Error codes per the CloseEvent status codes as required by EIP-1193:\n     * https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes\n     *\n     * @param isRecoverable - Whether the disconnection is recoverable.\n     * @param errorMessage - A custom error message.\n     * emits MetaMaskInpageProvider#disconnect\n     */\n  }, {\n    key: \"_handleDisconnect\",\n    value: function _handleDisconnect(isRecoverable, errorMessage) {\n      if (this._state.isConnected || !this._state.isPermanentlyDisconnected && !isRecoverable) {\n        this._state.isConnected = false;\n        var error;\n        if (isRecoverable) {\n          error = new EthereumRpcError(1013,\n          // Try again later\n          errorMessage || messages.errors.disconnected());\n          log.debug(error);\n        } else {\n          error = new EthereumRpcError(1011,\n          // Internal error\n          errorMessage || messages.errors.permanentlyDisconnected());\n          log.error(error);\n          this.chainId = null;\n          this._state.accounts = null;\n          this.selectedAddress = null;\n          this._state.isUnlocked = false;\n          this._state.isPermanentlyDisconnected = true;\n        }\n        this.emit(\"disconnect\", error);\n      }\n    }\n    /**\n     * Called when connection is lost to critical streams.\n     *\n     * emits MetamaskInpageProvider#disconnect\n     */\n  }, {\n    key: \"_handleStreamDisconnect\",\n    value: function _handleStreamDisconnect(streamName, error) {\n      logStreamDisconnectWarning(streamName, error, this);\n      this._handleDisconnect(false, error ? error.message : undefined);\n    }\n    /**\n     * Called when accounts may have changed.\n     */\n  }, {\n    key: \"_handleAccountsChanged\",\n    value: function _handleAccountsChanged(accounts) {\n      var isEthAccounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var isInternal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      // defensive programming\n      var finalAccounts = accounts;\n      if (!Array.isArray(finalAccounts)) {\n        log.error(\"MetaMask: Received non-array accounts parameter. Please report this bug.\", finalAccounts);\n        finalAccounts = [];\n      }\n      var _iterator = _createForOfIteratorHelper(accounts),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var account = _step.value;\n          if (typeof account !== \"string\") {\n            log.error(\"MetaMask: Received non-string account. Please report this bug.\", accounts);\n            finalAccounts = [];\n            break;\n          }\n        }\n        // emit accountsChanged if anything about the accounts array has changed\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      if (!dequal(this._state.accounts, finalAccounts)) {\n        // we should always have the correct accounts even before eth_accounts\n        // returns, except in cases where isInternal is true\n        if (isEthAccounts && Array.isArray(this._state.accounts) && this._state.accounts.length > 0 && !isInternal) {\n          log.error('MetaMask: \"eth_accounts\" unexpectedly updated accounts. Please report this bug.', finalAccounts);\n        }\n        this._state.accounts = finalAccounts;\n        this.emit(\"accountsChanged\", finalAccounts);\n      }\n      // handle selectedAddress\n      if (this.selectedAddress !== finalAccounts[0]) {\n        this.selectedAddress = finalAccounts[0] || null;\n      }\n    }\n    /**\n     * Upon receipt of a new chainId and networkVersion, emits corresponding\n     * events and sets relevant public state.\n     * Does nothing if neither the chainId nor the networkVersion are different\n     * from existing values.\n     *\n     * emits MetamaskInpageProvider#chainChanged\n     * @param networkInfo - An object with network info.\n     */\n  }, {\n    key: \"_handleChainChanged\",\n    value: function _handleChainChanged() {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        chainId = _ref6.chainId,\n        networkVersion = _ref6.networkVersion;\n      if (!chainId || !networkVersion) {\n        log.error(\"MetaMask: Received invalid network parameters. Please report this bug.\", {\n          chainId: chainId,\n          networkVersion: networkVersion\n        });\n        return;\n      }\n      if (networkVersion === \"loading\") {\n        this._handleDisconnect(true);\n      } else {\n        this._handleConnect(chainId);\n        if (chainId !== this.chainId) {\n          this.chainId = chainId;\n          if (this._state.initialized) {\n            this.emit(\"chainChanged\", this.chainId);\n          }\n        }\n      }\n    }\n    /**\n     * Upon receipt of a new isUnlocked state, sets relevant public state.\n     * Calls the accounts changed handler with the received accounts, or an empty\n     * array.\n     *\n     * Does nothing if the received value is equal to the existing value.\n     * There are no lock/unlock events.\n     *\n     * @param opts - Options bag.\n     */\n  }, {\n    key: \"_handleUnlockStateChanged\",\n    value: function _handleUnlockStateChanged() {\n      var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        accounts = _ref7.accounts,\n        isUnlocked = _ref7.isUnlocked;\n      if (typeof isUnlocked !== \"boolean\") {\n        log.error(\"MetaMask: Received invalid isUnlocked parameter. Please report this bug.\", {\n          isUnlocked: isUnlocked\n        });\n        return;\n      }\n      if (isUnlocked !== this._state.isUnlocked) {\n        this._state.isUnlocked = isUnlocked;\n        this._handleAccountsChanged(accounts || []);\n      }\n    }\n    /**\n     * Warns of deprecation for the given event, if applicable.\n     */\n  }, {\n    key: \"_warnOfDeprecation\",\n    value: function _warnOfDeprecation(eventName) {\n      if (this._sentWarnings.events[eventName] === false) {\n        log.warn(messages.warnings.events[eventName]);\n        this._sentWarnings.events[eventName] = true;\n      }\n    }\n  }]);\n  return TorusInpageProvider;\n}(SafeEventEmitter);\n_defineProperty(TorusInpageProvider, \"_defaultState\", {\n  accounts: null,\n  isConnected: false,\n  isUnlocked: false,\n  initialized: false,\n  isPermanentlyDisconnected: false,\n  hasEmittedConnection: false\n});\nvar defaults = function defaults(options) {\n  return {\n    algorithms: options.algorithms || [\"sha256\"],\n    delimiter: options.delimiter || \" \",\n    full: options.full || false\n  };\n};\n// Generate list of hashes\nvar hashes = function hashes(options, data) {\n  var internalHashes = {};\n  options.algorithms.forEach(function (algorithm) {\n    internalHashes[algorithm] = createHash(algorithm).update(data, \"utf8\").digest(\"base64\");\n  });\n  return internalHashes;\n};\n// Build an integrity string\nvar integrity = function integrity(options, sri) {\n  var output = \"\";\n  // Hash list\n  output += Object.keys(sri.hashes).map(function (algorithm) {\n    return \"\".concat(algorithm, \"-\").concat(sri.hashes[algorithm]);\n  }).join(options.delimiter);\n  return output;\n};\nvar main = function main(options, data) {\n  // Defaults\n  var finalOptions = defaults(options);\n  var sri = {\n    hashes: hashes(finalOptions, data),\n    integrity: undefined\n  };\n  sri.integrity = integrity(finalOptions, sri);\n  return finalOptions.full ? sri : sri.integrity;\n};\nvar PopupHandler = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(PopupHandler, _EventEmitter);\n  var _super2 = _createSuper(PopupHandler);\n  function PopupHandler(_ref) {\n    var _this5;\n    _classCallCheck(this, PopupHandler);\n    var url = _ref.url,\n      target = _ref.target,\n      features = _ref.features;\n    _this5 = _super2.call(this);\n    _defineProperty(_assertThisInitialized(_this5), \"url\", void 0);\n    _defineProperty(_assertThisInitialized(_this5), \"target\", void 0);\n    _defineProperty(_assertThisInitialized(_this5), \"features\", void 0);\n    _defineProperty(_assertThisInitialized(_this5), \"window\", void 0);\n    _defineProperty(_assertThisInitialized(_this5), \"windowTimer\", void 0);\n    _defineProperty(_assertThisInitialized(_this5), \"iClosedWindow\", void 0);\n    _this5.url = url;\n    _this5.target = target || \"_blank\";\n    _this5.features = features || getPopupFeatures();\n    _this5.window = undefined;\n    _this5.windowTimer = undefined;\n    _this5.iClosedWindow = false;\n    _this5._setupTimer();\n    return _this5;\n  }\n  _createClass(PopupHandler, [{\n    key: \"_setupTimer\",\n    value: function _setupTimer() {\n      var _this6 = this;\n      this.windowTimer = Number(setInterval(function () {\n        if (_this6.window && _this6.window.closed) {\n          clearInterval(_this6.windowTimer);\n          if (!_this6.iClosedWindow) {\n            _this6.emit(\"close\");\n          }\n          _this6.iClosedWindow = false;\n          _this6.window = undefined;\n        }\n        if (_this6.window === undefined) clearInterval(_this6.windowTimer);\n      }, 500));\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      var _this$window;\n      this.window = window.open(this.url.href, this.target, this.features);\n      if ((_this$window = this.window) !== null && _this$window !== void 0 && _this$window.focus) this.window.focus();\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.iClosedWindow = true;\n      if (this.window) this.window.close();\n    }\n  }, {\n    key: \"redirect\",\n    value: function redirect(locationReplaceOnRedirect) {\n      if (locationReplaceOnRedirect) {\n        window.location.replace(this.url.href);\n      } else {\n        window.location.href = this.url.href;\n      }\n    }\n  }]);\n  return PopupHandler;\n}(EventEmitter);\n/**\n * Returns whether the given image URL exists\n * @param url - the url of the image\n * @returns - whether the image exists\n */\nfunction imgExists(url) {\n  return new Promise(function (resolve, reject) {\n    try {\n      var img = document.createElement(\"img\");\n      img.onload = function () {\n        return resolve(true);\n      };\n      img.onerror = function () {\n        return resolve(false);\n      };\n      img.src = url;\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n/**\n * Extracts a name for the site from the DOM\n */\nvar getSiteName = function getSiteName(window) {\n  var document = window.document;\n  var siteName = document.querySelector('head > meta[property=\"og:site_name\"]');\n  if (siteName) {\n    return siteName.content;\n  }\n  var metaTitle = document.querySelector('head > meta[name=\"title\"]');\n  if (metaTitle) {\n    return metaTitle.content;\n  }\n  if (document.title && document.title.length > 0) {\n    return document.title;\n  }\n  return window.location.hostname;\n};\n/**\n * Extracts an icon for the site from the DOM\n */\nfunction getSiteIcon(_x4) {\n  return _getSiteIcon.apply(this, arguments);\n}\n/**\n * Gets site metadata and returns it\n *\n */\nfunction _getSiteIcon() {\n  _getSiteIcon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14(window) {\n    var document, icon;\n    return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n      while (1) switch (_context14.prev = _context14.next) {\n        case 0:\n          document = window.document; // Use the site's favicon if it exists\n          icon = document.querySelector('head > link[rel=\"shortcut icon\"]');\n          _context14.t0 = icon;\n          if (!_context14.t0) {\n            _context14.next = 7;\n            break;\n          }\n          _context14.next = 6;\n          return imgExists(icon.href);\n        case 6:\n          _context14.t0 = _context14.sent;\n        case 7:\n          if (!_context14.t0) {\n            _context14.next = 9;\n            break;\n          }\n          return _context14.abrupt(\"return\", icon.href);\n        case 9:\n          // Search through available icons in no particular order\n          icon = Array.from(document.querySelectorAll('head > link[rel=\"icon\"]')).find(function (_icon) {\n            return Boolean(_icon.href);\n          });\n          _context14.t1 = icon;\n          if (!_context14.t1) {\n            _context14.next = 15;\n            break;\n          }\n          _context14.next = 14;\n          return imgExists(icon.href);\n        case 14:\n          _context14.t1 = _context14.sent;\n        case 15:\n          if (!_context14.t1) {\n            _context14.next = 17;\n            break;\n          }\n          return _context14.abrupt(\"return\", icon.href);\n        case 17:\n          return _context14.abrupt(\"return\", null);\n        case 18:\n        case \"end\":\n          return _context14.stop();\n      }\n    }, _callee14);\n  }));\n  return _getSiteIcon.apply(this, arguments);\n}\nvar getSiteMetadata = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.t0 = getSiteName(window);\n          _context4.next = 3;\n          return getSiteIcon(window);\n        case 3:\n          _context4.t1 = _context4.sent;\n          return _context4.abrupt(\"return\", {\n            name: _context4.t0,\n            icon: _context4.t1\n          });\n        case 5:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function getSiteMetadata() {\n    return _ref8.apply(this, arguments);\n  };\n}();\n/**\n * Sends site metadata over an RPC request.\n */\nfunction sendSiteMetadata(_x5) {\n  return _sendSiteMetadata.apply(this, arguments);\n}\nfunction _sendSiteMetadata() {\n  _sendSiteMetadata = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15(engine) {\n    var domainMetadata;\n    return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n      while (1) switch (_context15.prev = _context15.next) {\n        case 0:\n          _context15.prev = 0;\n          _context15.next = 3;\n          return getSiteMetadata();\n        case 3:\n          domainMetadata = _context15.sent;\n          // call engine.handle directly to avoid normal RPC request handling\n          engine.handle({\n            jsonrpc: \"2.0\",\n            id: getPreopenInstanceId(),\n            method: \"wallet_sendDomainMetadata\",\n            params: domainMetadata\n          }, NOOP);\n          _context15.next = 10;\n          break;\n        case 7:\n          _context15.prev = 7;\n          _context15.t0 = _context15[\"catch\"](0);\n          log.error({\n            message: messages.errors.sendSiteMetadata(),\n            originalError: _context15.t0\n          });\n        case 10:\n        case \"end\":\n          return _context15.stop();\n      }\n    }, _callee15, null, [[0, 7]]);\n  }));\n  return _sendSiteMetadata.apply(this, arguments);\n}\nvar _excluded = [\"host\", \"chainId\", \"networkName\"];\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nvar defaultVerifiers = (_defaultVerifiers = {}, _defineProperty2(_defaultVerifiers, LOGIN_PROVIDER.GOOGLE, true), _defineProperty2(_defaultVerifiers, LOGIN_PROVIDER.FACEBOOK, true), _defineProperty2(_defaultVerifiers, LOGIN_PROVIDER.REDDIT, true), _defineProperty2(_defaultVerifiers, LOGIN_PROVIDER.TWITCH, true), _defineProperty2(_defaultVerifiers, LOGIN_PROVIDER.DISCORD, true), _defaultVerifiers);\nvar iframeIntegrity = \"sha384-TyJix2beanZzcdkcboa6uCUYMyLD0sGfvLb2m9+BJABgk4/kEutoxLOLL4Xex+DM\";\nvar expectedCacheControlHeader = \"max-age=3600\";\nvar UNSAFE_METHODS = [\"eth_sendTransaction\", \"eth_signTypedData\", \"eth_signTypedData_v3\", \"eth_signTypedData_v4\", \"personal_sign\", \"eth_getEncryptionPublicKey\", \"eth_decrypt\", \"wallet_addEthereumChain\", \"wallet_switchEthereumChain\"];\n// preload for iframe doesn't work https://bugs.chromium.org/p/chromium/issues/detail?id=593267\n(function () {\n  var _preLoadIframe = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n    var torusIframeHtml, _yield$getTorusUrl, torusUrl;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          if (!(typeof document === \"undefined\")) {\n            _context5.next = 3;\n            break;\n          }\n          return _context5.abrupt(\"return\");\n        case 3:\n          torusIframeHtml = document.createElement(\"link\");\n          _context5.next = 6;\n          return getTorusUrl(\"production\", {\n            check: false,\n            hash: iframeIntegrity,\n            version: \"\"\n          });\n        case 6:\n          _yield$getTorusUrl = _context5.sent;\n          torusUrl = _yield$getTorusUrl.torusUrl;\n          torusIframeHtml.href = \"\".concat(torusUrl, \"/popup\");\n          torusIframeHtml.crossOrigin = \"anonymous\";\n          torusIframeHtml.type = \"text/html\";\n          torusIframeHtml.rel = \"prefetch\";\n          if (torusIframeHtml.relList && torusIframeHtml.relList.supports) {\n            if (torusIframeHtml.relList.supports(\"prefetch\")) {\n              document.head.appendChild(torusIframeHtml);\n            }\n          }\n          _context5.next = 18;\n          break;\n        case 15:\n          _context5.prev = 15;\n          _context5.t0 = _context5[\"catch\"](0);\n          log.warn(_context5.t0);\n        case 18:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[0, 15]]);\n  }));\n  function preLoadIframe() {\n    return _preLoadIframe.apply(this, arguments);\n  }\n  return preLoadIframe;\n})()();\nvar Torus = /*#__PURE__*/function () {\n  function Torus() {\n    _classCallCheck(this, Torus);\n    var _ref9 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref9$buttonPosition = _ref9.buttonPosition,\n      buttonPosition = _ref9$buttonPosition === void 0 ? BUTTON_POSITION.BOTTOM_LEFT : _ref9$buttonPosition,\n      _ref9$buttonSize = _ref9.buttonSize,\n      buttonSize = _ref9$buttonSize === void 0 ? 56 : _ref9$buttonSize,\n      _ref9$modalZIndex = _ref9.modalZIndex,\n      modalZIndex = _ref9$modalZIndex === void 0 ? 99999 : _ref9$modalZIndex,\n      _ref9$apiKey = _ref9.apiKey,\n      apiKey = _ref9$apiKey === void 0 ? \"torus-default\" : _ref9$apiKey;\n    _defineProperty(this, \"buttonPosition\", BUTTON_POSITION.BOTTOM_LEFT);\n    _defineProperty(this, \"buttonSize\", void 0);\n    _defineProperty(this, \"torusUrl\", void 0);\n    _defineProperty(this, \"torusIframe\", void 0);\n    _defineProperty(this, \"styleLink\", void 0);\n    _defineProperty(this, \"isLoggedIn\", void 0);\n    _defineProperty(this, \"isInitialized\", void 0);\n    _defineProperty(this, \"torusWidgetVisibility\", void 0);\n    _defineProperty(this, \"torusAlert\", void 0);\n    _defineProperty(this, \"apiKey\", void 0);\n    _defineProperty(this, \"modalZIndex\", void 0);\n    _defineProperty(this, \"alertZIndex\", void 0);\n    _defineProperty(this, \"torusAlertContainer\", void 0);\n    _defineProperty(this, \"isIframeFullScreen\", void 0);\n    _defineProperty(this, \"whiteLabel\", void 0);\n    _defineProperty(this, \"requestedVerifier\", void 0);\n    _defineProperty(this, \"currentVerifier\", void 0);\n    _defineProperty(this, \"embedTranslations\", void 0);\n    _defineProperty(this, \"ethereum\", void 0);\n    _defineProperty(this, \"provider\", void 0);\n    _defineProperty(this, \"communicationMux\", void 0);\n    _defineProperty(this, \"isLoginCallback\", void 0);\n    _defineProperty(this, \"paymentProviders\", configuration.paymentProviders);\n    _defineProperty(this, \"loginHint\", \"\");\n    _defineProperty(this, \"useWalletConnect\", void 0);\n    _defineProperty(this, \"isCustomLogin\", false);\n    this.buttonPosition = buttonPosition;\n    this.buttonSize = buttonSize;\n    this.torusUrl = \"\";\n    this.isLoggedIn = false; // ethereum.enable working\n    this.isInitialized = false; // init done\n    this.torusWidgetVisibility = true;\n    this.requestedVerifier = \"\";\n    this.currentVerifier = \"\";\n    // this.nodeDetailManager = new NodeDetailManager();\n    // this.torusJs = new TorusJs({\n    //   metadataHost: \"https://metadata.tor.us\",\n    //   allowHost: \"https://signer.tor.us/api/allow\",\n    //   network: \"mainnet\",\n    // });\n    this.apiKey = apiKey;\n    setAPIKey(apiKey);\n    this.modalZIndex = modalZIndex;\n    this.alertZIndex = modalZIndex + 1000;\n    this.isIframeFullScreen = false;\n  }\n  _createClass(Torus, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n        var _this7 = this;\n        var _ref10,\n          _ref10$buildEnv,\n          buildEnv,\n          _ref10$enableLogging,\n          enableLogging,\n          _ref10$enabledVerifie,\n          enabledVerifiers,\n          _ref10$network,\n          network,\n          _ref10$loginConfig,\n          loginConfig,\n          _ref10$showTorusButto,\n          showTorusButton,\n          _ref10$integrity,\n          integrity,\n          whiteLabel,\n          _ref10$skipTKey,\n          skipTKey,\n          _ref10$useWalletConne,\n          useWalletConnect,\n          _ref10$mfaLevel,\n          mfaLevel,\n          _yield$getTorusUrl2,\n          torusUrl,\n          logLevel,\n          torusIframeUrl,\n          link,\n          _ref11,\n          _ref11$defaultLanguag,\n          defaultLanguage,\n          _ref11$customTranslat,\n          customTranslations,\n          mergedTranslations,\n          languageTranslations,\n          handleSetup,\n          fetchUrl,\n          resp,\n          response,\n          calculatedIntegrity,\n          _args8 = arguments;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              _ref10 = _args8.length > 0 && _args8[0] !== undefined ? _args8[0] : {}, _ref10$buildEnv = _ref10.buildEnv, buildEnv = _ref10$buildEnv === void 0 ? TORUS_BUILD_ENV.PRODUCTION : _ref10$buildEnv, _ref10$enableLogging = _ref10.enableLogging, enableLogging = _ref10$enableLogging === void 0 ? false : _ref10$enableLogging, _ref10$enabledVerifie = _ref10.enabledVerifiers, enabledVerifiers = _ref10$enabledVerifie === void 0 ? defaultVerifiers : _ref10$enabledVerifie, _ref10$network = _ref10.network, network = _ref10$network === void 0 ? {\n                host: \"mainnet\",\n                chainId: null,\n                networkName: \"\",\n                blockExplorer: \"\",\n                ticker: \"\",\n                tickerName: \"\"\n              } : _ref10$network, _ref10$loginConfig = _ref10.loginConfig, loginConfig = _ref10$loginConfig === void 0 ? {} : _ref10$loginConfig, _ref10$showTorusButto = _ref10.showTorusButton, showTorusButton = _ref10$showTorusButto === void 0 ? true : _ref10$showTorusButto, _ref10$integrity = _ref10.integrity, integrity = _ref10$integrity === void 0 ? {\n                check: false,\n                hash: iframeIntegrity,\n                version: \"\"\n              } : _ref10$integrity, whiteLabel = _ref10.whiteLabel, _ref10$skipTKey = _ref10.skipTKey, skipTKey = _ref10$skipTKey === void 0 ? false : _ref10$skipTKey, _ref10$useWalletConne = _ref10.useWalletConnect, useWalletConnect = _ref10$useWalletConne === void 0 ? false : _ref10$useWalletConne, _ref10$mfaLevel = _ref10.mfaLevel, mfaLevel = _ref10$mfaLevel === void 0 ? \"default\" : _ref10$mfaLevel;\n              if (!this.isInitialized) {\n                _context8.next = 3;\n                break;\n              }\n              throw new Error(\"Already initialized\");\n            case 3:\n              _context8.next = 5;\n              return getTorusUrl(buildEnv, integrity);\n            case 5:\n              _yield$getTorusUrl2 = _context8.sent;\n              torusUrl = _yield$getTorusUrl2.torusUrl;\n              logLevel = _yield$getTorusUrl2.logLevel;\n              log.info(torusUrl, \"url loaded\");\n              this.torusUrl = torusUrl;\n              this.whiteLabel = whiteLabel;\n              this.useWalletConnect = useWalletConnect;\n              this.isCustomLogin = !!(loginConfig && Object.keys(loginConfig).length > 0) || !!(whiteLabel && Object.keys(whiteLabel).length > 0);\n              log.setDefaultLevel(logLevel);\n              if (enableLogging) log.enableAll();else log.disableAll();\n              this.torusWidgetVisibility = showTorusButton;\n              torusIframeUrl = new URL(torusUrl);\n              if (torusIframeUrl.pathname.endsWith(\"/\")) torusIframeUrl.pathname += \"popup\";else torusIframeUrl.pathname += \"/popup\";\n              torusIframeUrl.hash = \"#isCustomLogin=\".concat(this.isCustomLogin);\n              // Iframe code\n              this.torusIframe = htmlToElement(\"<iframe\\n        id=\\\"torusIframe\\\"\\n        allow=\".concat(useWalletConnect ? \"camera\" : \"\", \"\\n        class=\\\"torusIframe\\\"\\n        src=\\\"\").concat(torusIframeUrl.href, \"\\\"\\n        style=\\\"display: none; position: fixed; top: 0; right: 0; width: 100%; color-scheme: none;\\n        height: 100%; border: none; border-radius: 0; z-index: \").concat(this.modalZIndex, \"\\\"\\n      ></iframe>\"));\n              this.torusAlertContainer = htmlToElement('<div id=\"torusAlertContainer\"></div>');\n              this.torusAlertContainer.style.display = \"none\";\n              this.torusAlertContainer.style.setProperty(\"z-index\", this.alertZIndex.toString());\n              link = window.document.createElement(\"link\");\n              link.setAttribute(\"rel\", \"stylesheet\");\n              link.setAttribute(\"type\", \"text/css\");\n              link.setAttribute(\"href\", \"\".concat(torusUrl, \"/css/widget.css\"));\n              this.styleLink = link;\n              _ref11 = this.whiteLabel || {}, _ref11$defaultLanguag = _ref11.defaultLanguage, defaultLanguage = _ref11$defaultLanguag === void 0 ? getUserLanguage() : _ref11$defaultLanguag, _ref11$customTranslat = _ref11.customTranslations, customTranslations = _ref11$customTranslat === void 0 ? {} : _ref11$customTranslat;\n              mergedTranslations = deepmerge(configuration.translations, customTranslations);\n              languageTranslations = mergedTranslations[defaultLanguage] || configuration.translations[getUserLanguage()];\n              this.embedTranslations = languageTranslations.embed;\n              handleSetup = /*#__PURE__*/function () {\n                var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n                  return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n                    while (1) switch (_context7.prev = _context7.next) {\n                      case 0:\n                        _context7.next = 2;\n                        return documentReady();\n                      case 2:\n                        return _context7.abrupt(\"return\", new Promise(function (resolve, reject) {\n                          _this7.torusIframe.onload = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n                            var initStream;\n                            return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n                              while (1) switch (_context6.prev = _context6.next) {\n                                case 0:\n                                  // only do this if iframe is not full screen\n                                  _this7._setupWeb3();\n                                  initStream = _this7.communicationMux.getStream(\"init_stream\");\n                                  initStream.on(\"data\", function (chunk) {\n                                    var name = chunk.name,\n                                      data = chunk.data,\n                                      error = chunk.error;\n                                    if (name === \"init_complete\" && data.success) {\n                                      // resolve promise\n                                      _this7.isInitialized = true;\n                                      _this7._displayIframe(_this7.isIframeFullScreen);\n                                      resolve(undefined);\n                                    } else if (error) {\n                                      reject(new Error(error));\n                                    }\n                                  });\n                                  initStream.write({\n                                    name: \"init_stream\",\n                                    data: {\n                                      enabledVerifiers: enabledVerifiers,\n                                      loginConfig: loginConfig,\n                                      whiteLabel: _this7.whiteLabel,\n                                      buttonPosition: _this7.buttonPosition,\n                                      buttonSize: _this7.buttonSize,\n                                      torusWidgetVisibility: _this7.torusWidgetVisibility,\n                                      apiKey: _this7.apiKey,\n                                      skipTKey: skipTKey,\n                                      network: network,\n                                      mfaLevel: mfaLevel\n                                    }\n                                  });\n                                case 4:\n                                case \"end\":\n                                  return _context6.stop();\n                              }\n                            }, _callee6);\n                          }));\n                          window.document.head.appendChild(_this7.styleLink);\n                          window.document.body.appendChild(_this7.torusIframe);\n                          window.document.body.appendChild(_this7.torusAlertContainer);\n                        }));\n                      case 3:\n                      case \"end\":\n                        return _context7.stop();\n                    }\n                  }, _callee7);\n                }));\n                return function handleSetup() {\n                  return _ref12.apply(this, arguments);\n                };\n              }();\n              if (!(buildEnv === \"production\" && integrity.check)) {\n                _context8.next = 54;\n                break;\n              }\n              // hacky solution to check for iframe integrity\n              fetchUrl = \"\".concat(torusUrl, \"/popup\");\n              _context8.next = 37;\n              return fetch(fetchUrl, {\n                cache: \"reload\"\n              });\n            case 37:\n              resp = _context8.sent;\n              if (!(resp.headers.get(\"Cache-Control\") !== expectedCacheControlHeader)) {\n                _context8.next = 40;\n                break;\n              }\n              throw new Error(\"Unexpected Cache-Control headers, got \".concat(resp.headers.get(\"Cache-Control\")));\n            case 40:\n              _context8.next = 42;\n              return resp.text();\n            case 42:\n              response = _context8.sent;\n              calculatedIntegrity = main({\n                algorithms: [\"sha384\"]\n              }, response);\n              log.info(calculatedIntegrity, \"integrity\");\n              if (!(calculatedIntegrity === integrity.hash)) {\n                _context8.next = 50;\n                break;\n              }\n              _context8.next = 48;\n              return handleSetup();\n            case 48:\n              _context8.next = 52;\n              break;\n            case 50:\n              this.clearInit();\n              throw new Error(\"Integrity check failed\");\n            case 52:\n              _context8.next = 56;\n              break;\n            case 54:\n              _context8.next = 56;\n              return handleSetup();\n            case 56:\n              return _context8.abrupt(\"return\", undefined);\n            case 57:\n            case \"end\":\n              return _context8.stop();\n          }\n        }, _callee8, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"login\",\n    value: function login() {\n      var _ref14 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref14$verifier = _ref14.verifier,\n        verifier = _ref14$verifier === void 0 ? \"\" : _ref14$verifier,\n        _ref14$login_hint = _ref14.login_hint,\n        loginHint = _ref14$login_hint === void 0 ? \"\" : _ref14$login_hint;\n      if (!this.isInitialized) throw new Error(\"Call init() first\");\n      this.requestedVerifier = verifier;\n      this.loginHint = loginHint;\n      return this.ethereum.enable();\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      var _this8 = this;\n      return new Promise(function (resolve, reject) {\n        if (!_this8.isLoggedIn) {\n          reject(new Error(\"User has not logged in yet\"));\n          return;\n        }\n        var logOutStream = _this8.communicationMux.getStream(\"logout\");\n        logOutStream.write({\n          name: \"logOut\"\n        });\n        var statusStream = _this8.communicationMux.getStream(\"status\");\n        var statusStreamHandler = function statusStreamHandler(status) {\n          if (!status.loggedIn) {\n            _this8.isLoggedIn = false;\n            _this8.currentVerifier = \"\";\n            _this8.requestedVerifier = \"\";\n            resolve();\n          } else reject(new Error(\"Some Error Occured\"));\n        };\n        handleStream(statusStream, \"data\", statusStreamHandler);\n      });\n    }\n  }, {\n    key: \"cleanUp\",\n    value: function () {\n      var _cleanUp = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              if (!this.isLoggedIn) {\n                _context9.next = 3;\n                break;\n              }\n              _context9.next = 3;\n              return this.logout();\n            case 3:\n              this.clearInit();\n            case 4:\n            case \"end\":\n              return _context9.stop();\n          }\n        }, _callee9, this);\n      }));\n      function cleanUp() {\n        return _cleanUp.apply(this, arguments);\n      }\n      return cleanUp;\n    }()\n  }, {\n    key: \"clearInit\",\n    value: function clearInit() {\n      function isElement(element) {\n        return element instanceof Element || element instanceof HTMLDocument;\n      }\n      if (isElement(this.styleLink) && window.document.body.contains(this.styleLink)) {\n        this.styleLink.remove();\n        this.styleLink = undefined;\n      }\n      if (isElement(this.torusIframe) && window.document.body.contains(this.torusIframe)) {\n        this.torusIframe.remove();\n        this.torusIframe = undefined;\n      }\n      if (isElement(this.torusAlertContainer) && window.document.body.contains(this.torusAlertContainer)) {\n        this.torusAlert = undefined;\n        this.torusAlertContainer.remove();\n        this.torusAlertContainer = undefined;\n      }\n      this.isInitialized = false;\n    }\n  }, {\n    key: \"hideTorusButton\",\n    value: function hideTorusButton() {\n      this.torusWidgetVisibility = false;\n      this._sendWidgetVisibilityStatus(false);\n      this._displayIframe();\n    }\n  }, {\n    key: \"showTorusButton\",\n    value: function showTorusButton() {\n      this.torusWidgetVisibility = true;\n      this._sendWidgetVisibilityStatus(true);\n      this._displayIframe();\n    }\n  }, {\n    key: \"setProvider\",\n    value: function setProvider(_ref) {\n      var _this9 = this;\n      var _ref$host = _ref.host,\n        host = _ref$host === void 0 ? \"mainnet\" : _ref$host,\n        _ref$chainId = _ref.chainId,\n        chainId = _ref$chainId === void 0 ? null : _ref$chainId,\n        _ref$networkName = _ref.networkName,\n        networkName = _ref$networkName === void 0 ? \"\" : _ref$networkName,\n        rest = _objectWithoutProperties(_ref, _excluded);\n      return new Promise(function (resolve, reject) {\n        var providerChangeStream = _this9.communicationMux.getStream(\"provider_change\");\n        var handler = function handler(chunk) {\n          var _chunk$data = chunk.data,\n            err = _chunk$data.err,\n            success = _chunk$data.success;\n          log.info(chunk);\n          if (err) {\n            reject(err);\n          } else if (success) {\n            resolve();\n          } else reject(new Error(\"some error occured\"));\n        };\n        handleStream(providerChangeStream, \"data\", handler);\n        var preopenInstanceId = getPreopenInstanceId();\n        _this9._handleWindow(preopenInstanceId, {\n          target: \"_blank\",\n          features: FEATURES_PROVIDER_CHANGE_WINDOW\n        });\n        providerChangeStream.write({\n          name: \"show_provider_change\",\n          data: {\n            network: _objectSpread({\n              host: host,\n              chainId: chainId,\n              networkName: networkName\n            }, rest),\n            preopenInstanceId: preopenInstanceId,\n            override: false\n          }\n        });\n      });\n    }\n  }, {\n    key: \"showWallet\",\n    value: function showWallet(path) {\n      var _this10 = this;\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var showWalletStream = this.communicationMux.getStream(\"show_wallet\");\n      var finalPath = path ? \"/\".concat(path) : \"\";\n      showWalletStream.write({\n        name: \"show_wallet\",\n        data: {\n          path: finalPath\n        }\n      });\n      var showWalletHandler = function showWalletHandler(chunk) {\n        if (chunk.name === \"show_wallet_instance\") {\n          // Let the error propogate up (hence, no try catch)\n          var instanceId = chunk.data.instanceId;\n          var finalUrl = new URL(\"\".concat(_this10.torusUrl, \"/wallet\").concat(finalPath));\n          // Using URL constructor to prevent js injection and allow parameter validation.!\n          finalUrl.searchParams.append(\"integrity\", \"true\");\n          finalUrl.searchParams.append(\"instanceId\", instanceId);\n          Object.keys(params).forEach(function (x) {\n            finalUrl.searchParams.append(x, params[x]);\n          });\n          finalUrl.hash = \"#isCustomLogin=\".concat(_this10.isCustomLogin);\n          var walletWindow = new PopupHandler({\n            url: finalUrl,\n            features: FEATURES_DEFAULT_WALLET_WINDOW\n          });\n          walletWindow.open();\n        }\n      };\n      handleStream(showWalletStream, \"data\", showWalletHandler);\n    }\n  }, {\n    key: \"getPublicAddress\",\n    value: function () {\n      var _getPublicAddress = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(_ref2) {\n        var verifier, verifierId, _ref2$isExtended, isExtended, walletVerifier, openloginVerifier, url;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) switch (_context10.prev = _context10.next) {\n            case 0:\n              verifier = _ref2.verifier, verifierId = _ref2.verifierId, _ref2$isExtended = _ref2.isExtended, isExtended = _ref2$isExtended === void 0 ? false : _ref2$isExtended;\n              if (!(!configuration.supportedVerifierList.includes(verifier) || !WALLET_OPENLOGIN_VERIFIER_MAP[verifier])) {\n                _context10.next = 3;\n                break;\n              }\n              throw new Error(\"Unsupported verifier\");\n            case 3:\n              walletVerifier = verifier;\n              openloginVerifier = WALLET_OPENLOGIN_VERIFIER_MAP[verifier];\n              url = new URL(\"https://api.tor.us/lookup/torus\");\n              url.searchParams.append(\"verifier\", openloginVerifier);\n              url.searchParams.append(\"verifierId\", verifierId);\n              url.searchParams.append(\"walletVerifier\", walletVerifier);\n              url.searchParams.append(\"network\", \"mainnet\");\n              url.searchParams.append(\"isExtended\", isExtended.toString());\n              return _context10.abrupt(\"return\", get(url.href, {\n                headers: {\n                  \"Content-Type\": \"application/json; charset=utf-8\"\n                }\n              }, {\n                useAPIKey: true\n              }));\n            case 12:\n            case \"end\":\n              return _context10.stop();\n          }\n        }, _callee10);\n      }));\n      function getPublicAddress(_x6) {\n        return _getPublicAddress.apply(this, arguments);\n      }\n      return getPublicAddress;\n    }()\n  }, {\n    key: \"getUserInfo\",\n    value: function getUserInfo(message) {\n      var _this11 = this;\n      return new Promise(function (resolve, reject) {\n        if (_this11.isLoggedIn) {\n          var userInfoAccessStream = _this11.communicationMux.getStream(\"user_info_access\");\n          userInfoAccessStream.write({\n            name: \"user_info_access_request\"\n          });\n          var userInfoAccessHandler = function userInfoAccessHandler(chunk) {\n            var name = chunk.name,\n              _chunk$data2 = chunk.data,\n              approved = _chunk$data2.approved,\n              payload = _chunk$data2.payload,\n              rejected = _chunk$data2.rejected,\n              newRequest = _chunk$data2.newRequest;\n            if (name === \"user_info_access_response\") {\n              if (approved) {\n                resolve(payload);\n              } else if (rejected) {\n                reject(new Error(\"User rejected the request\"));\n              } else if (newRequest) {\n                var userInfoStream = _this11.communicationMux.getStream(\"user_info\");\n                var userInfoHandler = function userInfoHandler(handlerChunk) {\n                  if (handlerChunk.name === \"user_info_response\") {\n                    if (handlerChunk.data.approved) {\n                      resolve(handlerChunk.data.payload);\n                    } else {\n                      reject(new Error(\"User rejected the request\"));\n                    }\n                  }\n                };\n                handleStream(userInfoStream, \"data\", userInfoHandler);\n                var preopenInstanceId = getPreopenInstanceId();\n                _this11._handleWindow(preopenInstanceId, {\n                  target: \"_blank\",\n                  features: FEATURES_PROVIDER_CHANGE_WINDOW\n                });\n                userInfoStream.write({\n                  name: \"user_info_request\",\n                  data: {\n                    message: message,\n                    preopenInstanceId: preopenInstanceId\n                  }\n                });\n              }\n            }\n          };\n          handleStream(userInfoAccessStream, \"data\", userInfoAccessHandler);\n        } else reject(new Error(\"User has not logged in yet\"));\n      });\n    }\n  }, {\n    key: \"initiateTopup\",\n    value: function initiateTopup(provider, params) {\n      var _this12 = this;\n      return new Promise(function (resolve, reject) {\n        if (_this12.isInitialized) {\n          var _validatePaymentProvi = validatePaymentProvider(provider, params),\n            errors = _validatePaymentProvi.errors,\n            isValid = _validatePaymentProvi.isValid;\n          if (!isValid) {\n            reject(new Error(JSON.stringify(errors)));\n            return;\n          }\n          var topupStream = _this12.communicationMux.getStream(\"topup\");\n          var topupHandler = function topupHandler(chunk) {\n            if (chunk.name === \"topup_response\") {\n              if (chunk.data.success) {\n                resolve(chunk.data.success);\n              } else {\n                reject(new Error(chunk.data.error));\n              }\n            }\n          };\n          handleStream(topupStream, \"data\", topupHandler);\n          var preopenInstanceId = getPreopenInstanceId();\n          _this12._handleWindow(preopenInstanceId);\n          topupStream.write({\n            name: \"topup_request\",\n            data: {\n              provider: provider,\n              params: params,\n              preopenInstanceId: preopenInstanceId\n            }\n          });\n        } else reject(new Error(\"Torus is not initialized yet\"));\n      });\n    }\n  }, {\n    key: \"loginWithPrivateKey\",\n    value: function () {\n      var _loginWithPrivateKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(loginParams) {\n        var _this13 = this;\n        var privateKey, userInfo;\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) switch (_context11.prev = _context11.next) {\n            case 0:\n              privateKey = loginParams.privateKey, userInfo = loginParams.userInfo;\n              return _context11.abrupt(\"return\", new Promise(function (resolve, reject) {\n                if (_this13.isInitialized) {\n                  if (Buffer.from(privateKey, \"hex\").length !== 32) {\n                    reject(new Error(\"Invalid private key, Please provide a 32 byte valid secp25k1 private key\"));\n                    return;\n                  }\n                  var loginPrivKeyStream = _this13.communicationMux.getStream(\"login_with_private_key\");\n                  var loginHandler = function loginHandler(chunk) {\n                    if (chunk.name === \"login_with_private_key_response\") {\n                      if (chunk.data.success) {\n                        resolve(chunk.data.success);\n                      } else {\n                        reject(new Error(chunk.data.error));\n                      }\n                    }\n                  };\n                  handleStream(loginPrivKeyStream, \"data\", loginHandler);\n                  loginPrivKeyStream.write({\n                    name: \"login_with_private_key_request\",\n                    data: {\n                      privateKey: privateKey,\n                      userInfo: userInfo\n                    }\n                  });\n                } else reject(new Error(\"Torus is not initialized yet\"));\n              }));\n            case 2:\n            case \"end\":\n              return _context11.stop();\n          }\n        }, _callee11);\n      }));\n      function loginWithPrivateKey(_x7) {\n        return _loginWithPrivateKey.apply(this, arguments);\n      }\n      return loginWithPrivateKey;\n    }()\n  }, {\n    key: \"showWalletConnectScanner\",\n    value: function () {\n      var _showWalletConnectScanner = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {\n        var _this14 = this;\n        return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n          while (1) switch (_context12.prev = _context12.next) {\n            case 0:\n              if (this.useWalletConnect) {\n                _context12.next = 2;\n                break;\n              }\n              throw new Error(\"Set `useWalletConnect` as true in init function options to use wallet connect scanner\");\n            case 2:\n              return _context12.abrupt(\"return\", new Promise(function (resolve, reject) {\n                if (_this14.isLoggedIn) {\n                  var walletConnectStream = _this14.communicationMux.getStream(\"wallet_connect_stream\");\n                  var walletConnectHandler = function walletConnectHandler(chunk) {\n                    if (chunk.name === \"wallet_connect_stream_res\") {\n                      if (chunk.data.success) {\n                        resolve(chunk.data.success);\n                      } else {\n                        reject(new Error(chunk.data.error));\n                      }\n                      _this14._displayIframe();\n                    }\n                  };\n                  handleStream(walletConnectStream, \"data\", walletConnectHandler);\n                  walletConnectStream.write({\n                    name: \"wallet_connect_stream_req\"\n                  });\n                  _this14._displayIframe(true);\n                } else reject(new Error(\"User has not logged in yet\"));\n              }));\n            case 3:\n            case \"end\":\n              return _context12.stop();\n          }\n        }, _callee12, this);\n      }));\n      function showWalletConnectScanner() {\n        return _showWalletConnectScanner.apply(this, arguments);\n      }\n      return showWalletConnectScanner;\n    }()\n  }, {\n    key: \"_handleWindow\",\n    value: function _handleWindow(preopenInstanceId) {\n      var _ref15 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        url = _ref15.url,\n        target = _ref15.target,\n        features = _ref15.features;\n      if (preopenInstanceId) {\n        var windowStream = this.communicationMux.getStream(\"window\");\n        var finalUrl = new URL(url || \"\".concat(this.torusUrl, \"/redirect?preopenInstanceId=\").concat(preopenInstanceId));\n        if (finalUrl.hash) finalUrl.hash += \"&isCustomLogin=\".concat(this.isCustomLogin);else finalUrl.hash = \"#isCustomLogin=\".concat(this.isCustomLogin);\n        var handledWindow = new PopupHandler({\n          url: finalUrl,\n          target: target,\n          features: features\n        });\n        handledWindow.open();\n        if (!handledWindow.window) {\n          this._createPopupBlockAlert(preopenInstanceId, finalUrl.href);\n          return;\n        }\n        windowStream.write({\n          name: \"opened_window\",\n          data: {\n            preopenInstanceId: preopenInstanceId\n          }\n        });\n        var closeHandler = function closeHandler(_ref3) {\n          var receivedId = _ref3.preopenInstanceId,\n            close = _ref3.close;\n          if (receivedId === preopenInstanceId && close) {\n            handledWindow.close();\n            windowStream.removeListener(\"data\", closeHandler);\n          }\n        };\n        windowStream.on(\"data\", closeHandler);\n        handledWindow.once(\"close\", function () {\n          windowStream.write({\n            data: {\n              preopenInstanceId: preopenInstanceId,\n              closed: true\n            }\n          });\n          windowStream.removeListener(\"data\", closeHandler);\n        });\n      }\n    }\n  }, {\n    key: \"_setEmbedWhiteLabel\",\n    value: function _setEmbedWhiteLabel(element) {\n      // Set whitelabel\n      var _ref16 = this.whiteLabel || {},\n        theme = _ref16.theme;\n      if (theme) {\n        var _theme$isDark = theme.isDark,\n          isDark = _theme$isDark === void 0 ? false : _theme$isDark,\n          _theme$colors = theme.colors,\n          colors = _theme$colors === void 0 ? {} : _theme$colors;\n        if (isDark) element.classList.add(\"torus-dark\");\n        if (colors.torusBrand1) element.style.setProperty(\"--torus-brand-1\", colors.torusBrand1);\n        if (colors.torusGray2) element.style.setProperty(\"--torus-gray-2\", colors.torusGray2);\n      }\n    }\n  }, {\n    key: \"_getLogoUrl\",\n    value: function _getLogoUrl() {\n      var _this$whiteLabel, _this$whiteLabel$them;\n      var logoUrl = \"\".concat(this.torusUrl, \"/images/torus_icon-blue.svg\");\n      if ((_this$whiteLabel = this.whiteLabel) !== null && _this$whiteLabel !== void 0 && (_this$whiteLabel$them = _this$whiteLabel.theme) !== null && _this$whiteLabel$them !== void 0 && _this$whiteLabel$them.isDark) {\n        var _this$whiteLabel2;\n        logoUrl = ((_this$whiteLabel2 = this.whiteLabel) === null || _this$whiteLabel2 === void 0 ? void 0 : _this$whiteLabel2.logoLight) || logoUrl;\n      } else {\n        var _this$whiteLabel3;\n        logoUrl = ((_this$whiteLabel3 = this.whiteLabel) === null || _this$whiteLabel3 === void 0 ? void 0 : _this$whiteLabel3.logoDark) || logoUrl;\n      }\n      return logoUrl;\n    }\n  }, {\n    key: \"_sendWidgetVisibilityStatus\",\n    value: function _sendWidgetVisibilityStatus(status) {\n      var torusWidgetVisibilityStream = this.communicationMux.getStream(\"torus-widget-visibility\");\n      torusWidgetVisibilityStream.write({\n        data: status\n      });\n    }\n  }, {\n    key: \"_displayIframe\",\n    value: function _displayIframe() {\n      var isFull = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var style = {};\n      var size = this.buttonSize + 14; // 15px padding\n      // set phase\n      if (!isFull) {\n        style.display = this.torusWidgetVisibility ? \"block\" : \"none\";\n        style.height = \"\".concat(size, \"px\");\n        style.width = \"\".concat(size, \"px\");\n        switch (this.buttonPosition) {\n          case BUTTON_POSITION.TOP_LEFT:\n            style.top = \"0px\";\n            style.left = \"0px\";\n            style.right = \"auto\";\n            style.bottom = \"auto\";\n            break;\n          case BUTTON_POSITION.TOP_RIGHT:\n            style.top = \"0px\";\n            style.right = \"0px\";\n            style.left = \"auto\";\n            style.bottom = \"auto\";\n            break;\n          case BUTTON_POSITION.BOTTOM_RIGHT:\n            style.bottom = \"0px\";\n            style.right = \"0px\";\n            style.top = \"auto\";\n            style.left = \"auto\";\n            break;\n          case BUTTON_POSITION.BOTTOM_LEFT:\n          default:\n            style.bottom = \"0px\";\n            style.left = \"0px\";\n            style.top = \"auto\";\n            style.right = \"auto\";\n            break;\n        }\n      } else {\n        style.display = \"block\";\n        style.width = \"100%\";\n        style.height = \"100%\";\n        style.top = \"0px\";\n        style.right = \"0px\";\n        style.left = \"0px\";\n        style.bottom = \"0px\";\n      }\n      Object.assign(this.torusIframe.style, style);\n      this.isIframeFullScreen = isFull;\n    }\n  }, {\n    key: \"_setupWeb3\",\n    value: function _setupWeb3() {\n      var _this15 = this;\n      log.info(\"setupWeb3 running\");\n      // setup background connection\n      var metamaskStream = new BasePostMessageStream({\n        name: \"embed_metamask\",\n        target: \"iframe_metamask\",\n        targetWindow: this.torusIframe.contentWindow,\n        targetOrigin: new URL(this.torusUrl).origin\n      });\n      // Due to compatibility reasons, we should not set up multiplexing on window.metamaskstream\n      // because the MetamaskInpageProvider also attempts to do so.\n      // We create another LocalMessageDuplexStream for communication between dapp <> iframe\n      var communicationStream = new BasePostMessageStream({\n        name: \"embed_comm\",\n        target: \"iframe_comm\",\n        targetWindow: this.torusIframe.contentWindow,\n        targetOrigin: new URL(this.torusUrl).origin\n      });\n      // Backward compatibility with Gotchi :)\n      // window.metamaskStream = this.communicationStream\n      // compose the inpage provider\n      var inpageProvider = new TorusInpageProvider(metamaskStream);\n      // detect eth_requestAccounts and pipe to enable for now\n      var detectAccountRequestPrototypeModifier = function detectAccountRequestPrototypeModifier(m) {\n        var originalMethod = inpageProvider[m];\n        inpageProvider[m] = function providerFunc(method) {\n          if (method && method === \"eth_requestAccounts\") {\n            return inpageProvider.enable();\n          }\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n          return originalMethod.apply(this, [method].concat(args));\n        };\n      };\n      detectAccountRequestPrototypeModifier(\"send\");\n      detectAccountRequestPrototypeModifier(\"sendAsync\");\n      inpageProvider.enable = function () {\n        return new Promise(function (resolve, reject) {\n          // If user is already logged in, we assume they have given access to the website\n          inpageProvider.sendAsync({\n            jsonrpc: \"2.0\",\n            id: getPreopenInstanceId(),\n            method: \"eth_requestAccounts\",\n            params: []\n          }, function (err, response) {\n            var _ref17 = response || {},\n              res = _ref17.result;\n            if (err) {\n              setTimeout(function () {\n                reject(err);\n              }, 50);\n            } else if (Array.isArray(res) && res.length > 0) {\n              // If user is already rehydrated, resolve this\n              // else wait for something to be written to status stream\n              var handleLoginCb = function handleLoginCb() {\n                if (_this15.requestedVerifier !== \"\" && _this15.currentVerifier !== _this15.requestedVerifier) {\n                  var requestedVerifier = _this15.requestedVerifier;\n                  // eslint-disable-next-line promise/no-promise-in-callback\n                  _this15.logout()\n                  // eslint-disable-next-line promise/always-return\n                  .then(function (_) {\n                    _this15.requestedVerifier = requestedVerifier;\n                    _this15._showLoginPopup(true, resolve, reject);\n                  }).catch(function (error) {\n                    return reject(error);\n                  });\n                } else {\n                  resolve(res);\n                }\n              };\n              if (_this15.isLoggedIn) {\n                handleLoginCb();\n              } else {\n                _this15.isLoginCallback = handleLoginCb;\n              }\n            } else {\n              // set up listener for login\n              _this15._showLoginPopup(true, resolve, reject);\n            }\n          });\n        });\n      };\n      inpageProvider.tryPreopenHandle = function (payload, cb) {\n        var _payload = payload;\n        if (!Array.isArray(_payload) && UNSAFE_METHODS.includes(_payload.method)) {\n          var preopenInstanceId = getPreopenInstanceId();\n          _this15._handleWindow(preopenInstanceId, {\n            target: \"_blank\",\n            features: FEATURES_CONFIRM_WINDOW\n          });\n          _payload.preopenInstanceId = preopenInstanceId;\n        }\n        inpageProvider._rpcEngine.handle(_payload, cb);\n      };\n      // Work around for web3@1.0 deleting the bound `sendAsync` but not the unbound\n      // `sendAsync` method on the prototype, causing `this` reference issues with drizzle\n      var proxiedInpageProvider = new Proxy(inpageProvider, {\n        // straight up lie that we deleted the property so that it doesnt\n        // throw an error in strict mode\n        deleteProperty: function deleteProperty() {\n          return true;\n        }\n      });\n      this.ethereum = proxiedInpageProvider;\n      var communicationMux = setupMultiplex(communicationStream);\n      this.communicationMux = communicationMux;\n      var windowStream = communicationMux.getStream(\"window\");\n      windowStream.on(\"data\", function (chunk) {\n        if (chunk.name === \"create_window\") {\n          // url is the url we need to open\n          // we can pass the final url upfront so that it removes the step of redirecting to /redirect and waiting for finalUrl\n          _this15._createPopupBlockAlert(chunk.data.preopenInstanceId, chunk.data.url);\n        }\n      });\n      // show torus widget if button clicked\n      var widgetStream = communicationMux.getStream(\"widget\");\n      widgetStream.on(\"data\", function (chunk) {\n        var data = chunk.data;\n        _this15._displayIframe(data);\n      });\n      // Show torus button if wallet has been hydrated/detected\n      var statusStream = communicationMux.getStream(\"status\");\n      statusStream.on(\"data\", function (status) {\n        // login\n        if (status.loggedIn) {\n          _this15.isLoggedIn = status.loggedIn;\n          _this15.currentVerifier = status.verifier;\n        } // logout\n        else _this15._displayIframe();\n        if (_this15.isLoginCallback) {\n          _this15.isLoginCallback();\n          delete _this15.isLoginCallback;\n        }\n      });\n      this.provider = proxiedInpageProvider;\n      if (this.provider.shouldSendMetadata) sendSiteMetadata(this.provider._rpcEngine);\n      inpageProvider._initializeState();\n      log.debug(\"Torus - injected provider\");\n    }\n  }, {\n    key: \"_showLoginPopup\",\n    value: function _showLoginPopup(calledFromEmbed, resolve, reject) {\n      var _this16 = this;\n      var loginHandler = function loginHandler(data) {\n        var err = data.err,\n          selectedAddress = data.selectedAddress;\n        if (err) {\n          log.error(err);\n          if (reject) reject(err);\n        }\n        // returns an array (cause accounts expects it)\n        else if (resolve) resolve([selectedAddress]);\n        if (_this16.isIframeFullScreen) _this16._displayIframe();\n      };\n      var oauthStream = this.communicationMux.getStream(\"oauth\");\n      if (!this.requestedVerifier) {\n        this._displayIframe(true);\n        handleStream(oauthStream, \"data\", loginHandler);\n        oauthStream.write({\n          name: \"oauth_modal\",\n          data: {\n            calledFromEmbed: calledFromEmbed\n          }\n        });\n      } else {\n        handleStream(oauthStream, \"data\", loginHandler);\n        var preopenInstanceId = getPreopenInstanceId();\n        this._handleWindow(preopenInstanceId);\n        oauthStream.write({\n          name: \"oauth\",\n          data: {\n            calledFromEmbed: calledFromEmbed,\n            verifier: this.requestedVerifier,\n            preopenInstanceId: preopenInstanceId,\n            login_hint: this.loginHint\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_createPopupBlockAlert\",\n    value: function _createPopupBlockAlert(preopenInstanceId, url) {\n      var _this17 = this;\n      var logoUrl = this._getLogoUrl();\n      var torusAlert = htmlToElement('<div id=\"torusAlert\" class=\"torus-alert--v2\">' + \"<div id=\\\"torusAlert__logo\\\"><img src=\\\"\".concat(logoUrl, \"\\\" /></div>\") + \"<div>\" + \"<h1 id=\\\"torusAlert__title\\\">\".concat(this.embedTranslations.actionRequired, \"</h1>\") + \"<p id=\\\"torusAlert__desc\\\">\".concat(this.embedTranslations.pendingAction, \"</p>\") + \"</div>\" + \"</div>\");\n      var successAlert = htmlToElement(\"<div><a id=\\\"torusAlert__btn\\\">\".concat(this.embedTranslations.continue, \"</a></div>\"));\n      var btnContainer = htmlToElement('<div id=\"torusAlert__btn-container\"></div>');\n      btnContainer.appendChild(successAlert);\n      torusAlert.appendChild(btnContainer);\n      var bindOnLoad = function bindOnLoad() {\n        successAlert.addEventListener(\"click\", function () {\n          _this17._handleWindow(preopenInstanceId, {\n            url: url,\n            target: \"_blank\",\n            features: FEATURES_CONFIRM_WINDOW\n          });\n          torusAlert.remove();\n          if (_this17.torusAlertContainer.children.length === 0) _this17.torusAlertContainer.style.display = \"none\";\n        });\n      };\n      this._setEmbedWhiteLabel(torusAlert);\n      var attachOnLoad = function attachOnLoad() {\n        _this17.torusAlertContainer.style.display = \"block\";\n        _this17.torusAlertContainer.appendChild(torusAlert);\n      };\n      runOnLoad(attachOnLoad);\n      runOnLoad(bindOnLoad);\n    }\n  }]);\n  return Torus;\n}();\nexport { BUTTON_POSITION, LOGIN_PROVIDER, PAYMENT_PROVIDER, SUPPORTED_PAYMENT_NETWORK, TORUS_BUILD_ENV, TorusInpageProvider, WALLET_OPENLOGIN_VERIFIER_MAP, WALLET_VERIFIERS, Torus as default };","map":{"version":3,"sources":["../src/interfaces.ts","../src/supportedCurrencies.ts","../src/config.ts","../src/embedUtils.ts","../src/loglevel.ts","../src/messages.ts","../src/utils.ts","../src/inpage-provider.ts","../src/integrity.ts","../src/PopupHandler.ts","../src/siteMetadata.ts","../src/embed.ts"],"names":["LOGIN_PROVIDER","GOOGLE","FACEBOOK","TWITCH","REDDIT","DISCORD","WALLET_VERIFIERS","EMAIL_PASSWORDLESS","WALLET_OPENLOGIN_VERIFIER_MAP","PAYMENT_PROVIDER","MOONPAY","WYRE","RAMPNETWORK","XANPOOL","MERCURYO","TRANSAK","BANXA","SUPPORTED_PAYMENT_NETWORK","MAINNET","MATIC","BSC_MAINNET","AVALANCHE_MAINNET","XDAI","TORUS_BUILD_ENV","PRODUCTION","DEVELOPMENT","BINANCE","TESTING","LRC","BETA","BNB","POLYGON","BUTTON_POSITION","BOTTOM_LEFT","TOP_LEFT","BOTTOM_RIGHT","TOP_RIGHT","CRYPTO_COMPARE_CURRENCIES","PROVIDER_SUPPORTED_FIAT_CURRENCIES","cryptoCompareCurrenciesSet","Set","supportedFiatCurrencies","provider","providerSupportedFiatCurrencies","filter","currency","has","paymentProviders","line1","line2","line3","supportPage","minOrderValue","maxOrderValue","validCurrencies","validCryptoCurrenciesByChain","value","display","includeFees","api","enforceMax","receiveHint","sell","translations","en","embed","continue","actionRequired","pendingAction","cookiesRequired","enableCookies","clickHere","de","ja","ko","zh","supportedVerifierList","Object","values","prodTorusUrl","localStorageKeyPrefix","runOnLoad","fn","Promise","resolve","reject","window","document","body","then","catch","addEventListener","htmlToElement","html","template","createElement","trimmedHtml","trim","innerHTML","content","firstChild","handleEvent","handle","eventName","handler","handlerArgs","handlerWrapper","removeEventListener","handleStream","chunk","removeListener","on","documentReady","readyState","loglevel","getLogger","errors","disconnected","permanentlyDisconnected","sendSiteMetadata","unsupportedSync","method","invalidDuplexStream","invalidOptions","maxEventListeners","shouldSendMetadata","invalidRequestArgs","invalidRequestMethod","invalidRequestParams","invalidLoggerObject","invalidLoggerMethod","info","connected","chainId","warnings","enableDeprecation","sendDeprecation","events","close","data","networkChanged","notification","publicConfigStore","config","validatePaymentProvider","params","isValid","keys","length","selectedProvider","selectedParams","fiatValue","requestedOrderAmount","parseFloat","toString","selectedCurrency","includes","selectedCryptoCurrency","flat","map","finalCryptoCurrency","toLowerCase","createErrorMiddleware","req","res","next","error","ethErrors","rpc","invalidRequest","message","done","log","logStreamDisconnectWarning","remoteLabel","emitter","warningMsg","stack","warn","listenerCount","emit","getPreopenInstanceId","Math","random","slice","getTorusUrl","buildEnv","integrity","version","versionUsed","response","get","useAPIKey","torusUrl","logLevel","getUserLanguage","userLanguage","navigator","language","userLanguages","split","prototype","hasOwnProperty","call","EMITTED_NOTIFICATIONS","NOOP","FEATURES_PROVIDER_CHANGE_WINDOW","FEATURES_DEFAULT_WALLET_WINDOW","FEATURES_CONFIRM_WINDOW","getPopupFeatures","dualScreenLeft","screenLeft","undefined","screenX","dualScreenTop","screenTop","screenY","w","h","width","innerWidth","documentElement","clientWidth","screen","height","innerHeight","clientHeight","systemZoom","left","abs","top","features","SafeEventEmitter","defaultMaxListeners","getRpcPromiseCallback","unwrapResult","Array","isArray","result","TorusInpageProvider","accounts","isConnected","isUnlocked","initialized","isPermanentlyDisconnected","hasEmittedConnection","enable","experimentalMethods","send","constructor","connectionStream","jsonRpcStreamName","_defineProperty","isDuplexStream","Error","messages","isTorus","setMaxListeners","_state","_defaultState","selectedAddress","networkVersion","_handleAccountsChanged","bind","_handleChainChanged","_handleUnlockStateChanged","_handleConnect","_handleDisconnect","_handleStreamDisconnect","_sendSync","_rpcRequest","_warnOfDeprecation","_initializeState","request","sendAsync","mux","ObjectMultiplex","pump","_publicConfigStore","ObservableStore","storageKey","createStream","storeAsStream","ignoreStream","jsonRpcConnection","createStreamMiddleware","stream","rpcEngine","JRPCEngine","push","createIdRemapMiddleware","middleware","_rpcEngine","payload","type","_sentWarnings","args","callback","addListener","listener","once","prependListener","prependOnceListener","isInternal","cb","_payload","jsonrpc","err","tryPreopenHandle","methodOrPayload","callbackOrArgs","id","debug","isRecoverable","errorMessage","EthereumRpcError","streamName","isEthAccounts","finalAccounts","account","dequal","defaults","options","algorithms","delimiter","full","hashes","internalHashes","forEach","algorithm","createHash","update","digest","sri","output","join","main","finalOptions","PopupHandler","EventEmitter","url","target","windowTimer","iClosedWindow","_setupTimer","Number","setInterval","closed","clearInterval","open","href","focus","redirect","locationReplaceOnRedirect","location","replace","imgExists","img","onload","onerror","src","e","getSiteName","siteName","querySelector","metaTitle","title","hostname","getSiteIcon","icon","from","querySelectorAll","find","_icon","Boolean","getSiteMetadata","name","engine","domainMetadata","originalError","defaultVerifiers","iframeIntegrity","expectedCacheControlHeader","UNSAFE_METHODS","preLoadIframe","torusIframeHtml","check","hash","crossOrigin","rel","relList","supports","head","appendChild","Torus","configuration","buttonPosition","buttonSize","modalZIndex","apiKey","isLoggedIn","isInitialized","torusWidgetVisibility","requestedVerifier","currentVerifier","setAPIKey","alertZIndex","isIframeFullScreen","enableLogging","enabledVerifiers","network","host","networkName","blockExplorer","ticker","tickerName","loginConfig","showTorusButton","whiteLabel","skipTKey","useWalletConnect","mfaLevel","isCustomLogin","setDefaultLevel","enableAll","disableAll","torusIframeUrl","URL","pathname","endsWith","torusIframe","torusAlertContainer","style","setProperty","link","setAttribute","styleLink","defaultLanguage","customTranslations","mergedTranslations","deepmerge","languageTranslations","embedTranslations","handleSetup","_setupWeb3","initStream","communicationMux","getStream","success","_displayIframe","write","fetchUrl","resp","fetch","cache","headers","text","calculatedIntegrity","generateIntegrity","clearInit","login","verifier","login_hint","loginHint","ethereum","logout","logOutStream","statusStream","statusStreamHandler","status","loggedIn","isElement","element","Element","HTMLDocument","contains","remove","torusAlert","hideTorusButton","_sendWidgetVisibilityStatus","setProvider","rest","providerChangeStream","preopenInstanceId","_handleWindow","override","showWallet","path","showWalletStream","finalPath","showWalletHandler","instanceId","finalUrl","searchParams","append","x","walletWindow","getPublicAddress","verifierId","isExtended","walletVerifier","openloginVerifier","getUserInfo","userInfoAccessStream","userInfoAccessHandler","approved","rejected","newRequest","userInfoStream","userInfoHandler","handlerChunk","initiateTopup","JSON","stringify","topupStream","topupHandler","loginParams","privateKey","userInfo","Buffer","loginPrivKeyStream","loginHandler","walletConnectStream","walletConnectHandler","windowStream","handledWindow","_createPopupBlockAlert","closeHandler","_ref3","receivedId","_setEmbedWhiteLabel","theme","isDark","colors","classList","add","torusBrand1","torusGray2","_getLogoUrl","logoUrl","logoLight","logoDark","torusWidgetVisibilityStream","isFull","size","right","bottom","assign","metamaskStream","BasePostMessageStream","targetWindow","contentWindow","targetOrigin","origin","communicationStream","inpageProvider","detectAccountRequestPrototypeModifier","m","originalMethod","providerFunc","apply","setTimeout","handleLoginCb","_","_showLoginPopup","isLoginCallback","proxiedInpageProvider","Proxy","deleteProperty","setupMultiplex","widgetStream","calledFromEmbed","oauthStream","successAlert","btnContainer","bindOnLoad","children","attachOnLoad"],"mappings":"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L,KAAK,EACL,KAAK,EACL,MAAM,EACN,MAAM,EACN,OAAO,EACP,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,QAAQ,EACR,OAAO,EACP,KAAK,EACL,KAAK,EACL,QAAQ,EACR,IAAI,EACJ,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,IAAI,EACJ,KAAK,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,IAAI,EACJ,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,MAAM,EACN,MAAM,EACN,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,UAAU,EACV,MAAM,EACN,KAAK,EACL,KAAK,EACL,SAAS,EACT,QAAQ,EACR,KAAK,EACL,QAAQ,EACR,MAAM,EACN,MAAM,EACN,OAAO,EACP,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,OAAO,EACP,KAAK,EACL,MAAM,EACN,MAAM,EACN,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EAC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","sourcesContent":["import _objectWithoutProperties from '@babel/runtime/helpers/objectWithoutProperties';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { get, setAPIKey } from '@toruslabs/http-helpers';\nimport { SafeEventEmitter, ObjectMultiplex, createStreamMiddleware, JRPCEngine, createIdRemapMiddleware, BasePostMessageStream, setupMultiplex } from '@toruslabs/openlogin-jrpc';\nimport deepmerge from 'lodash.merge';\nimport { ObservableStore, storeAsStream } from '@metamask/obs-store';\nimport { ethErrors, EthereumRpcError } from 'eth-rpc-errors';\nimport dequal from 'fast-deep-equal';\nimport { duplex } from 'is-stream';\nimport pump from 'pump';\nimport loglevel from 'loglevel';\nimport createHash from 'create-hash';\nimport { EventEmitter } from 'events';\n\nconst LOGIN_PROVIDER = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  TWITCH: \"twitch\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\"\n};\nconst WALLET_VERIFIERS = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  TWITCH: \"twitch\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\",\n  EMAIL_PASSWORDLESS: \"torus-auth0-email-passwordless\"\n};\nconst WALLET_OPENLOGIN_VERIFIER_MAP = {\n  [WALLET_VERIFIERS.GOOGLE]: \"tkey-google\",\n  [WALLET_VERIFIERS.FACEBOOK]: \"tkey-facebook\",\n  [WALLET_VERIFIERS.TWITCH]: \"tkey-twitch\",\n  [WALLET_VERIFIERS.REDDIT]: \"tkey-reddit\",\n  [WALLET_VERIFIERS.DISCORD]: \"tkey-discord\",\n  [WALLET_VERIFIERS.EMAIL_PASSWORDLESS]: \"tkey-auth0-email-passwordless\"\n};\nconst PAYMENT_PROVIDER = {\n  MOONPAY: \"moonpay\",\n  WYRE: \"wyre\",\n  RAMPNETWORK: \"rampnetwork\",\n  XANPOOL: \"xanpool\",\n  MERCURYO: \"mercuryo\",\n  TRANSAK: \"transak\",\n  BANXA: \"banxa\"\n};\nconst SUPPORTED_PAYMENT_NETWORK = {\n  MAINNET: \"mainnet\",\n  MATIC: \"matic\",\n  BSC_MAINNET: \"bsc_mainnet\",\n  AVALANCHE_MAINNET: \"avalanche_mainnet\",\n  XDAI: \"xdai\"\n};\nconst TORUS_BUILD_ENV = {\n  PRODUCTION: \"production\",\n  DEVELOPMENT: \"development\",\n  BINANCE: \"binance\",\n  TESTING: \"testing\",\n  LRC: \"lrc\",\n  BETA: \"beta\",\n  BNB: \"bnb\",\n  POLYGON: \"polygon\"\n};\nconst BUTTON_POSITION = {\n  BOTTOM_LEFT: \"bottom-left\",\n  TOP_LEFT: \"top-left\",\n  BOTTOM_RIGHT: \"bottom-right\",\n  TOP_RIGHT: \"top-right\"\n};\n\n/**\n * From https://min-api.cryptocompare.com/data/v2/pair/mapping/fsym?fsym=BTC&extraParams=YourSite\n * GET https://min-api.cryptocompare.com/data/v2/pair/mapping/fsym?fsym=BTC\n * Then map over returned entries, picking tsym\n *\n * Last updated: Date of commit\n */\nconst CRYPTO_COMPARE_CURRENCIES = [\"ETH\", \"USDT\", \"USDC\", \"TUSD\", \"EOSDT\", \"USD\", \"DAI\", \"GUSD\", \"DKKT\", \"PAX\", \"ILS\", \"RUB\", \"BYN\", \"EUR\", \"GBP\", \"JPY\", \"KRW\", \"PLN\", \"MXN\", \"AUD\", \"BRL\", \"CAD\", \"CHF\", \"KPW\", \"LAK\", \"LBP\", \"LKR\", \"XOF\", \"CNHT\", \"DOGE\", \"UAH\", \"TRY\", \"HKD\", \"XJP\", \"SGD\", \"USC\", \"NZD\", \"NGN\", \"RUR\", \"COP\", \"GHS\", \"EGP\", \"IDR\", \"BHD\", \"CRC\", \"PEN\", \"AED\", \"DOP\", \"PKR\", \"HUF\", \"VND\", \"XAR\", \"LTC\", \"RON\", \"OMR\", \"MYR\", \"DKK\", \"UGX\", \"ZMW\", \"SAR\", \"SEK\", \"GEL\", \"RWF\", \"IRR\", \"TZS\", \"CNY\", \"VEF\", \"BDT\", \"HRK\", \"CLP\", \"THB\", \"XAF\", \"ARS\", \"UYU\", \"SZL\", \"KZT\", \"NOK\", \"KES\", \"PAB\", \"INR\", \"CZK\", \"MAD\", \"TWD\", \"PHP\", \"ZAR\", \"BOB\", \"CDF\", \"DASH\", \"VES\", \"ISK\", \"MWK\", \"BAM\", \"TTD\", \"XRP\", \"JOD\", \"RSD\", \"HNL\", \"BGN\", \"GTQ\", \"BWP\", \"XMR\", \"MMK\", \"QAR\", \"AOA\", \"KWD\", \"MUR\", \"WUSD\", \"WEUR\", \"WAVES\", \"WTRY\", \"LRD\", \"LSL\", \"LYD\", \"AWG\", \"MDL\", \"BTO\", \"EURS\", \"CHFT\", \"MKD\", \"MNT\", \"MOP\", \"MRO\", \"MVR\", \"VOLLAR\", \"CKUSD\", \"KHR\", \"VUV\", \"BITCNY\", \"QC\", \"BBD\", \"NAD\", \"NPR\", \"PGK\", \"PYG\", \"BIF\", \"BMD\", \"BND\", \"XLM\", \"BNB\", \"SCR\", \"BAT\", \"CRO\", \"HT\", \"KCS\", \"LEO\", \"LINK\", \"MKR\", \"NPXS\", \"OMG\", \"REP\", \"ZB\", \"ZIL\", \"ZRX\", \"BCH\", \"BZD\", \"CUP\", \"CVE\", \"DJF\", \"DZD\", \"ERN\", \"ETB\", \"FJD\", \"FKP\", \"BUSD\", \"ANCT\", \"ALL\", \"AMD\", \"ANG\", \"CNYX\", \"IQD\", \"UZS\", \"TND\", \"GGP\", \"XAU\", \"KGS\", \"GIP\", \"JMD\", \"ZEC\", \"USDP\", \"BSV\", \"EMC2\", \"SNT\", \"GTO\", \"POWR\", \"EUSD\", \"EURT\", \"BCY\", \"BTS\", \"ATM\", \"BLOCKPAY\", \"ARDR\", \"AMP\", \"B2X\", \"BITGOLD\", \"BITEUR\", \"ATB\", \"BITUSD\", \"AGRS\", \"DFXT\", \"HIKEN\", \"BIX\", \"KNC\", \"EOS\", \"COB\", \"COSS\", \"BMH\", \"NANO\", \"BDG\", \"BNT\", \"XVG\", \"LKK1Y\", \"LKK\", \"USDK\", \"EURN\", \"NZDT\", \"JSE\", \"GMD\", \"GNF\", \"GYD\", \"YER\", \"XPF\", \"HTG\", \"SLL\", \"SOS\", \"WST\", \"SVC\", \"SYP\", \"NEO\", \"KMF\", \"JUMP\", \"AYA\", \"BLAST\", \"WGR\", \"BCN\", \"BTG\", \"URALS\", \"INN\", \"USDQ\", \"CNH\", \"HUSD\", \"BKRW\", \"NZDX\", \"EURX\", \"CADX\", \"USDEX\", \"JPYX\", \"AUDX\", \"VNDC\", \"EON\", \"GBPX\", \"CHFX\", \"USDJ\", \"IDRT\", \"USDS\", \"USDN\", \"BIDR\", \"IDK\", \"BSD\", \"BTN\", \"KYD\", \"NIO\", \"SBD\", \"SDG\", \"SHP\", \"TOP\", \"XCD\", \"XCHF\", \"CNYT\", \"GYEN\", \"ZUSD\", \"GOLD\", \"TRX\", \"TRYB\", \"PLATC\", \"STRAX\", \"UST\", \"GLM\", \"VAI\", \"BRZ\", \"DDRST\", \"XAUT\", \"MIM\"];\n/**\n * currencies supported by the payment provider\n * Last updated: Date of commit\n */\nconst PROVIDER_SUPPORTED_FIAT_CURRENCIES = {\n  // https://integrations.simplex.com/supported_currencies\n  // https://support.moonpay.com/hc/en-gb/articles/360011931457-Which-fiat-currencies-are-supported-\n  [PAYMENT_PROVIDER.MOONPAY]: [\"AUD\", \"BGN\", \"BRL\", \"CAD\", \"CHF\", \"CNY\", \"COP\", \"CZK\", \"DKK\", \"DOP\", \"EGP\", \"EUR\", \"GBP\", \"HKD\", \"HRK\", \"IDR\", \"ILS\", \"JPY\", \"JOD\", \"KES\", \"KRW\", \"KWD\", \"LKR\", \"MAD\", \"MXN\", \"MYR\", \"NGN\", \"NOK\", \"NZD\", \"OMR\", \"PEN\", \"PKR\", \"PLN\", \"RON\", \"RUB\", \"SEK\", \"SGD\", \"THB\", \"TRY\", \"TWD\", \"USD\", \"VND\", \"ZAR\"],\n  /**\n   * https://docs.sendwyre.com/docs/supported-currencies#fiat\n   * The ones where credit card is supported\n   */\n  [PAYMENT_PROVIDER.WYRE]: [\"USD\", \"EUR\", \"GBP\", \"AUD\", \"CAD\", \"NZD\", \"ARS\", \"BRL\", \"CHF\", \"CLP\", \"COP\", \"CZK\", \"DKK\", \"HKD\", \"ILS\", \"INR\", \"ISK\", \"JPY\", \"KRW\", \"MXN\", \"MYR\", \"NOK\", \"PHP\", \"PLN\", \"SEK\", \"THB\", \"VND\", \"ZAR\"],\n  // https://support.ramp.network/en/articles/471-why-am-i-paying-in-usd-eur-gbp\n  [PAYMENT_PROVIDER.RAMPNETWORK]: [\"USD\", \"EUR\", \"GBP\"],\n  // From https://xanpool.com/ fiat select dropdown\n  [PAYMENT_PROVIDER.XANPOOL]: [\"SGD\", \"HKD\", \"THB\", \"PHP\", \"INR\", \"IDR\", \"MYR\", \"AUD\", \"NZD\", \"KRW\"],\n  // https://support.aax.com/en/articles/5295762-mercuryo\n  // RUB / UAH currently not supported\n  [PAYMENT_PROVIDER.MERCURYO]: [\"EUR\", \"USD\", \"GBP\", \"TRY\", \"JPY\", \"BRL\", \"NGN\", \"VND\", \"MXN\", \"KRW\"],\n  /**\n   * https://support.transak.com/hc/en-us/articles/360020615578-Credit-and-Debit-Card-Payments-through-Transak\n   * or\n   * https://transak.stoplight.io/docs/transak-docs/b3A6OTk1ODQ0-2-get-fiat-currencies\n   */\n  [PAYMENT_PROVIDER.TRANSAK]: [\"ARS\", \"AUD\", \"BBD\", \"BGN\", \"BMD\", \"BRL\", \"CAD\", \"CHF\", \"CLP\", \"CRC\", \"CZK\", \"DKK\", \"DOP\", \"EUR\", \"FJD\", \"FKP\", \"GBP\", \"GIP\", \"HRK\", \"HUF\", \"IDR\", \"ILS\", \"ISK\", \"JMD\", \"JPY\", \"KES\", \"KRW\", \"MDL\", \"MXN\", \"MYR\", \"NOK\", \"NZD\", \"PEN\", \"PHP\", \"PLN\", \"PYG\", \"RON\", \"SEK\", \"SGD\", \"THB\", \"TRY\", \"TZS\", \"USD\", \"ZAR\"],\n  [PAYMENT_PROVIDER.BANXA]: [\"EUR\", \"GBP\", \"USD\"]\n};\nconst cryptoCompareCurrenciesSet = new Set(CRYPTO_COMPARE_CURRENCIES);\n/**\n * Fiat currencies that we support\n */\nfunction supportedFiatCurrencies(provider) {\n  const providerSupportedFiatCurrencies = PROVIDER_SUPPORTED_FIAT_CURRENCIES[provider];\n  return providerSupportedFiatCurrencies.filter(currency => cryptoCompareCurrenciesSet.has(currency));\n}\n\nconst paymentProviders$1 = {\n  [PAYMENT_PROVIDER.MOONPAY]: {\n    line1: \"Credit/ Debit Card/ Apple Pay\",\n    line2: \"4.5% or 5 USD\",\n    line3: \"2,000€/day, 10,000€/mo\",\n    supportPage: \"https://help.moonpay.io/en/\",\n    minOrderValue: 24.99,\n    maxOrderValue: 50000,\n    validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.MOONPAY),\n    validCryptoCurrenciesByChain: {\n      [SUPPORTED_PAYMENT_NETWORK.MAINNET]: [{\n        value: \"aave\",\n        display: \"AAVE\"\n      }, {\n        value: \"bat\",\n        display: \"BAT\"\n      }, {\n        value: \"dai\",\n        display: \"DAI\"\n      }, {\n        value: \"eth\",\n        display: \"ETH\"\n      }, {\n        value: \"mkr\",\n        display: \"MKR\"\n      }, {\n        value: \"matic\",\n        display: \"MATIC\"\n      }, {\n        value: \"usdt\",\n        display: \"USDT\"\n      }, {\n        value: \"usdc\",\n        display: \"USDC\"\n      }],\n      [SUPPORTED_PAYMENT_NETWORK.MATIC]: [{\n        value: \"eth_polygon\",\n        display: \"ETH\"\n      }, {\n        value: \"matic_polygon\",\n        display: \"MATIC\"\n      }, {\n        value: \"usdc_polygon\",\n        display: \"USDC\"\n      }],\n      [SUPPORTED_PAYMENT_NETWORK.BSC_MAINNET]: [{\n        value: \"bnb_bsc\",\n        display: \"BNB\"\n      }, {\n        value: \"busd_bsc\",\n        display: \"BUSD\"\n      }],\n      [SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET]: [{\n        value: \"avax_cchain\",\n        display: \"AVAX\"\n      }]\n    },\n    includeFees: true,\n    api: true,\n    enforceMax: false\n  },\n  [PAYMENT_PROVIDER.WYRE]: {\n    line1: \"Apple Pay/ Debit/ Credit Card\",\n    line2: \"4.9% + 30¢ or 5 USD\",\n    line3: \"$250/day\",\n    supportPage: \"https://support.sendwyre.com/en/\",\n    minOrderValue: 5,\n    maxOrderValue: 500,\n    validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.WYRE),\n    validCryptoCurrenciesByChain: {\n      [SUPPORTED_PAYMENT_NETWORK.MAINNET]: [{\n        value: \"AAVE\",\n        display: \"AAVE\"\n      }, {\n        value: \"BAT\",\n        display: \"BAT\"\n      }, {\n        value: \"BUSD\",\n        display: \"BUSD\"\n      }, {\n        value: \"DAI\",\n        display: \"DAI\"\n      }, {\n        value: \"ETH\",\n        display: \"ETH\"\n      }, {\n        value: \"MKR\",\n        display: \"MKR\"\n      }, {\n        value: \"UNI\",\n        display: \"UNI\"\n      }, {\n        value: \"USDC\",\n        display: \"USDC\"\n      }, {\n        value: \"USDT\",\n        display: \"USDT\"\n      }],\n      [SUPPORTED_PAYMENT_NETWORK.MATIC]: [{\n        value: \"MUSDC\",\n        display: \"USDC\"\n      }],\n      // AVAXC? or AVAX?\n      [SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET]: [{\n        value: \"AVAXC\",\n        display: \"AVAXC\"\n      }]\n    },\n    includeFees: false,\n    api: true,\n    enforceMax: false\n  },\n  [PAYMENT_PROVIDER.RAMPNETWORK]: {\n    line1: \"Debit Card/ <br>Apple Pay/ Bank transfer\",\n    line2: \"0.49% - 2.9%\",\n    line3: \"5,000€/purchase, 20,000€/mo\",\n    supportPage: \"https://instant.ramp.network/\",\n    minOrderValue: 50,\n    maxOrderValue: 20000,\n    validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.RAMPNETWORK),\n    validCryptoCurrenciesByChain: {\n      [SUPPORTED_PAYMENT_NETWORK.MAINNET]: [{\n        value: \"ETH\",\n        display: \"ETH\"\n      }, {\n        value: \"DAI\",\n        display: \"DAI\"\n      }, {\n        value: \"USDC\",\n        display: \"USDC\"\n      }, {\n        value: \"USDT\",\n        display: \"USDT\"\n      }],\n      [SUPPORTED_PAYMENT_NETWORK.MATIC]: [{\n        value: \"MATIC_DAI\",\n        display: \"DAI\"\n      }, {\n        value: \"MATIC_MATIC\",\n        display: \"MATIC\"\n      }, {\n        value: \"MATIC_USDC\",\n        display: \"USDC\"\n      }],\n      // what about AVAXC?\n      [SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET]: [{\n        value: \"AVAX\",\n        display: \"AVAX\"\n      }]\n      // Temporary unavailable\n      // [SUPPORTED_PAYMENT_NETWORK.XDAI]: [{ value: 'XDAI_XDAI', display: 'XDAI' }],\n    },\n\n    includeFees: true,\n    api: true,\n    receiveHint: \"walletTopUp.receiveHintRamp\",\n    enforceMax: false\n  },\n  [PAYMENT_PROVIDER.XANPOOL]: {\n    line1: \"PayNow/ InstaPay/ FPS/ GoJekPay/ UPI/ PromptPay/ <br>ViettelPay/ DuitNow\",\n    line2: \"2.5% buying, 3% selling\",\n    line3: \"$2,500 / day\",\n    supportPage: \"mailto:support@xanpool.com\",\n    minOrderValue: 100,\n    maxOrderValue: 2500,\n    validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.XANPOOL),\n    validCryptoCurrenciesByChain: {\n      [SUPPORTED_PAYMENT_NETWORK.MAINNET]: [{\n        value: \"ETH\",\n        display: \"ETH\"\n      }, {\n        value: \"USDT\",\n        display: \"USDT\"\n      }]\n    },\n    includeFees: true,\n    api: true,\n    sell: true,\n    enforceMax: false\n  },\n  [PAYMENT_PROVIDER.MERCURYO]: {\n    line1: \"Credit/ Debit Card/ Apple Pay\",\n    line2: \"3.95% or 4 USD\",\n    line3: \"10,000€/day, 25,000€/mo\",\n    supportPage: \"mailto:support@mercuryo.io\",\n    minOrderValue: 30,\n    maxOrderValue: 5000,\n    validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.MERCURYO),\n    validCryptoCurrenciesByChain: {\n      [SUPPORTED_PAYMENT_NETWORK.MAINNET]: [{\n        value: \"ETH\",\n        display: \"ETH\"\n      }, {\n        value: \"BAT\",\n        display: \"BAT\"\n      }, {\n        value: \"USDT\",\n        display: \"USDT\"\n      }, {\n        value: \"DAI\",\n        display: \"DAI\"\n      }],\n      [SUPPORTED_PAYMENT_NETWORK.BSC_MAINNET]: [{\n        value: \"BNB\",\n        display: \"BNB\"\n      }, {\n        value: \"BUSD\",\n        display: \"BUSD\"\n      }, {\n        value: \"1INCH\",\n        display: \"1INCH\"\n      }]\n    },\n    includeFees: true,\n    api: true,\n    enforceMax: false\n  },\n  [PAYMENT_PROVIDER.TRANSAK]: {\n    line1: \"Apple & Google Pay / Credit/Debit Card<br/>Bangkok Bank Mobile & iPay<br/>Bank Transfer (sepa/gbp) / SCB Mobile & Easy\",\n    line2: \"0.99% - 5.5% or 5 USD\",\n    line3: \"$5,000/day, $28,000/mo\",\n    supportPage: \"https://support.transak.com/hc/en-US\",\n    minOrderValue: 30,\n    maxOrderValue: 500,\n    validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.TRANSAK),\n    validCryptoCurrenciesByChain: {\n      [SUPPORTED_PAYMENT_NETWORK.MAINNET]: [{\n        value: \"AAVE\",\n        display: \"AAVE\"\n      }, {\n        value: \"DAI\",\n        display: \"DAI\"\n      }, {\n        value: \"ETH\",\n        display: \"ETH\"\n      }, {\n        value: \"USDC\",\n        display: \"USDC\"\n      }, {\n        value: \"USDT\",\n        display: \"USDT\"\n      }],\n      [SUPPORTED_PAYMENT_NETWORK.MATIC]: [{\n        value: \"AAVE\",\n        display: \"AAVE\"\n      }, {\n        value: \"DAI\",\n        display: \"DAI\"\n      }, {\n        value: \"MATIC\",\n        display: \"MATIC\"\n      }, {\n        value: \"USDC\",\n        display: \"USDC\"\n      }, {\n        value: \"USDT\",\n        display: \"USDT\"\n      }, {\n        value: \"WETH\",\n        display: \"WETH\"\n      }],\n      [SUPPORTED_PAYMENT_NETWORK.BSC_MAINNET]: [{\n        value: \"BNB\",\n        display: \"BNB\"\n      }, {\n        value: \"BUSD\",\n        display: \"BUSD\"\n      }],\n      [SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET]: [{\n        value: \"AVAX\",\n        display: \"AVAX\"\n      }]\n    },\n    includeFees: true,\n    enforceMax: true\n  },\n  [PAYMENT_PROVIDER.BANXA]: {\n    line1: \"Debit Card/ <br>Apple Pay/ Bank transfer\",\n    line2: \"0.49% - 2.9%\",\n    line3: \"5,000€/purchase, 20,000€/mo\",\n    supportPage: \"https://support.banxa.com\",\n    minOrderValue: 20,\n    maxOrderValue: 15000,\n    validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.BANXA),\n    validCryptoCurrenciesByChain: {\n      [SUPPORTED_PAYMENT_NETWORK.MAINNET]: [{\n        value: \"ETH\",\n        display: \"ETH\"\n      }, {\n        value: \"USDT\",\n        display: \"USDT\"\n      }, {\n        value: \"BUSD\",\n        display: \"BUSD\"\n      }, {\n        value: \"LINK\",\n        display: \"LINK\"\n      }, {\n        value: \"USDC\",\n        display: \"USDC\"\n      }, {\n        value: \"CHZ\",\n        display: \"CHZ\"\n      }, {\n        value: \"BAT\",\n        display: \"BAT\"\n      }, {\n        value: \"MANA\",\n        display: \"MANA\"\n      }, {\n        value: \"AAVE\",\n        display: \"AAVE\"\n      }, {\n        value: \"COMP\",\n        display: \"COMP\"\n      }, {\n        value: \"ENJ\",\n        display: \"ENJ\"\n      }],\n      [SUPPORTED_PAYMENT_NETWORK.MATIC]: [{\n        value: \"MATIC\",\n        display: \"MATIC\"\n      }]\n      // [SUPPORTED_PAYMENT_NETWORK.BSC_MAINNET]: [{ value: \"BNB\", display: \"BNB\" }],\n    },\n\n    includeFees: true,\n    enforceMax: true\n  }\n};\nconst translations = {\n  en: {\n    embed: {\n      continue: \"Continue\",\n      actionRequired: \"Authorization required\",\n      pendingAction: \"Click continue to proceed with your request in a popup\",\n      cookiesRequired: \"Cookies Required\",\n      enableCookies: \"Please enable cookies in your browser preferences to access Torus\",\n      clickHere: \"More Info\"\n    }\n  },\n  de: {\n    embed: {\n      continue: \"Fortsetzen\",\n      actionRequired: \"Autorisierung erforderlich\",\n      pendingAction: \"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren\",\n      cookiesRequired: \"Cookies benötigt\",\n      enableCookies: \"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen\",\n      clickHere: \"Mehr Info\"\n    }\n  },\n  ja: {\n    embed: {\n      continue: \"継続する\",\n      actionRequired: \"認証が必要です\",\n      pendingAction: \"続行をクリックして、ポップアップでリクエストを続行します\",\n      cookiesRequired: \"必要なクッキー\",\n      enableCookies: \"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。\",\n      clickHere: \"詳しくは\"\n    }\n  },\n  ko: {\n    embed: {\n      continue: \"계속하다\",\n      actionRequired: \"승인 필요\",\n      pendingAction: \"팝업에서 요청을 진행하려면 계속을 클릭하십시오.\",\n      cookiesRequired: \"쿠키 필요\",\n      enableCookies: \"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.\",\n      clickHere: \"더 많은 정보\"\n    }\n  },\n  zh: {\n    embed: {\n      continue: \"继续\",\n      actionRequired: \"需要授权\",\n      pendingAction: \"单击继续以在弹出窗口中继续您的请求\",\n      cookiesRequired: \"必填Cookie\",\n      enableCookies: \"请在您的浏览器首选项中启用cookie以访问Torus。\",\n      clickHere: \"更多信息\"\n    }\n  }\n};\nvar configuration = {\n  supportedVerifierList: Object.values(WALLET_VERIFIERS),\n  paymentProviders: paymentProviders$1,\n  api: \"https://api.tor.us\",\n  translations,\n  prodTorusUrl: \"\",\n  localStorageKeyPrefix: `torus-`\n};\n\nconst runOnLoad = fn => new Promise((resolve, reject) => {\n  if (window.document.body != null) {\n    Promise.resolve(fn()).then(resolve).catch(reject);\n  } else {\n    window.document.addEventListener(\"DOMContentLoaded\", () => {\n      Promise.resolve(fn()).then(resolve).catch(reject);\n    });\n  }\n});\nconst htmlToElement = html => {\n  const template = window.document.createElement(\"template\");\n  const trimmedHtml = html.trim(); // Never return a text node of whitespace as the result\n  template.innerHTML = trimmedHtml;\n  return template.content.firstChild;\n};\nconst handleEvent = function (handle, eventName, handler) {\n  for (var _len = arguments.length, handlerArgs = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    handlerArgs[_key - 3] = arguments[_key];\n  }\n  const handlerWrapper = () => {\n    handler(...handlerArgs);\n    handle.removeEventListener(eventName, handlerWrapper);\n  };\n  handle.addEventListener(eventName, handlerWrapper);\n};\nconst handleStream = (handle, eventName, handler) => {\n  const handlerWrapper = chunk => {\n    handler(chunk);\n    handle.removeListener(eventName, handlerWrapper);\n  };\n  handle.on(eventName, handlerWrapper);\n};\nasync function documentReady() {\n  return new Promise(resolve => {\n    if (document.readyState !== \"loading\") {\n      resolve();\n    } else {\n      handleEvent(document, \"DOMContentLoaded\", resolve);\n    }\n  });\n}\n\nvar log = loglevel.getLogger(\"torus-embed\");\n\nvar messages = {\n  errors: {\n    disconnected: () => \"Torus: Lost connection to Torus.\",\n    permanentlyDisconnected: () => \"Torus: Disconnected from iframe. Page reload required.\",\n    sendSiteMetadata: () => \"Torus: Failed to send site metadata. This is an internal error, please report this bug.\",\n    unsupportedSync: method => `Torus: The Torus Ethereum provider does not support synchronous methods like ${method} without a callback parameter.`,\n    invalidDuplexStream: () => \"Must provide a Node.js-style duplex stream.\",\n    invalidOptions: (maxEventListeners, shouldSendMetadata) => `Invalid options. Received: { maxEventListeners: ${maxEventListeners}, shouldSendMetadata: ${shouldSendMetadata} }`,\n    invalidRequestArgs: () => `Expected a single, non-array, object argument.`,\n    invalidRequestMethod: () => `'args.method' must be a non-empty string.`,\n    invalidRequestParams: () => `'args.params' must be an object or array if provided.`,\n    invalidLoggerObject: () => `'args.logger' must be an object if provided.`,\n    invalidLoggerMethod: method => `'args.logger' must include required method '${method}'.`\n  },\n  info: {\n    connected: chainId => `Torus: Connected to chain with ID \"${chainId}\".`\n  },\n  warnings: {\n    // deprecated methods\n    enableDeprecation: 'Torus: \"\"ethereum.enable()\" is deprecated and may be removed in the future. ' + 'Please use \"ethereum.send(\"eth_requestAccounts\")\" instead. For more information, see: https://eips.ethereum.org/EIPS/eip-1102',\n    sendDeprecation: 'Torus: \"ethereum.send(...)\" is deprecated and may be removed in the future.' + ' Please use \"ethereum.sendAsync(...)\" or \"ethereum.request(...)\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',\n    events: {\n      close: 'Torus: The event \"close\" is deprecated and may be removed in the future. Please use \"disconnect\" instead.' + \"\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193\",\n      data: 'Torus: The event \"data\" is deprecated and will be removed in the future.' + 'Use \"message\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message',\n      networkChanged: 'Torus: The event \"networkChanged\" is deprecated and may be removed in the future.' + ' Please use \"chainChanged\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',\n      notification: 'Torus: The event \"notification\" is deprecated and may be removed in the future. ' + 'Please use \"message\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193'\n    },\n    publicConfigStore: 'Torus: The property \"publicConfigStore\" is deprecated and WILL be removed in the future.'\n  }\n};\n\nconst {\n  paymentProviders\n} = configuration;\nconst validatePaymentProvider = (provider, params) => {\n  const errors = {};\n  if (!provider) {\n    return {\n      errors,\n      isValid: true\n    };\n  }\n  if (provider && !paymentProviders[provider]) {\n    errors.provider = \"Invalid Provider\";\n    return {\n      errors,\n      isValid: Object.keys(errors).length === 0\n    };\n  }\n  const selectedProvider = paymentProviders[provider];\n  const selectedParams = params || {};\n  // set default values\n  // if (!selectedParams.selectedCurrency) [selectedParams.selectedCurrency] = selectedProvider.validCurrencies\n  // if (!selectedParams.fiatValue) selectedParams.fiatValue = selectedProvider.minOrderValue\n  // if (!selectedParams.selectedCryptoCurrency) [selectedParams.selectedCryptoCurrency] = selectedProvider.validCryptoCurrencies\n  // validations\n  if (selectedParams.fiatValue) {\n    const requestedOrderAmount = +parseFloat(selectedParams.fiatValue.toString()) || 0;\n    if (requestedOrderAmount < selectedProvider.minOrderValue) errors.fiatValue = \"Requested amount is lower than supported\";\n    if (requestedOrderAmount > selectedProvider.maxOrderValue && selectedProvider.enforceMax) errors.fiatValue = \"Requested amount is higher than supported\";\n  }\n  if (selectedParams.selectedCurrency && !selectedProvider.validCurrencies.includes(selectedParams.selectedCurrency)) {\n    errors.selectedCurrency = \"Unsupported currency\";\n  }\n  if (selectedParams.selectedCryptoCurrency) {\n    const validCryptoCurrenciesByChain = Object.values(selectedProvider.validCryptoCurrenciesByChain).flat().map(currency => currency.value);\n    const finalCryptoCurrency = provider === PAYMENT_PROVIDER.MOONPAY ? selectedParams.selectedCryptoCurrency.toLowerCase() : selectedParams.selectedCryptoCurrency;\n    if (validCryptoCurrenciesByChain && !validCryptoCurrenciesByChain.includes(finalCryptoCurrency)) errors.selectedCryptoCurrency = \"Unsupported cryptoCurrency\";\n  }\n  return {\n    errors,\n    isValid: Object.keys(errors).length === 0\n  };\n};\n// utility functions\n/**\n * json-rpc-engine middleware that logs RPC errors and and validates req.method.\n *\n * @param log - The logging API to use.\n * @returns  json-rpc-engine middleware function\n */\nfunction createErrorMiddleware() {\n  return (req, res, next) => {\n    // json-rpc-engine will terminate the request when it notices this error\n    if (typeof req.method !== \"string\" || !req.method) {\n      res.error = ethErrors.rpc.invalidRequest({\n        message: `The request 'method' must be a non-empty string.`,\n        data: req\n      });\n    }\n    next(done => {\n      const {\n        error\n      } = res;\n      if (!error) {\n        return done();\n      }\n      log.error(`MetaMask - RPC Error: ${error.message}`, error);\n      return done();\n    });\n  };\n}\n/**\n * Logs a stream disconnection error. Emits an 'error' if given an\n * EventEmitter that has listeners for the 'error' event.\n *\n * @param log - The logging API to use.\n * @param remoteLabel - The label of the disconnected stream.\n * @param error - The associated error to log.\n * @param emitter - The logging API to use.\n */\nfunction logStreamDisconnectWarning(remoteLabel, error, emitter) {\n  let warningMsg = `MetaMask: Lost connection to \"${remoteLabel}\".`;\n  if (error?.stack) {\n    warningMsg += `\\n${error.stack}`;\n  }\n  log.warn(warningMsg);\n  if (emitter && emitter.listenerCount(\"error\") > 0) {\n    emitter.emit(\"error\", warningMsg);\n  }\n}\nconst getPreopenInstanceId = () => Math.random().toString(36).slice(2);\nconst getTorusUrl = async (buildEnv, integrity) => {\n  let torusUrl;\n  let logLevel;\n  // Do not change this line\n  const version = \"1.41.1\";\n  let versionUsed = integrity.version || version;\n  try {\n    if ((buildEnv === \"binance\" || buildEnv === \"production\") && !integrity.version) {\n      let response;\n      if (!configuration.prodTorusUrl) response = await get(`${configuration.api}/latestversion?name=@toruslabs/torus-embed&version=${version}`, {}, {\n        useAPIKey: true\n      });else response = {\n        data: configuration.prodTorusUrl\n      };\n      versionUsed = response.data;\n      // eslint-disable-next-line require-atomic-updates\n      configuration.prodTorusUrl = response.data;\n    }\n  } catch (error) {\n    log.error(error, \"unable to fetch latest version\");\n  }\n  log.info(\"version used: \", versionUsed);\n  switch (buildEnv) {\n    case \"binance\":\n      torusUrl = `https://binance.tor.us/v${versionUsed}`;\n      logLevel = \"info\";\n      break;\n    case \"testing\":\n      torusUrl = \"https://testing.tor.us\";\n      logLevel = \"debug\";\n      break;\n    case \"bnb\":\n      torusUrl = \"https://bnb.tor.us\";\n      logLevel = \"error\";\n      break;\n    case \"polygon\":\n      torusUrl = \"https://polygon.tor.us\";\n      logLevel = \"error\";\n      break;\n    case \"lrc\":\n      torusUrl = \"https://lrc.tor.us\";\n      logLevel = \"debug\";\n      break;\n    case \"beta\":\n      torusUrl = \"https://beta.tor.us\";\n      logLevel = \"debug\";\n      break;\n    case \"development\":\n      torusUrl = \"http://localhost:4050\";\n      logLevel = \"debug\";\n      break;\n    default:\n      torusUrl = `https://app.tor.us/v${versionUsed}`;\n      logLevel = \"error\";\n      break;\n  }\n  return {\n    torusUrl,\n    logLevel\n  };\n};\nconst getUserLanguage = () => {\n  let userLanguage = window.navigator.language || \"en-US\";\n  const userLanguages = userLanguage.split(\"-\");\n  userLanguage = Object.prototype.hasOwnProperty.call(configuration.translations, userLanguages[0]) ? userLanguages[0] : \"en\";\n  return userLanguage;\n};\nconst EMITTED_NOTIFICATIONS = [\"eth_subscription\" // per eth-json-rpc-filters/subscriptionManager\n];\n\nconst NOOP = () => {\n  // empty function\n};\nconst FEATURES_PROVIDER_CHANGE_WINDOW = \"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=660,width=375\";\nconst FEATURES_DEFAULT_WALLET_WINDOW = \"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=740,width=1315\";\nconst FEATURES_CONFIRM_WINDOW = \"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=450\";\nfunction getPopupFeatures() {\n  // Fixes dual-screen position                             Most browsers      Firefox\n  const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n  const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n  const w = 1200;\n  const h = 700;\n  const width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : window.screen.width;\n  const height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : window.screen.height;\n  const systemZoom = 1; // No reliable estimate\n  const left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n  const top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n  const features = `titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${h / systemZoom},width=${w / systemZoom},top=${top},left=${left}`;\n  return features;\n}\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nSafeEventEmitter.defaultMaxListeners = 100;\n// resolve response.result, reject errors\nconst getRpcPromiseCallback = function (resolve, reject) {\n  let unwrapResult = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  return (error, response) => {\n    if (error || response.error) {\n      return reject(error || response.error);\n    }\n    return !unwrapResult || Array.isArray(response) ? resolve(response) : resolve(response.result);\n  };\n};\nclass TorusInpageProvider extends SafeEventEmitter {\n  /**\n   * The chain ID of the currently connected Ethereum chain.\n   * See [chainId.network]{@link https://chainid.network} for more information.\n   */\n\n  /**\n   * The user's currently selected Ethereum address.\n   * If null, MetaMask is either locked or the user has not permitted any\n   * addresses to be viewed.\n   */\n\n  /**\n   * Indicating that this provider is a MetaMask provider.\n   */\n\n  constructor(connectionStream) {\n    let {\n      maxEventListeners = 100,\n      shouldSendMetadata = true,\n      jsonRpcStreamName = \"provider\"\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super();\n    _defineProperty(this, \"chainId\", void 0);\n    _defineProperty(this, \"selectedAddress\", void 0);\n    _defineProperty(this, \"_rpcEngine\", void 0);\n    _defineProperty(this, \"networkVersion\", void 0);\n    _defineProperty(this, \"shouldSendMetadata\", void 0);\n    _defineProperty(this, \"isTorus\", void 0);\n    _defineProperty(this, \"_publicConfigStore\", void 0);\n    _defineProperty(this, \"tryPreopenHandle\", void 0);\n    _defineProperty(this, \"enable\", void 0);\n    _defineProperty(this, \"_state\", void 0);\n    _defineProperty(this, \"_jsonRpcConnection\", void 0);\n    _defineProperty(this, \"_sentWarnings\", {\n      // methods\n      enable: false,\n      experimentalMethods: false,\n      send: false,\n      publicConfigStore: false,\n      // events\n      events: {\n        close: false,\n        data: false,\n        networkChanged: false,\n        notification: false\n      }\n    });\n    if (!duplex(connectionStream)) {\n      throw new Error(messages.errors.invalidDuplexStream());\n    }\n    this.isTorus = true;\n    this.setMaxListeners(maxEventListeners);\n    // private state\n    this._state = _objectSpread$1({}, TorusInpageProvider._defaultState);\n    // public state\n    this.selectedAddress = null;\n    this.networkVersion = null;\n    this.chainId = null;\n    this.shouldSendMetadata = shouldSendMetadata;\n    // bind functions (to prevent e.g. web3@1.x from making unbound calls)\n    this._handleAccountsChanged = this._handleAccountsChanged.bind(this);\n    this._handleChainChanged = this._handleChainChanged.bind(this);\n    this._handleUnlockStateChanged = this._handleUnlockStateChanged.bind(this);\n    this._handleConnect = this._handleConnect.bind(this);\n    this._handleDisconnect = this._handleDisconnect.bind(this);\n    this._handleStreamDisconnect = this._handleStreamDisconnect.bind(this);\n    this._sendSync = this._sendSync.bind(this);\n    this._rpcRequest = this._rpcRequest.bind(this);\n    this._warnOfDeprecation = this._warnOfDeprecation.bind(this);\n    this._initializeState = this._initializeState.bind(this);\n    this.request = this.request.bind(this);\n    this.send = this.send.bind(this);\n    this.sendAsync = this.sendAsync.bind(this);\n    // this.enable = this.enable.bind(this);\n    // setup connectionStream multiplexing\n    const mux = new ObjectMultiplex();\n    pump(connectionStream, mux, connectionStream, this._handleStreamDisconnect.bind(this, \"MetaMask\"));\n    // subscribe to metamask public config (one-way)\n    this._publicConfigStore = new ObservableStore({\n      storageKey: \"Metamask-Config\"\n    });\n    // handle isUnlocked changes, and chainChanged and networkChanged events\n    // this._publicConfigStore.subscribe((stringifiedState) => {\n    //   // This is because we are using store as string\n    //   const state = JSON.parse(stringifiedState as unknown as string);\n    //   if (\"isUnlocked\" in state && state.isUnlocked !== this._state.isUnlocked) {\n    //     this._state.isUnlocked = state.isUnlocked;\n    //     if (!this._state.isUnlocked) {\n    //       // accounts are never exposed when the extension is locked\n    //       this._handleAccountsChanged([]);\n    //     } else {\n    //       // this will get the exposed accounts, if any\n    //       try {\n    //         this._rpcRequest(\n    //           { method: \"eth_accounts\", params: [] },\n    //           NOOP,\n    //           true // indicating that eth_accounts _should_ update accounts\n    //         );\n    //       } catch (_) {\n    //         // Swallow error\n    //       }\n    //     }\n    //   }\n    //   if (\"selectedAddress\" in state && this.selectedAddress !== state.selectedAddress) {\n    //     try {\n    //       this._rpcRequest(\n    //         { method: \"eth_accounts\", params: [] },\n    //         NOOP,\n    //         true // indicating that eth_accounts _should_ update accounts\n    //       );\n    //     } catch (_) {\n    //       // Swallow error\n    //     }\n    //   }\n    //   // Emit chainChanged event on chain change\n    //   if (\"chainId\" in state && state.chainId !== this.chainId) {\n    //     this.chainId = state.chainId || null;\n    //     this.emit(\"chainChanged\", this.chainId);\n    //     // indicate that we've connected, for EIP-1193 compliance\n    //     // we do this here so that iframe can initialize\n    //     if (!this._state.hasEmittedConnection) {\n    //       this._handleConnect(this.chainId);\n    //       this._state.hasEmittedConnection = true;\n    //     }\n    //   }\n    //   // Emit networkChanged event on network change\n    //   if (\"networkVersion\" in state && state.networkVersion !== this.networkVersion) {\n    //     this.networkVersion = state.networkVersion || null;\n    //     this.emit(\"networkChanged\", this.networkVersion);\n    //   }\n    // });\n    pump(mux.createStream(\"publicConfig\"), storeAsStream(this._publicConfigStore),\n    // RPC requests should still work if only this stream fails\n    logStreamDisconnectWarning.bind(this, \"MetaMask PublicConfigStore\"));\n    // ignore phishing warning message (handled elsewhere)\n    mux.ignoreStream(\"phishing\");\n    // setup own event listeners\n    // EIP-1193 connect\n    this.on(\"connect\", () => {\n      this._state.isConnected = true;\n    });\n    // connect to async provider\n    const jsonRpcConnection = createStreamMiddleware();\n    pump(jsonRpcConnection.stream, mux.createStream(jsonRpcStreamName), jsonRpcConnection.stream, this._handleStreamDisconnect.bind(this, \"MetaMask RpcProvider\"));\n    // handle RPC requests via dapp-side rpc engine\n    const rpcEngine = new JRPCEngine();\n    rpcEngine.push(createIdRemapMiddleware());\n    rpcEngine.push(createErrorMiddleware());\n    rpcEngine.push(jsonRpcConnection.middleware);\n    this._rpcEngine = rpcEngine;\n    // json rpc notification listener\n    jsonRpcConnection.events.on(\"notification\", payload => {\n      const {\n        method,\n        params\n      } = payload;\n      if (method === \"wallet_accountsChanged\") {\n        this._handleAccountsChanged(params);\n      } else if (method === \"wallet_unlockStateChanged\") {\n        this._handleUnlockStateChanged(params);\n      } else if (method === \"wallet_chainChanged\") {\n        this._handleChainChanged(params);\n      } else if (EMITTED_NOTIFICATIONS.includes(payload.method)) {\n        // EIP 1193 subscriptions, per eth-json-rpc-filters/subscriptionManager\n        this.emit(\"data\", payload); // deprecated\n        this.emit(\"notification\", params.result);\n        this.emit(\"message\", {\n          type: method,\n          data: params\n        });\n      }\n      // Backward compatibility for older non EIP 1193 subscriptions\n      // this.emit('data', null, payload)\n    });\n  }\n\n  get publicConfigStore() {\n    if (!this._sentWarnings.publicConfigStore) {\n      log.warn(messages.warnings.publicConfigStore);\n      this._sentWarnings.publicConfigStore = true;\n    }\n    return this._publicConfigStore;\n  }\n  /**\n   * Returns whether the inpage provider is connected to Torus.\n   */\n  isConnected() {\n    return this._state.isConnected;\n  }\n  /**\n   * Submits an RPC request for the given method, with the given params.\n   * Resolves with the result of the method call, or rejects on error.\n   *\n   * @param args - The RPC request arguments.\n   * @returns A Promise that resolves with the result of the RPC method,\n   * or rejects if an error is encountered.\n   */\n  async request(args) {\n    if (!args || typeof args !== \"object\" || Array.isArray(args)) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestArgs(),\n        data: args\n      });\n    }\n    const {\n      method,\n      params\n    } = args;\n    if (typeof method !== \"string\" || method.length === 0) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestMethod(),\n        data: args\n      });\n    }\n    if (params !== undefined && !Array.isArray(params) && (typeof params !== \"object\" || params === null)) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestParams(),\n        data: args\n      });\n    }\n    return new Promise((resolve, reject) => {\n      this._rpcRequest({\n        method,\n        params\n      }, getRpcPromiseCallback(resolve, reject));\n    });\n  }\n  /**\n   * Submits an RPC request per the given JSON-RPC request object.\n   *\n   * @param payload - The RPC request object.\n   * @param cb - The callback function.\n   */\n  sendAsync(payload, callback) {\n    this._rpcRequest(payload, callback);\n  }\n  /**\n   * We override the following event methods so that we can warn consumers\n   * about deprecated events:\n   *   addListener, on, once, prependListener, prependOnceListener\n   */\n  addListener(eventName, listener) {\n    this._warnOfDeprecation(eventName);\n    return super.addListener(eventName, listener);\n  }\n  on(eventName, listener) {\n    this._warnOfDeprecation(eventName);\n    return super.on(eventName, listener);\n  }\n  once(eventName, listener) {\n    this._warnOfDeprecation(eventName);\n    return super.once(eventName, listener);\n  }\n  prependListener(eventName, listener) {\n    this._warnOfDeprecation(eventName);\n    return super.prependListener(eventName, listener);\n  }\n  prependOnceListener(eventName, listener) {\n    this._warnOfDeprecation(eventName);\n    return super.prependOnceListener(eventName, listener);\n  }\n  // Private Methods\n  //= ===================\n  /**\n   * Constructor helper.\n   * Populates initial state by calling 'wallet_getProviderState' and emits\n   * necessary events.\n   */\n  async _initializeState() {\n    try {\n      const {\n        accounts,\n        chainId,\n        isUnlocked,\n        networkVersion\n      } = await this.request({\n        method: \"wallet_getProviderState\"\n      });\n      // indicate that we've connected, for EIP-1193 compliance\n      this.emit(\"connect\", {\n        chainId\n      });\n      this._handleChainChanged({\n        chainId,\n        networkVersion\n      });\n      this._handleUnlockStateChanged({\n        accounts,\n        isUnlocked\n      });\n      this._handleAccountsChanged(accounts);\n    } catch (error) {\n      log.error(\"MetaMask: Failed to get initial state. Please report this bug.\", error);\n    } finally {\n      log.info(\"initialized state\");\n      this._state.initialized = true;\n      this.emit(\"_initialized\");\n    }\n  }\n  /**\n   * Internal RPC method. Forwards requests to background via the RPC engine.\n   * Also remap ids inbound and outbound.\n   *\n   * @param payload - The RPC request object.\n   * @param callback - The consumer's callback.\n   * @param isInternal - false - Whether the request is internal.\n   */\n  _rpcRequest(payload, callback) {\n    let isInternal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    let cb = callback;\n    const _payload = payload;\n    if (!Array.isArray(_payload)) {\n      if (!_payload.jsonrpc) {\n        _payload.jsonrpc = \"2.0\";\n      }\n      if (_payload.method === \"eth_accounts\" || _payload.method === \"eth_requestAccounts\") {\n        // handle accounts changing\n        cb = (err, res) => {\n          this._handleAccountsChanged(res.result || [], _payload.method === \"eth_accounts\", isInternal);\n          callback(err, res);\n        };\n      } else if (_payload.method === \"wallet_getProviderState\") {\n        this._rpcEngine.handle(payload, cb);\n        return;\n      }\n    }\n    this.tryPreopenHandle(_payload, cb);\n  }\n  send(methodOrPayload, callbackOrArgs) {\n    if (!this._sentWarnings.send) {\n      log.warn(messages.warnings.sendDeprecation);\n      this._sentWarnings.send = true;\n    }\n    if (typeof methodOrPayload === \"string\" && (!callbackOrArgs || Array.isArray(callbackOrArgs))) {\n      return new Promise((resolve, reject) => {\n        try {\n          this._rpcRequest({\n            method: methodOrPayload,\n            params: callbackOrArgs\n          }, getRpcPromiseCallback(resolve, reject, false));\n        } catch (error) {\n          reject(error);\n        }\n      });\n    }\n    if (methodOrPayload && typeof methodOrPayload === \"object\" && typeof callbackOrArgs === \"function\") {\n      return this._rpcRequest(methodOrPayload, callbackOrArgs);\n    }\n    return this._sendSync(methodOrPayload);\n  }\n  /**\n   * DEPRECATED.\n   * Internal backwards compatibility method, used in send.\n   */\n  _sendSync(payload) {\n    let result;\n    switch (payload.method) {\n      case \"eth_accounts\":\n        result = this.selectedAddress ? [this.selectedAddress] : [];\n        break;\n      case \"eth_coinbase\":\n        result = this.selectedAddress || null;\n        break;\n      case \"eth_uninstallFilter\":\n        this._rpcRequest(payload, NOOP);\n        result = true;\n        break;\n      case \"net_version\":\n        result = this.networkVersion || null;\n        break;\n      default:\n        throw new Error(messages.errors.unsupportedSync(payload.method));\n    }\n    return {\n      id: payload.id,\n      jsonrpc: payload.jsonrpc,\n      result\n    };\n  }\n  /**\n   * When the provider becomes connected, updates internal state and emits\n   * required events. Idempotent.\n   *\n   * @param chainId - The ID of the newly connected chain.\n   * emits MetaMaskInpageProvider#connect\n   */\n  _handleConnect(chainId) {\n    if (!this._state.isConnected) {\n      this._state.isConnected = true;\n      this.emit(\"connect\", {\n        chainId\n      });\n      log.debug(messages.info.connected(chainId));\n    }\n  }\n  /**\n   * When the provider becomes disconnected, updates internal state and emits\n   * required events. Idempotent with respect to the isRecoverable parameter.\n   *\n   * Error codes per the CloseEvent status codes as required by EIP-1193:\n   * https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes\n   *\n   * @param isRecoverable - Whether the disconnection is recoverable.\n   * @param errorMessage - A custom error message.\n   * emits MetaMaskInpageProvider#disconnect\n   */\n  _handleDisconnect(isRecoverable, errorMessage) {\n    if (this._state.isConnected || !this._state.isPermanentlyDisconnected && !isRecoverable) {\n      this._state.isConnected = false;\n      let error;\n      if (isRecoverable) {\n        error = new EthereumRpcError(1013,\n        // Try again later\n        errorMessage || messages.errors.disconnected());\n        log.debug(error);\n      } else {\n        error = new EthereumRpcError(1011,\n        // Internal error\n        errorMessage || messages.errors.permanentlyDisconnected());\n        log.error(error);\n        this.chainId = null;\n        this._state.accounts = null;\n        this.selectedAddress = null;\n        this._state.isUnlocked = false;\n        this._state.isPermanentlyDisconnected = true;\n      }\n      this.emit(\"disconnect\", error);\n    }\n  }\n  /**\n   * Called when connection is lost to critical streams.\n   *\n   * emits MetamaskInpageProvider#disconnect\n   */\n  _handleStreamDisconnect(streamName, error) {\n    logStreamDisconnectWarning(streamName, error, this);\n    this._handleDisconnect(false, error ? error.message : undefined);\n  }\n  /**\n   * Called when accounts may have changed.\n   */\n  _handleAccountsChanged(accounts) {\n    let isEthAccounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let isInternal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    // defensive programming\n    let finalAccounts = accounts;\n    if (!Array.isArray(finalAccounts)) {\n      log.error(\"MetaMask: Received non-array accounts parameter. Please report this bug.\", finalAccounts);\n      finalAccounts = [];\n    }\n    for (const account of accounts) {\n      if (typeof account !== \"string\") {\n        log.error(\"MetaMask: Received non-string account. Please report this bug.\", accounts);\n        finalAccounts = [];\n        break;\n      }\n    }\n    // emit accountsChanged if anything about the accounts array has changed\n    if (!dequal(this._state.accounts, finalAccounts)) {\n      // we should always have the correct accounts even before eth_accounts\n      // returns, except in cases where isInternal is true\n      if (isEthAccounts && Array.isArray(this._state.accounts) && this._state.accounts.length > 0 && !isInternal) {\n        log.error('MetaMask: \"eth_accounts\" unexpectedly updated accounts. Please report this bug.', finalAccounts);\n      }\n      this._state.accounts = finalAccounts;\n      this.emit(\"accountsChanged\", finalAccounts);\n    }\n    // handle selectedAddress\n    if (this.selectedAddress !== finalAccounts[0]) {\n      this.selectedAddress = finalAccounts[0] || null;\n    }\n  }\n  /**\n   * Upon receipt of a new chainId and networkVersion, emits corresponding\n   * events and sets relevant public state.\n   * Does nothing if neither the chainId nor the networkVersion are different\n   * from existing values.\n   *\n   * emits MetamaskInpageProvider#chainChanged\n   * @param networkInfo - An object with network info.\n   */\n  _handleChainChanged() {\n    let {\n      chainId,\n      networkVersion\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!chainId || !networkVersion) {\n      log.error(\"MetaMask: Received invalid network parameters. Please report this bug.\", {\n        chainId,\n        networkVersion\n      });\n      return;\n    }\n    if (networkVersion === \"loading\") {\n      this._handleDisconnect(true);\n    } else {\n      this._handleConnect(chainId);\n      if (chainId !== this.chainId) {\n        this.chainId = chainId;\n        if (this._state.initialized) {\n          this.emit(\"chainChanged\", this.chainId);\n        }\n      }\n    }\n  }\n  /**\n   * Upon receipt of a new isUnlocked state, sets relevant public state.\n   * Calls the accounts changed handler with the received accounts, or an empty\n   * array.\n   *\n   * Does nothing if the received value is equal to the existing value.\n   * There are no lock/unlock events.\n   *\n   * @param opts - Options bag.\n   */\n  _handleUnlockStateChanged() {\n    let {\n      accounts,\n      isUnlocked\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (typeof isUnlocked !== \"boolean\") {\n      log.error(\"MetaMask: Received invalid isUnlocked parameter. Please report this bug.\", {\n        isUnlocked\n      });\n      return;\n    }\n    if (isUnlocked !== this._state.isUnlocked) {\n      this._state.isUnlocked = isUnlocked;\n      this._handleAccountsChanged(accounts || []);\n    }\n  }\n  /**\n   * Warns of deprecation for the given event, if applicable.\n   */\n  _warnOfDeprecation(eventName) {\n    if (this._sentWarnings.events[eventName] === false) {\n      log.warn(messages.warnings.events[eventName]);\n      this._sentWarnings.events[eventName] = true;\n    }\n  }\n}\n_defineProperty(TorusInpageProvider, \"_defaultState\", {\n  accounts: null,\n  isConnected: false,\n  isUnlocked: false,\n  initialized: false,\n  isPermanentlyDisconnected: false,\n  hasEmittedConnection: false\n});\n\nconst defaults = options => ({\n  algorithms: options.algorithms || [\"sha256\"],\n  delimiter: options.delimiter || \" \",\n  full: options.full || false\n});\n// Generate list of hashes\nconst hashes = (options, data) => {\n  const internalHashes = {};\n  options.algorithms.forEach(algorithm => {\n    internalHashes[algorithm] = createHash(algorithm).update(data, \"utf8\").digest(\"base64\");\n  });\n  return internalHashes;\n};\n// Build an integrity string\nconst integrity = (options, sri) => {\n  let output = \"\";\n  // Hash list\n  output += Object.keys(sri.hashes).map(algorithm => `${algorithm}-${sri.hashes[algorithm]}`).join(options.delimiter);\n  return output;\n};\nconst main = (options, data) => {\n  // Defaults\n  const finalOptions = defaults(options);\n  const sri = {\n    hashes: hashes(finalOptions, data),\n    integrity: undefined\n  };\n  sri.integrity = integrity(finalOptions, sri);\n  return finalOptions.full ? sri : sri.integrity;\n};\n\nclass PopupHandler extends EventEmitter {\n  constructor(_ref) {\n    let {\n      url,\n      target,\n      features\n    } = _ref;\n    super();\n    _defineProperty(this, \"url\", void 0);\n    _defineProperty(this, \"target\", void 0);\n    _defineProperty(this, \"features\", void 0);\n    _defineProperty(this, \"window\", void 0);\n    _defineProperty(this, \"windowTimer\", void 0);\n    _defineProperty(this, \"iClosedWindow\", void 0);\n    this.url = url;\n    this.target = target || \"_blank\";\n    this.features = features || getPopupFeatures();\n    this.window = undefined;\n    this.windowTimer = undefined;\n    this.iClosedWindow = false;\n    this._setupTimer();\n  }\n  _setupTimer() {\n    this.windowTimer = Number(setInterval(() => {\n      if (this.window && this.window.closed) {\n        clearInterval(this.windowTimer);\n        if (!this.iClosedWindow) {\n          this.emit(\"close\");\n        }\n        this.iClosedWindow = false;\n        this.window = undefined;\n      }\n      if (this.window === undefined) clearInterval(this.windowTimer);\n    }, 500));\n  }\n  open() {\n    this.window = window.open(this.url.href, this.target, this.features);\n    if (this.window?.focus) this.window.focus();\n  }\n  close() {\n    this.iClosedWindow = true;\n    if (this.window) this.window.close();\n  }\n  redirect(locationReplaceOnRedirect) {\n    if (locationReplaceOnRedirect) {\n      window.location.replace(this.url.href);\n    } else {\n      window.location.href = this.url.href;\n    }\n  }\n}\n\n/**\n * Returns whether the given image URL exists\n * @param url - the url of the image\n * @returns - whether the image exists\n */\nfunction imgExists(url) {\n  return new Promise((resolve, reject) => {\n    try {\n      const img = document.createElement(\"img\");\n      img.onload = () => resolve(true);\n      img.onerror = () => resolve(false);\n      img.src = url;\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n/**\n * Extracts a name for the site from the DOM\n */\nconst getSiteName = window => {\n  const {\n    document\n  } = window;\n  const siteName = document.querySelector('head > meta[property=\"og:site_name\"]');\n  if (siteName) {\n    return siteName.content;\n  }\n  const metaTitle = document.querySelector('head > meta[name=\"title\"]');\n  if (metaTitle) {\n    return metaTitle.content;\n  }\n  if (document.title && document.title.length > 0) {\n    return document.title;\n  }\n  return window.location.hostname;\n};\n/**\n * Extracts an icon for the site from the DOM\n */\nasync function getSiteIcon(window) {\n  const {\n    document\n  } = window;\n  // Use the site's favicon if it exists\n  let icon = document.querySelector('head > link[rel=\"shortcut icon\"]');\n  if (icon && (await imgExists(icon.href))) {\n    return icon.href;\n  }\n  // Search through available icons in no particular order\n  icon = Array.from(document.querySelectorAll('head > link[rel=\"icon\"]')).find(_icon => Boolean(_icon.href));\n  if (icon && (await imgExists(icon.href))) {\n    return icon.href;\n  }\n  return null;\n}\n/**\n * Gets site metadata and returns it\n *\n */\nconst getSiteMetadata = async () => ({\n  name: getSiteName(window),\n  icon: await getSiteIcon(window)\n});\n/**\n * Sends site metadata over an RPC request.\n */\nasync function sendSiteMetadata(engine) {\n  try {\n    const domainMetadata = await getSiteMetadata();\n    // call engine.handle directly to avoid normal RPC request handling\n    engine.handle({\n      jsonrpc: \"2.0\",\n      id: getPreopenInstanceId(),\n      method: \"wallet_sendDomainMetadata\",\n      params: domainMetadata\n    }, NOOP);\n  } catch (error) {\n    log.error({\n      message: messages.errors.sendSiteMetadata(),\n      originalError: error\n    });\n  }\n}\n\nconst _excluded = [\"host\", \"chainId\", \"networkName\"];\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nconst defaultVerifiers = {\n  [LOGIN_PROVIDER.GOOGLE]: true,\n  [LOGIN_PROVIDER.FACEBOOK]: true,\n  [LOGIN_PROVIDER.REDDIT]: true,\n  [LOGIN_PROVIDER.TWITCH]: true,\n  [LOGIN_PROVIDER.DISCORD]: true\n};\nconst iframeIntegrity = \"sha384-TyJix2beanZzcdkcboa6uCUYMyLD0sGfvLb2m9+BJABgk4/kEutoxLOLL4Xex+DM\";\nconst expectedCacheControlHeader = \"max-age=3600\";\nconst UNSAFE_METHODS = [\"eth_sendTransaction\", \"eth_signTypedData\", \"eth_signTypedData_v3\", \"eth_signTypedData_v4\", \"personal_sign\", \"eth_getEncryptionPublicKey\", \"eth_decrypt\", \"wallet_addEthereumChain\", \"wallet_switchEthereumChain\"];\n// preload for iframe doesn't work https://bugs.chromium.org/p/chromium/issues/detail?id=593267\n(async function preLoadIframe() {\n  try {\n    if (typeof document === \"undefined\") return;\n    const torusIframeHtml = document.createElement(\"link\");\n    const {\n      torusUrl\n    } = await getTorusUrl(\"production\", {\n      check: false,\n      hash: iframeIntegrity,\n      version: \"\"\n    });\n    torusIframeHtml.href = `${torusUrl}/popup`;\n    torusIframeHtml.crossOrigin = \"anonymous\";\n    torusIframeHtml.type = \"text/html\";\n    torusIframeHtml.rel = \"prefetch\";\n    if (torusIframeHtml.relList && torusIframeHtml.relList.supports) {\n      if (torusIframeHtml.relList.supports(\"prefetch\")) {\n        document.head.appendChild(torusIframeHtml);\n      }\n    }\n  } catch (error) {\n    log.warn(error);\n  }\n})();\nclass Torus {\n  constructor() {\n    let {\n      buttonPosition = BUTTON_POSITION.BOTTOM_LEFT,\n      buttonSize = 56,\n      modalZIndex = 99999,\n      apiKey = \"torus-default\"\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _defineProperty(this, \"buttonPosition\", BUTTON_POSITION.BOTTOM_LEFT);\n    _defineProperty(this, \"buttonSize\", void 0);\n    _defineProperty(this, \"torusUrl\", void 0);\n    _defineProperty(this, \"torusIframe\", void 0);\n    _defineProperty(this, \"styleLink\", void 0);\n    _defineProperty(this, \"isLoggedIn\", void 0);\n    _defineProperty(this, \"isInitialized\", void 0);\n    _defineProperty(this, \"torusWidgetVisibility\", void 0);\n    _defineProperty(this, \"torusAlert\", void 0);\n    _defineProperty(this, \"apiKey\", void 0);\n    _defineProperty(this, \"modalZIndex\", void 0);\n    _defineProperty(this, \"alertZIndex\", void 0);\n    _defineProperty(this, \"torusAlertContainer\", void 0);\n    _defineProperty(this, \"isIframeFullScreen\", void 0);\n    _defineProperty(this, \"whiteLabel\", void 0);\n    _defineProperty(this, \"requestedVerifier\", void 0);\n    _defineProperty(this, \"currentVerifier\", void 0);\n    _defineProperty(this, \"embedTranslations\", void 0);\n    _defineProperty(this, \"ethereum\", void 0);\n    _defineProperty(this, \"provider\", void 0);\n    _defineProperty(this, \"communicationMux\", void 0);\n    _defineProperty(this, \"isLoginCallback\", void 0);\n    _defineProperty(this, \"paymentProviders\", configuration.paymentProviders);\n    _defineProperty(this, \"loginHint\", \"\");\n    _defineProperty(this, \"useWalletConnect\", void 0);\n    _defineProperty(this, \"isCustomLogin\", false);\n    this.buttonPosition = buttonPosition;\n    this.buttonSize = buttonSize;\n    this.torusUrl = \"\";\n    this.isLoggedIn = false; // ethereum.enable working\n    this.isInitialized = false; // init done\n    this.torusWidgetVisibility = true;\n    this.requestedVerifier = \"\";\n    this.currentVerifier = \"\";\n    // this.nodeDetailManager = new NodeDetailManager();\n    // this.torusJs = new TorusJs({\n    //   metadataHost: \"https://metadata.tor.us\",\n    //   allowHost: \"https://signer.tor.us/api/allow\",\n    //   network: \"mainnet\",\n    // });\n    this.apiKey = apiKey;\n    setAPIKey(apiKey);\n    this.modalZIndex = modalZIndex;\n    this.alertZIndex = modalZIndex + 1000;\n    this.isIframeFullScreen = false;\n  }\n  async init() {\n    let {\n      buildEnv = TORUS_BUILD_ENV.PRODUCTION,\n      enableLogging = false,\n      // deprecated: use loginConfig instead\n      enabledVerifiers = defaultVerifiers,\n      network = {\n        host: \"mainnet\",\n        chainId: null,\n        networkName: \"\",\n        blockExplorer: \"\",\n        ticker: \"\",\n        tickerName: \"\"\n      },\n      loginConfig = {},\n      showTorusButton = true,\n      integrity = {\n        check: false,\n        hash: iframeIntegrity,\n        version: \"\"\n      },\n      whiteLabel,\n      skipTKey = false,\n      useWalletConnect = false,\n      mfaLevel = \"default\"\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (this.isInitialized) throw new Error(\"Already initialized\");\n    const {\n      torusUrl,\n      logLevel\n    } = await getTorusUrl(buildEnv, integrity);\n    log.info(torusUrl, \"url loaded\");\n    this.torusUrl = torusUrl;\n    this.whiteLabel = whiteLabel;\n    this.useWalletConnect = useWalletConnect;\n    this.isCustomLogin = !!(loginConfig && Object.keys(loginConfig).length > 0) || !!(whiteLabel && Object.keys(whiteLabel).length > 0);\n    log.setDefaultLevel(logLevel);\n    if (enableLogging) log.enableAll();else log.disableAll();\n    this.torusWidgetVisibility = showTorusButton;\n    const torusIframeUrl = new URL(torusUrl);\n    if (torusIframeUrl.pathname.endsWith(\"/\")) torusIframeUrl.pathname += \"popup\";else torusIframeUrl.pathname += \"/popup\";\n    torusIframeUrl.hash = `#isCustomLogin=${this.isCustomLogin}`;\n    // Iframe code\n    this.torusIframe = htmlToElement(`<iframe\n        id=\"torusIframe\"\n        allow=${useWalletConnect ? \"camera\" : \"\"}\n        class=\"torusIframe\"\n        src=\"${torusIframeUrl.href}\"\n        style=\"display: none; position: fixed; top: 0; right: 0; width: 100%; color-scheme: none;\n        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex}\"\n      ></iframe>`);\n    this.torusAlertContainer = htmlToElement('<div id=\"torusAlertContainer\"></div>');\n    this.torusAlertContainer.style.display = \"none\";\n    this.torusAlertContainer.style.setProperty(\"z-index\", this.alertZIndex.toString());\n    const link = window.document.createElement(\"link\");\n    link.setAttribute(\"rel\", \"stylesheet\");\n    link.setAttribute(\"type\", \"text/css\");\n    link.setAttribute(\"href\", `${torusUrl}/css/widget.css`);\n    this.styleLink = link;\n    const {\n      defaultLanguage = getUserLanguage(),\n      customTranslations = {}\n    } = this.whiteLabel || {};\n    const mergedTranslations = deepmerge(configuration.translations, customTranslations);\n    const languageTranslations = mergedTranslations[defaultLanguage] || configuration.translations[getUserLanguage()];\n    this.embedTranslations = languageTranslations.embed;\n    const handleSetup = async () => {\n      await documentReady();\n      return new Promise((resolve, reject) => {\n        this.torusIframe.onload = async () => {\n          // only do this if iframe is not full screen\n          this._setupWeb3();\n          const initStream = this.communicationMux.getStream(\"init_stream\");\n          initStream.on(\"data\", chunk => {\n            const {\n              name,\n              data,\n              error\n            } = chunk;\n            if (name === \"init_complete\" && data.success) {\n              // resolve promise\n              this.isInitialized = true;\n              this._displayIframe(this.isIframeFullScreen);\n              resolve(undefined);\n            } else if (error) {\n              reject(new Error(error));\n            }\n          });\n          initStream.write({\n            name: \"init_stream\",\n            data: {\n              enabledVerifiers,\n              loginConfig,\n              whiteLabel: this.whiteLabel,\n              buttonPosition: this.buttonPosition,\n              buttonSize: this.buttonSize,\n              torusWidgetVisibility: this.torusWidgetVisibility,\n              apiKey: this.apiKey,\n              skipTKey,\n              network,\n              mfaLevel\n            }\n          });\n        };\n        window.document.head.appendChild(this.styleLink);\n        window.document.body.appendChild(this.torusIframe);\n        window.document.body.appendChild(this.torusAlertContainer);\n      });\n    };\n    if (buildEnv === \"production\" && integrity.check) {\n      // hacky solution to check for iframe integrity\n      const fetchUrl = `${torusUrl}/popup`;\n      const resp = await fetch(fetchUrl, {\n        cache: \"reload\"\n      });\n      if (resp.headers.get(\"Cache-Control\") !== expectedCacheControlHeader) {\n        throw new Error(`Unexpected Cache-Control headers, got ${resp.headers.get(\"Cache-Control\")}`);\n      }\n      const response = await resp.text();\n      const calculatedIntegrity = main({\n        algorithms: [\"sha384\"]\n      }, response);\n      log.info(calculatedIntegrity, \"integrity\");\n      if (calculatedIntegrity === integrity.hash) {\n        await handleSetup();\n      } else {\n        this.clearInit();\n        throw new Error(\"Integrity check failed\");\n      }\n    } else {\n      await handleSetup();\n    }\n    return undefined;\n  }\n  login() {\n    let {\n      verifier = \"\",\n      login_hint: loginHint = \"\"\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!this.isInitialized) throw new Error(\"Call init() first\");\n    this.requestedVerifier = verifier;\n    this.loginHint = loginHint;\n    return this.ethereum.enable();\n  }\n  logout() {\n    return new Promise((resolve, reject) => {\n      if (!this.isLoggedIn) {\n        reject(new Error(\"User has not logged in yet\"));\n        return;\n      }\n      const logOutStream = this.communicationMux.getStream(\"logout\");\n      logOutStream.write({\n        name: \"logOut\"\n      });\n      const statusStream = this.communicationMux.getStream(\"status\");\n      const statusStreamHandler = status => {\n        if (!status.loggedIn) {\n          this.isLoggedIn = false;\n          this.currentVerifier = \"\";\n          this.requestedVerifier = \"\";\n          resolve();\n        } else reject(new Error(\"Some Error Occured\"));\n      };\n      handleStream(statusStream, \"data\", statusStreamHandler);\n    });\n  }\n  async cleanUp() {\n    if (this.isLoggedIn) {\n      await this.logout();\n    }\n    this.clearInit();\n  }\n  clearInit() {\n    function isElement(element) {\n      return element instanceof Element || element instanceof HTMLDocument;\n    }\n    if (isElement(this.styleLink) && window.document.body.contains(this.styleLink)) {\n      this.styleLink.remove();\n      this.styleLink = undefined;\n    }\n    if (isElement(this.torusIframe) && window.document.body.contains(this.torusIframe)) {\n      this.torusIframe.remove();\n      this.torusIframe = undefined;\n    }\n    if (isElement(this.torusAlertContainer) && window.document.body.contains(this.torusAlertContainer)) {\n      this.torusAlert = undefined;\n      this.torusAlertContainer.remove();\n      this.torusAlertContainer = undefined;\n    }\n    this.isInitialized = false;\n  }\n  hideTorusButton() {\n    this.torusWidgetVisibility = false;\n    this._sendWidgetVisibilityStatus(false);\n    this._displayIframe();\n  }\n  showTorusButton() {\n    this.torusWidgetVisibility = true;\n    this._sendWidgetVisibilityStatus(true);\n    this._displayIframe();\n  }\n  setProvider(_ref) {\n    let {\n        host = \"mainnet\",\n        chainId = null,\n        networkName = \"\"\n      } = _ref,\n      rest = _objectWithoutProperties(_ref, _excluded);\n    return new Promise((resolve, reject) => {\n      const providerChangeStream = this.communicationMux.getStream(\"provider_change\");\n      const handler = chunk => {\n        const {\n          err,\n          success\n        } = chunk.data;\n        log.info(chunk);\n        if (err) {\n          reject(err);\n        } else if (success) {\n          resolve();\n        } else reject(new Error(\"some error occured\"));\n      };\n      handleStream(providerChangeStream, \"data\", handler);\n      const preopenInstanceId = getPreopenInstanceId();\n      this._handleWindow(preopenInstanceId, {\n        target: \"_blank\",\n        features: FEATURES_PROVIDER_CHANGE_WINDOW\n      });\n      providerChangeStream.write({\n        name: \"show_provider_change\",\n        data: {\n          network: _objectSpread({\n            host,\n            chainId,\n            networkName\n          }, rest),\n          preopenInstanceId,\n          override: false\n        }\n      });\n    });\n  }\n  showWallet(path) {\n    let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const showWalletStream = this.communicationMux.getStream(\"show_wallet\");\n    const finalPath = path ? `/${path}` : \"\";\n    showWalletStream.write({\n      name: \"show_wallet\",\n      data: {\n        path: finalPath\n      }\n    });\n    const showWalletHandler = chunk => {\n      if (chunk.name === \"show_wallet_instance\") {\n        // Let the error propogate up (hence, no try catch)\n        const {\n          instanceId\n        } = chunk.data;\n        const finalUrl = new URL(`${this.torusUrl}/wallet${finalPath}`);\n        // Using URL constructor to prevent js injection and allow parameter validation.!\n        finalUrl.searchParams.append(\"integrity\", \"true\");\n        finalUrl.searchParams.append(\"instanceId\", instanceId);\n        Object.keys(params).forEach(x => {\n          finalUrl.searchParams.append(x, params[x]);\n        });\n        finalUrl.hash = `#isCustomLogin=${this.isCustomLogin}`;\n        const walletWindow = new PopupHandler({\n          url: finalUrl,\n          features: FEATURES_DEFAULT_WALLET_WINDOW\n        });\n        walletWindow.open();\n      }\n    };\n    handleStream(showWalletStream, \"data\", showWalletHandler);\n  }\n  async getPublicAddress(_ref2) {\n    let {\n      verifier,\n      verifierId,\n      isExtended = false\n    } = _ref2;\n    if (!configuration.supportedVerifierList.includes(verifier) || !WALLET_OPENLOGIN_VERIFIER_MAP[verifier]) throw new Error(\"Unsupported verifier\");\n    const walletVerifier = verifier;\n    const openloginVerifier = WALLET_OPENLOGIN_VERIFIER_MAP[verifier];\n    const url = new URL(`https://api.tor.us/lookup/torus`);\n    url.searchParams.append(\"verifier\", openloginVerifier);\n    url.searchParams.append(\"verifierId\", verifierId);\n    url.searchParams.append(\"walletVerifier\", walletVerifier);\n    url.searchParams.append(\"network\", \"mainnet\");\n    url.searchParams.append(\"isExtended\", isExtended.toString());\n    return get(url.href, {\n      headers: {\n        \"Content-Type\": \"application/json; charset=utf-8\"\n      }\n    }, {\n      useAPIKey: true\n    });\n  }\n  getUserInfo(message) {\n    return new Promise((resolve, reject) => {\n      if (this.isLoggedIn) {\n        const userInfoAccessStream = this.communicationMux.getStream(\"user_info_access\");\n        userInfoAccessStream.write({\n          name: \"user_info_access_request\"\n        });\n        const userInfoAccessHandler = chunk => {\n          const {\n            name,\n            data: {\n              approved,\n              payload,\n              rejected,\n              newRequest\n            }\n          } = chunk;\n          if (name === \"user_info_access_response\") {\n            if (approved) {\n              resolve(payload);\n            } else if (rejected) {\n              reject(new Error(\"User rejected the request\"));\n            } else if (newRequest) {\n              const userInfoStream = this.communicationMux.getStream(\"user_info\");\n              const userInfoHandler = handlerChunk => {\n                if (handlerChunk.name === \"user_info_response\") {\n                  if (handlerChunk.data.approved) {\n                    resolve(handlerChunk.data.payload);\n                  } else {\n                    reject(new Error(\"User rejected the request\"));\n                  }\n                }\n              };\n              handleStream(userInfoStream, \"data\", userInfoHandler);\n              const preopenInstanceId = getPreopenInstanceId();\n              this._handleWindow(preopenInstanceId, {\n                target: \"_blank\",\n                features: FEATURES_PROVIDER_CHANGE_WINDOW\n              });\n              userInfoStream.write({\n                name: \"user_info_request\",\n                data: {\n                  message,\n                  preopenInstanceId\n                }\n              });\n            }\n          }\n        };\n        handleStream(userInfoAccessStream, \"data\", userInfoAccessHandler);\n      } else reject(new Error(\"User has not logged in yet\"));\n    });\n  }\n  initiateTopup(provider, params) {\n    return new Promise((resolve, reject) => {\n      if (this.isInitialized) {\n        const {\n          errors,\n          isValid\n        } = validatePaymentProvider(provider, params);\n        if (!isValid) {\n          reject(new Error(JSON.stringify(errors)));\n          return;\n        }\n        const topupStream = this.communicationMux.getStream(\"topup\");\n        const topupHandler = chunk => {\n          if (chunk.name === \"topup_response\") {\n            if (chunk.data.success) {\n              resolve(chunk.data.success);\n            } else {\n              reject(new Error(chunk.data.error));\n            }\n          }\n        };\n        handleStream(topupStream, \"data\", topupHandler);\n        const preopenInstanceId = getPreopenInstanceId();\n        this._handleWindow(preopenInstanceId);\n        topupStream.write({\n          name: \"topup_request\",\n          data: {\n            provider,\n            params,\n            preopenInstanceId\n          }\n        });\n      } else reject(new Error(\"Torus is not initialized yet\"));\n    });\n  }\n  async loginWithPrivateKey(loginParams) {\n    const {\n      privateKey,\n      userInfo\n    } = loginParams;\n    return new Promise((resolve, reject) => {\n      if (this.isInitialized) {\n        if (Buffer.from(privateKey, \"hex\").length !== 32) {\n          reject(new Error(\"Invalid private key, Please provide a 32 byte valid secp25k1 private key\"));\n          return;\n        }\n        const loginPrivKeyStream = this.communicationMux.getStream(\"login_with_private_key\");\n        const loginHandler = chunk => {\n          if (chunk.name === \"login_with_private_key_response\") {\n            if (chunk.data.success) {\n              resolve(chunk.data.success);\n            } else {\n              reject(new Error(chunk.data.error));\n            }\n          }\n        };\n        handleStream(loginPrivKeyStream, \"data\", loginHandler);\n        loginPrivKeyStream.write({\n          name: \"login_with_private_key_request\",\n          data: {\n            privateKey,\n            userInfo\n          }\n        });\n      } else reject(new Error(\"Torus is not initialized yet\"));\n    });\n  }\n  async showWalletConnectScanner() {\n    if (!this.useWalletConnect) throw new Error(\"Set `useWalletConnect` as true in init function options to use wallet connect scanner\");\n    return new Promise((resolve, reject) => {\n      if (this.isLoggedIn) {\n        const walletConnectStream = this.communicationMux.getStream(\"wallet_connect_stream\");\n        const walletConnectHandler = chunk => {\n          if (chunk.name === \"wallet_connect_stream_res\") {\n            if (chunk.data.success) {\n              resolve(chunk.data.success);\n            } else {\n              reject(new Error(chunk.data.error));\n            }\n            this._displayIframe();\n          }\n        };\n        handleStream(walletConnectStream, \"data\", walletConnectHandler);\n        walletConnectStream.write({\n          name: \"wallet_connect_stream_req\"\n        });\n        this._displayIframe(true);\n      } else reject(new Error(\"User has not logged in yet\"));\n    });\n  }\n  _handleWindow(preopenInstanceId) {\n    let {\n      url,\n      target,\n      features\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (preopenInstanceId) {\n      const windowStream = this.communicationMux.getStream(\"window\");\n      const finalUrl = new URL(url || `${this.torusUrl}/redirect?preopenInstanceId=${preopenInstanceId}`);\n      if (finalUrl.hash) finalUrl.hash += `&isCustomLogin=${this.isCustomLogin}`;else finalUrl.hash = `#isCustomLogin=${this.isCustomLogin}`;\n      const handledWindow = new PopupHandler({\n        url: finalUrl,\n        target,\n        features\n      });\n      handledWindow.open();\n      if (!handledWindow.window) {\n        this._createPopupBlockAlert(preopenInstanceId, finalUrl.href);\n        return;\n      }\n      windowStream.write({\n        name: \"opened_window\",\n        data: {\n          preopenInstanceId\n        }\n      });\n      const closeHandler = _ref3 => {\n        let {\n          preopenInstanceId: receivedId,\n          close\n        } = _ref3;\n        if (receivedId === preopenInstanceId && close) {\n          handledWindow.close();\n          windowStream.removeListener(\"data\", closeHandler);\n        }\n      };\n      windowStream.on(\"data\", closeHandler);\n      handledWindow.once(\"close\", () => {\n        windowStream.write({\n          data: {\n            preopenInstanceId,\n            closed: true\n          }\n        });\n        windowStream.removeListener(\"data\", closeHandler);\n      });\n    }\n  }\n  _setEmbedWhiteLabel(element) {\n    // Set whitelabel\n    const {\n      theme\n    } = this.whiteLabel || {};\n    if (theme) {\n      const {\n        isDark = false,\n        colors = {}\n      } = theme;\n      if (isDark) element.classList.add(\"torus-dark\");\n      if (colors.torusBrand1) element.style.setProperty(\"--torus-brand-1\", colors.torusBrand1);\n      if (colors.torusGray2) element.style.setProperty(\"--torus-gray-2\", colors.torusGray2);\n    }\n  }\n  _getLogoUrl() {\n    let logoUrl = `${this.torusUrl}/images/torus_icon-blue.svg`;\n    if (this.whiteLabel?.theme?.isDark) {\n      logoUrl = this.whiteLabel?.logoLight || logoUrl;\n    } else {\n      logoUrl = this.whiteLabel?.logoDark || logoUrl;\n    }\n    return logoUrl;\n  }\n  _sendWidgetVisibilityStatus(status) {\n    const torusWidgetVisibilityStream = this.communicationMux.getStream(\"torus-widget-visibility\");\n    torusWidgetVisibilityStream.write({\n      data: status\n    });\n  }\n  _displayIframe() {\n    let isFull = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    const style = {};\n    const size = this.buttonSize + 14; // 15px padding\n    // set phase\n    if (!isFull) {\n      style.display = this.torusWidgetVisibility ? \"block\" : \"none\";\n      style.height = `${size}px`;\n      style.width = `${size}px`;\n      switch (this.buttonPosition) {\n        case BUTTON_POSITION.TOP_LEFT:\n          style.top = \"0px\";\n          style.left = \"0px\";\n          style.right = \"auto\";\n          style.bottom = \"auto\";\n          break;\n        case BUTTON_POSITION.TOP_RIGHT:\n          style.top = \"0px\";\n          style.right = \"0px\";\n          style.left = \"auto\";\n          style.bottom = \"auto\";\n          break;\n        case BUTTON_POSITION.BOTTOM_RIGHT:\n          style.bottom = \"0px\";\n          style.right = \"0px\";\n          style.top = \"auto\";\n          style.left = \"auto\";\n          break;\n        case BUTTON_POSITION.BOTTOM_LEFT:\n        default:\n          style.bottom = \"0px\";\n          style.left = \"0px\";\n          style.top = \"auto\";\n          style.right = \"auto\";\n          break;\n      }\n    } else {\n      style.display = \"block\";\n      style.width = \"100%\";\n      style.height = \"100%\";\n      style.top = \"0px\";\n      style.right = \"0px\";\n      style.left = \"0px\";\n      style.bottom = \"0px\";\n    }\n    Object.assign(this.torusIframe.style, style);\n    this.isIframeFullScreen = isFull;\n  }\n  _setupWeb3() {\n    log.info(\"setupWeb3 running\");\n    // setup background connection\n    const metamaskStream = new BasePostMessageStream({\n      name: \"embed_metamask\",\n      target: \"iframe_metamask\",\n      targetWindow: this.torusIframe.contentWindow,\n      targetOrigin: new URL(this.torusUrl).origin\n    });\n    // Due to compatibility reasons, we should not set up multiplexing on window.metamaskstream\n    // because the MetamaskInpageProvider also attempts to do so.\n    // We create another LocalMessageDuplexStream for communication between dapp <> iframe\n    const communicationStream = new BasePostMessageStream({\n      name: \"embed_comm\",\n      target: \"iframe_comm\",\n      targetWindow: this.torusIframe.contentWindow,\n      targetOrigin: new URL(this.torusUrl).origin\n    });\n    // Backward compatibility with Gotchi :)\n    // window.metamaskStream = this.communicationStream\n    // compose the inpage provider\n    const inpageProvider = new TorusInpageProvider(metamaskStream);\n    // detect eth_requestAccounts and pipe to enable for now\n    const detectAccountRequestPrototypeModifier = m => {\n      const originalMethod = inpageProvider[m];\n      inpageProvider[m] = function providerFunc(method) {\n        if (method && method === \"eth_requestAccounts\") {\n          return inpageProvider.enable();\n        }\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        return originalMethod.apply(this, [method, ...args]);\n      };\n    };\n    detectAccountRequestPrototypeModifier(\"send\");\n    detectAccountRequestPrototypeModifier(\"sendAsync\");\n    inpageProvider.enable = () => {\n      return new Promise((resolve, reject) => {\n        // If user is already logged in, we assume they have given access to the website\n        inpageProvider.sendAsync({\n          jsonrpc: \"2.0\",\n          id: getPreopenInstanceId(),\n          method: \"eth_requestAccounts\",\n          params: []\n        }, (err, response) => {\n          const {\n            result: res\n          } = response || {};\n          if (err) {\n            setTimeout(() => {\n              reject(err);\n            }, 50);\n          } else if (Array.isArray(res) && res.length > 0) {\n            // If user is already rehydrated, resolve this\n            // else wait for something to be written to status stream\n            const handleLoginCb = () => {\n              if (this.requestedVerifier !== \"\" && this.currentVerifier !== this.requestedVerifier) {\n                const {\n                  requestedVerifier\n                } = this;\n                // eslint-disable-next-line promise/no-promise-in-callback\n                this.logout()\n                // eslint-disable-next-line promise/always-return\n                .then(_ => {\n                  this.requestedVerifier = requestedVerifier;\n                  this._showLoginPopup(true, resolve, reject);\n                }).catch(error => reject(error));\n              } else {\n                resolve(res);\n              }\n            };\n            if (this.isLoggedIn) {\n              handleLoginCb();\n            } else {\n              this.isLoginCallback = handleLoginCb;\n            }\n          } else {\n            // set up listener for login\n            this._showLoginPopup(true, resolve, reject);\n          }\n        });\n      });\n    };\n    inpageProvider.tryPreopenHandle = (payload, cb) => {\n      const _payload = payload;\n      if (!Array.isArray(_payload) && UNSAFE_METHODS.includes(_payload.method)) {\n        const preopenInstanceId = getPreopenInstanceId();\n        this._handleWindow(preopenInstanceId, {\n          target: \"_blank\",\n          features: FEATURES_CONFIRM_WINDOW\n        });\n        _payload.preopenInstanceId = preopenInstanceId;\n      }\n      inpageProvider._rpcEngine.handle(_payload, cb);\n    };\n    // Work around for web3@1.0 deleting the bound `sendAsync` but not the unbound\n    // `sendAsync` method on the prototype, causing `this` reference issues with drizzle\n    const proxiedInpageProvider = new Proxy(inpageProvider, {\n      // straight up lie that we deleted the property so that it doesnt\n      // throw an error in strict mode\n      deleteProperty: () => true\n    });\n    this.ethereum = proxiedInpageProvider;\n    const communicationMux = setupMultiplex(communicationStream);\n    this.communicationMux = communicationMux;\n    const windowStream = communicationMux.getStream(\"window\");\n    windowStream.on(\"data\", chunk => {\n      if (chunk.name === \"create_window\") {\n        // url is the url we need to open\n        // we can pass the final url upfront so that it removes the step of redirecting to /redirect and waiting for finalUrl\n        this._createPopupBlockAlert(chunk.data.preopenInstanceId, chunk.data.url);\n      }\n    });\n    // show torus widget if button clicked\n    const widgetStream = communicationMux.getStream(\"widget\");\n    widgetStream.on(\"data\", chunk => {\n      const {\n        data\n      } = chunk;\n      this._displayIframe(data);\n    });\n    // Show torus button if wallet has been hydrated/detected\n    const statusStream = communicationMux.getStream(\"status\");\n    statusStream.on(\"data\", status => {\n      // login\n      if (status.loggedIn) {\n        this.isLoggedIn = status.loggedIn;\n        this.currentVerifier = status.verifier;\n      } // logout\n      else this._displayIframe();\n      if (this.isLoginCallback) {\n        this.isLoginCallback();\n        delete this.isLoginCallback;\n      }\n    });\n    this.provider = proxiedInpageProvider;\n    if (this.provider.shouldSendMetadata) sendSiteMetadata(this.provider._rpcEngine);\n    inpageProvider._initializeState();\n    log.debug(\"Torus - injected provider\");\n  }\n  _showLoginPopup(calledFromEmbed, resolve, reject) {\n    const loginHandler = data => {\n      const {\n        err,\n        selectedAddress\n      } = data;\n      if (err) {\n        log.error(err);\n        if (reject) reject(err);\n      }\n      // returns an array (cause accounts expects it)\n      else if (resolve) resolve([selectedAddress]);\n      if (this.isIframeFullScreen) this._displayIframe();\n    };\n    const oauthStream = this.communicationMux.getStream(\"oauth\");\n    if (!this.requestedVerifier) {\n      this._displayIframe(true);\n      handleStream(oauthStream, \"data\", loginHandler);\n      oauthStream.write({\n        name: \"oauth_modal\",\n        data: {\n          calledFromEmbed\n        }\n      });\n    } else {\n      handleStream(oauthStream, \"data\", loginHandler);\n      const preopenInstanceId = getPreopenInstanceId();\n      this._handleWindow(preopenInstanceId);\n      oauthStream.write({\n        name: \"oauth\",\n        data: {\n          calledFromEmbed,\n          verifier: this.requestedVerifier,\n          preopenInstanceId,\n          login_hint: this.loginHint\n        }\n      });\n    }\n  }\n  _createPopupBlockAlert(preopenInstanceId, url) {\n    const logoUrl = this._getLogoUrl();\n    const torusAlert = htmlToElement('<div id=\"torusAlert\" class=\"torus-alert--v2\">' + `<div id=\"torusAlert__logo\"><img src=\"${logoUrl}\" /></div>` + \"<div>\" + `<h1 id=\"torusAlert__title\">${this.embedTranslations.actionRequired}</h1>` + `<p id=\"torusAlert__desc\">${this.embedTranslations.pendingAction}</p>` + \"</div>\" + \"</div>\");\n    const successAlert = htmlToElement(`<div><a id=\"torusAlert__btn\">${this.embedTranslations.continue}</a></div>`);\n    const btnContainer = htmlToElement('<div id=\"torusAlert__btn-container\"></div>');\n    btnContainer.appendChild(successAlert);\n    torusAlert.appendChild(btnContainer);\n    const bindOnLoad = () => {\n      successAlert.addEventListener(\"click\", () => {\n        this._handleWindow(preopenInstanceId, {\n          url,\n          target: \"_blank\",\n          features: FEATURES_CONFIRM_WINDOW\n        });\n        torusAlert.remove();\n        if (this.torusAlertContainer.children.length === 0) this.torusAlertContainer.style.display = \"none\";\n      });\n    };\n    this._setEmbedWhiteLabel(torusAlert);\n    const attachOnLoad = () => {\n      this.torusAlertContainer.style.display = \"block\";\n      this.torusAlertContainer.appendChild(torusAlert);\n    };\n    runOnLoad(attachOnLoad);\n    runOnLoad(bindOnLoad);\n  }\n}\n\nexport { BUTTON_POSITION, LOGIN_PROVIDER, PAYMENT_PROVIDER, SUPPORTED_PAYMENT_NETWORK, TORUS_BUILD_ENV, TorusInpageProvider, WALLET_OPENLOGIN_VERIFIER_MAP, WALLET_VERIFIERS, Torus as default };\n//# sourceMappingURL=torus.esm.js.map\n"]},"metadata":{},"sourceType":"module"}